!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.VB=e():t.VB=e()}(self,(()=>(()=>{var t={6984:(t,e,r)=>{t.exports=r(9792)},7201:(t,e,r)=>{t.exports=r(3042)},1829:(t,e,r)=>{"use strict";var i=r(2222);t.exports=i},6040:(t,e,r)=>{"use strict";var i=r(8251);t.exports=i},7264:(t,e,r)=>{"use strict";var i=r(4139);r(768),r(8549),r(7152),r(1372),t.exports=i},9692:(t,e,r)=>{"use strict";var i=r(7045);t.exports=i},5663:(t,e,r)=>{"use strict";var i=r(70);t.exports=i},6823:(t,e,r)=>{"use strict";var i=r(8280),s=r(2017),n=String.prototype;t.exports=function(t){var e=t.replaceAll;return"string"==typeof t||t===n||i(n,t)&&e===n.replaceAll?s:e}},1926:(t,e,r)=>{"use strict";r(6750);var i=r(2046).Object,s=t.exports=function(t,e,r){return i.defineProperty(t,e,r)};i.defineProperty.sham&&(s.sham=!0)},2017:(t,e,r)=>{"use strict";r(1398),r(1995),r(929);var i=r(1747);t.exports=i("String","replaceAll")},3842:(t,e,r)=>{"use strict";r(8545),r(3643),r(4452),r(3997),r(5084),r(2596),r(5721),r(4954),r(4123),r(3377),r(2230),r(5344),r(1660),r(4610),r(3669),r(4810),r(3325),r(7024),r(8172),r(5205);var i=r(2046);t.exports=i.Symbol},1730:(t,e,r)=>{"use strict";r(9363),r(3643),r(7057),r(4954);var i=r(560);t.exports=i.f("iterator")},1661:(t,e,r)=>{"use strict";r(8537),r(3669);var i=r(560);t.exports=i.f("toPrimitive")},3042:(t,e,r)=>{"use strict";t.exports=r(9604)},9604:(t,e,r)=>{"use strict";r(6038);var i=r(1829);t.exports=i},4997:(t,e,r)=>{"use strict";var i=r(6040);t.exports=i},2321:(t,e,r)=>{"use strict";var i=r(7264);r(3939),r(1785),r(1697),r(4664),r(3422),r(36),r(8703),r(6878),r(9671),r(359),t.exports=i},2231:(t,e,r)=>{"use strict";var i=r(9692);t.exports=i},9280:(t,e,r)=>{"use strict";var i=r(5663);t.exports=i},2159:(t,e,r)=>{"use strict";var i=r(2250),s=r(4640),n=TypeError;t.exports=function(t){if(i(t))return t;throw new n(s(t)+" is not a function")}},43:(t,e,r)=>{"use strict";var i=r(4018),s=String,n=TypeError;t.exports=function(t){if(i(t))return t;throw new n("Can't set "+s(t)+" as a prototype")}},2156:t=>{"use strict";t.exports=function(){}},9596:(t,e,r)=>{"use strict";var i=r(8280),s=TypeError;t.exports=function(t,e){if(i(e,t))return t;throw new s("Incorrect invocation")}},6624:(t,e,r)=>{"use strict";var i=r(6285),s=String,n=TypeError;t.exports=function(t){if(i(t))return t;throw new n(s(t)+" is not an object")}},1229:(t,e,r)=>{"use strict";var i=r(8311),s=r(3930),n=r(9298),a=r(6818),o=r(7812),u=r(5468),c=r(575),h=r(5543),l=r(300),f=r(3448),p=Array;t.exports=function(t){var e=n(t),r=u(this),d=arguments.length,m=d>1?arguments[1]:void 0,v=void 0!==m;v&&(m=i(m,d>2?arguments[2]:void 0));var g,_,x,y,b,E,T=f(e),R=0;if(!T||this===p&&o(T))for(g=c(e),_=r?new this(g):p(g);g>R;R++)E=v?m(e[R],R):e[R],h(_,R,E);else for(_=r?new this:[],b=(y=l(e,T)).next;!(x=s(b,y)).done;R++)E=v?a(y,m,[x.value,R],!0):x.value,h(_,R,E);return _.length=R,_}},4436:(t,e,r)=>{"use strict";var i=r(7374),s=r(4849),n=r(575),a=function(t){return function(e,r,a){var o=i(e),u=n(o);if(0===u)return!t&&-1;var c,h=s(a,u);if(t&&r!=r){for(;u>h;)if((c=o[h++])!=c)return!0}else for(;u>h;h++)if((t||h in o)&&o[h]===r)return t||h||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},726:(t,e,r)=>{"use strict";var i=r(8311),s=r(1907),n=r(6946),a=r(9298),o=r(575),u=r(6968),c=s([].push),h=function(t){var e=1===t,r=2===t,s=3===t,h=4===t,l=6===t,f=7===t,p=5===t||l;return function(d,m,v,g){for(var _,x,y=a(d),b=n(y),E=o(b),T=i(m,v),R=0,w=g||u,S=e?w(d,E):r||f?w(d,0):void 0;E>R;R++)if((p||R in b)&&(x=T(_=b[R],R,y),t))if(e)S[R]=x;else if(x)switch(t){case 3:return!0;case 5:return _;case 6:return R;case 2:c(S,_)}else switch(t){case 4:return!1;case 7:c(S,_)}return l?-1:s||h?h:S}};t.exports={forEach:h(0),map:h(1),filter:h(2),some:h(3),every:h(4),find:h(5),findIndex:h(6),filterReject:h(7)}},7171:(t,e,r)=>{"use strict";var i=r(8828),s=r(6264),n=r(798),a=s("species");t.exports=function(t){return n>=51||!i((function(){var e=[];return(e.constructor={})[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},3427:(t,e,r)=>{"use strict";var i=r(1907);t.exports=i([].slice)},4321:(t,e,r)=>{"use strict";var i=r(3427),s=Math.floor,n=function(t,e){var r=t.length;if(r<8)for(var a,o,u=1;u<r;){for(o=u,a=t[u];o&&e(t[o-1],a)>0;)t[o]=t[--o];o!==u++&&(t[o]=a)}else for(var c=s(r/2),h=n(i(t,0,c),e),l=n(i(t,c),e),f=h.length,p=l.length,d=0,m=0;d<f||m<p;)t[d+m]=d<f&&m<p?e(h[d],l[m])<=0?h[d++]:l[m++]:d<f?h[d++]:l[m++];return t};t.exports=n},4010:(t,e,r)=>{"use strict";var i=r(1793),s=r(5468),n=r(6285),a=r(6264)("species"),o=Array;t.exports=function(t){var e;return i(t)&&(e=t.constructor,(s(e)&&(e===o||i(e.prototype))||n(e)&&null===(e=e[a]))&&(e=void 0)),void 0===e?o:e}},6968:(t,e,r)=>{"use strict";var i=r(4010);t.exports=function(t,e){return new(i(t))(0===e?0:e)}},6818:(t,e,r)=>{"use strict";var i=r(6624),s=r(154);t.exports=function(t,e,r,n){try{return n?e(i(r)[0],r[1]):e(r)}catch(e){s(t,"throw",e)}}},5807:(t,e,r)=>{"use strict";var i=r(1907),s=i({}.toString),n=i("".slice);t.exports=function(t){return n(s(t),8,-1)}},3948:(t,e,r)=>{"use strict";var i=r(2623),s=r(2250),n=r(5807),a=r(6264)("toStringTag"),o=Object,u="Arguments"===n(function(){return arguments}());t.exports=i?n:function(t){var e,r,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=o(t),a))?r:u?n(e):"Object"===(i=n(e))&&s(e.callee)?"Arguments":i}},7382:(t,e,r)=>{"use strict";var i=r(8828);t.exports=!i((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},9550:t=>{"use strict";t.exports=function(t,e){return{value:t,done:e}}},1626:(t,e,r)=>{"use strict";var i=r(9447),s=r(4284),n=r(5817);t.exports=i?function(t,e,r){return s.f(t,e,n(1,r))}:function(t,e,r){return t[e]=r,t}},5817:t=>{"use strict";t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},5543:(t,e,r)=>{"use strict";var i=r(9447),s=r(4284),n=r(5817);t.exports=function(t,e,r){i?s.f(t,e,n(0,r)):t[e]=r}},9251:(t,e,r)=>{"use strict";var i=r(4284);t.exports=function(t,e,r){return i.f(t,e,r)}},8055:(t,e,r)=>{"use strict";var i=r(1626);t.exports=function(t,e,r,s){return s&&s.enumerable?t[e]=r:i(t,e,r),t}},2802:(t,e,r)=>{"use strict";var i=r(8055);t.exports=function(t,e,r){for(var s in e)r&&r.unsafe&&t[s]?t[s]=e[s]:i(t,s,e[s],r);return t}},2532:(t,e,r)=>{"use strict";var i=r(5951),s=Object.defineProperty;t.exports=function(t,e){try{s(i,t,{value:e,configurable:!0,writable:!0})}catch(r){i[t]=e}return e}},9447:(t,e,r)=>{"use strict";var i=r(8828);t.exports=!i((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},9552:(t,e,r)=>{"use strict";var i=r(5951),s=r(6285),n=i.document,a=s(n)&&s(n.createElement);t.exports=function(t){return a?n.createElement(t):{}}},8024:t=>{"use strict";var e=TypeError;t.exports=function(t){if(t>9007199254740991)throw e("Maximum allowed index exceeded");return t}},9287:t=>{"use strict";t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},376:t=>{"use strict";t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},6794:(t,e,r)=>{"use strict";var i=r(5951).navigator,s=i&&i.userAgent;t.exports=s?String(s):""},798:(t,e,r)=>{"use strict";var i,s,n=r(5951),a=r(6794),o=n.process,u=n.Deno,c=o&&o.versions||u&&u.version,h=c&&c.v8;h&&(s=(i=h.split("."))[0]>0&&i[0]<4?1:+(i[0]+i[1])),!s&&a&&(!(i=a.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=a.match(/Chrome\/(\d+)/))&&(s=+i[1]),t.exports=s},1091:(t,e,r)=>{"use strict";var i=r(5951),s=r(6024),n=r(2361),a=r(2250),o=r(3846).f,u=r(7463),c=r(2046),h=r(8311),l=r(1626),f=r(9724);r(6128);var p=function(t){var e=function(r,i,n){if(this instanceof e){switch(arguments.length){case 0:return new t;case 1:return new t(r);case 2:return new t(r,i)}return new t(r,i,n)}return s(t,this,arguments)};return e.prototype=t.prototype,e};t.exports=function(t,e){var r,s,d,m,v,g,_,x,y,b=t.target,E=t.global,T=t.stat,R=t.proto,w=E?i:T?i[b]:i[b]&&i[b].prototype,S=E?c:c[b]||l(c,b,{})[b],A=S.prototype;for(m in e)s=!(r=u(E?m:b+(T?".":"#")+m,t.forced))&&w&&f(w,m),g=S[m],s&&(_=t.dontCallGetSet?(y=o(w,m))&&y.value:w[m]),v=s&&_?_:e[m],(r||R||typeof g!=typeof v)&&(x=t.bind&&s?h(v,i):t.wrap&&s?p(v):R&&a(v)?n(v):v,(t.sham||v&&v.sham||g&&g.sham)&&l(x,"sham",!0),l(S,m,x),R&&(f(c,d=b+"Prototype")||l(c,d,{}),l(c[d],m,v),t.real&&A&&(r||!A[m])&&l(A,m,v)))}},8828:t=>{"use strict";t.exports=function(t){try{return!!t()}catch(t){return!0}}},6024:(t,e,r)=>{"use strict";var i=r(1505),s=Function.prototype,n=s.apply,a=s.call;t.exports="object"==typeof Reflect&&Reflect.apply||(i?a.bind(n):function(){return a.apply(n,arguments)})},8311:(t,e,r)=>{"use strict";var i=r(2361),s=r(2159),n=r(1505),a=i(i.bind);t.exports=function(t,e){return s(t),void 0===e?t:n?a(t,e):function(){return t.apply(e,arguments)}}},1505:(t,e,r)=>{"use strict";var i=r(8828);t.exports=!i((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},3930:(t,e,r)=>{"use strict";var i=r(1505),s=Function.prototype.call;t.exports=i?s.bind(s):function(){return s.apply(s,arguments)}},6833:(t,e,r)=>{"use strict";var i=r(9447),s=r(9724),n=Function.prototype,a=i&&Object.getOwnPropertyDescriptor,o=s(n,"name"),u=o&&"something"===function(){}.name,c=o&&(!i||i&&a(n,"name").configurable);t.exports={EXISTS:o,PROPER:u,CONFIGURABLE:c}},1871:(t,e,r)=>{"use strict";var i=r(1907),s=r(2159);t.exports=function(t,e,r){try{return i(s(Object.getOwnPropertyDescriptor(t,e)[r]))}catch(t){}}},2361:(t,e,r)=>{"use strict";var i=r(5807),s=r(1907);t.exports=function(t){if("Function"===i(t))return s(t)}},1907:(t,e,r)=>{"use strict";var i=r(1505),s=Function.prototype,n=s.call,a=i&&s.bind.bind(n,n);t.exports=i?a:function(t){return function(){return n.apply(t,arguments)}}},1747:(t,e,r)=>{"use strict";var i=r(5951),s=r(2046);t.exports=function(t,e){var r=s[t+"Prototype"],n=r&&r[e];if(n)return n;var a=i[t],o=a&&a.prototype;return o&&o[e]}},5582:(t,e,r)=>{"use strict";var i=r(2046),s=r(5951),n=r(2250),a=function(t){return n(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?a(i[t])||a(s[t]):i[t]&&i[t][e]||s[t]&&s[t][e]}},3448:(t,e,r)=>{"use strict";var i=r(3948),s=r(9367),n=r(7136),a=r(3742),o=r(6264)("iterator");t.exports=function(t){if(!n(t))return s(t,o)||s(t,"@@iterator")||a[i(t)]}},300:(t,e,r)=>{"use strict";var i=r(3930),s=r(2159),n=r(6624),a=r(4640),o=r(3448),u=TypeError;t.exports=function(t,e){var r=arguments.length<2?o(t):e;if(s(r))return n(i(r,t));throw new u(a(t)+" is not iterable")}},6656:(t,e,r)=>{"use strict";var i=r(1907),s=r(1793),n=r(2250),a=r(5807),o=r(160),u=i([].push);t.exports=function(t){if(n(t))return t;if(s(t)){for(var e=t.length,r=[],i=0;i<e;i++){var c=t[i];"string"==typeof c?u(r,c):"number"!=typeof c&&"Number"!==a(c)&&"String"!==a(c)||u(r,o(c))}var h=r.length,l=!0;return function(t,e){if(l)return l=!1,e;if(s(this))return e;for(var i=0;i<h;i++)if(r[i]===t)return e}}}},9367:(t,e,r)=>{"use strict";var i=r(2159),s=r(7136);t.exports=function(t,e){var r=t[e];return s(r)?void 0:i(r)}},7703:(t,e,r)=>{"use strict";var i=r(1907),s=r(9298),n=Math.floor,a=i("".charAt),o=i("".replace),u=i("".slice),c=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,h=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,r,i,l,f){var p=r+t.length,d=i.length,m=h;return void 0!==l&&(l=s(l),m=c),o(f,m,(function(s,o){var c;switch(a(o,0)){case"$":return"$";case"&":return t;case"`":return u(e,0,r);case"'":return u(e,p);case"<":c=l[u(o,1,-1)];break;default:var h=+o;if(0===h)return s;if(h>d){var f=n(h/10);return 0===f?s:f<=d?void 0===i[f-1]?a(o,1):i[f-1]+a(o,1):s}c=i[h-1]}return void 0===c?"":c}))}},5951:function(t,e,r){"use strict";var i=function(t){return t&&t.Math===Math&&t};t.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof r.g&&r.g)||i("object"==typeof this&&this)||function(){return this}()||Function("return this")()},9724:(t,e,r)=>{"use strict";var i=r(1907),s=r(9298),n=i({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return n(s(t),e)}},8530:t=>{"use strict";t.exports={}},2416:(t,e,r)=>{"use strict";var i=r(5582);t.exports=i("document","documentElement")},3648:(t,e,r)=>{"use strict";var i=r(9447),s=r(8828),n=r(9552);t.exports=!i&&!s((function(){return 7!==Object.defineProperty(n("div"),"a",{get:function(){return 7}}).a}))},6946:(t,e,r)=>{"use strict";var i=r(1907),s=r(8828),n=r(5807),a=Object,o=i("".split);t.exports=s((function(){return!a("z").propertyIsEnumerable(0)}))?function(t){return"String"===n(t)?o(t,""):a(t)}:a},2647:(t,e,r)=>{"use strict";var i=r(1907),s=r(2250),n=r(6128),a=i(Function.toString);s(n.inspectSource)||(n.inspectSource=function(t){return a(t)}),t.exports=n.inspectSource},4932:(t,e,r)=>{"use strict";var i,s,n,a=r(551),o=r(5951),u=r(6285),c=r(1626),h=r(9724),l=r(6128),f=r(2522),p=r(8530),d="Object already initialized",m=o.TypeError,v=o.WeakMap;if(a||l.state){var g=l.state||(l.state=new v);g.get=g.get,g.has=g.has,g.set=g.set,i=function(t,e){if(g.has(t))throw new m(d);return e.facade=t,g.set(t,e),e},s=function(t){return g.get(t)||{}},n=function(t){return g.has(t)}}else{var _=f("state");p[_]=!0,i=function(t,e){if(h(t,_))throw new m(d);return e.facade=t,c(t,_,e),e},s=function(t){return h(t,_)?t[_]:{}},n=function(t){return h(t,_)}}t.exports={set:i,get:s,has:n,enforce:function(t){return n(t)?s(t):i(t,{})},getterFor:function(t){return function(e){var r;if(!u(e)||(r=s(e)).type!==t)throw new m("Incompatible receiver, "+t+" required");return r}}}},7812:(t,e,r)=>{"use strict";var i=r(6264),s=r(3742),n=i("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(s.Array===t||a[n]===t)}},1793:(t,e,r)=>{"use strict";var i=r(5807);t.exports=Array.isArray||function(t){return"Array"===i(t)}},2250:t=>{"use strict";var e="object"==typeof document&&document.all;t.exports=void 0===e&&void 0!==e?function(t){return"function"==typeof t||t===e}:function(t){return"function"==typeof t}},5468:(t,e,r)=>{"use strict";var i=r(1907),s=r(8828),n=r(2250),a=r(3948),o=r(5582),u=r(2647),c=function(){},h=o("Reflect","construct"),l=/^\s*(?:class|function)\b/,f=i(l.exec),p=!l.test(c),d=function(t){if(!n(t))return!1;try{return h(c,[],t),!0}catch(t){return!1}},m=function(t){if(!n(t))return!1;switch(a(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!f(l,u(t))}catch(t){return!0}};m.sham=!0,t.exports=!h||s((function(){var t;return d(d.call)||!d(Object)||!d((function(){t=!0}))||t}))?m:d},7463:(t,e,r)=>{"use strict";var i=r(8828),s=r(2250),n=/#|\.prototype\./,a=function(t,e){var r=u[o(t)];return r===h||r!==c&&(s(e)?i(e):!!e)},o=a.normalize=function(t){return String(t).replace(n,".").toLowerCase()},u=a.data={},c=a.NATIVE="N",h=a.POLYFILL="P";t.exports=a},7136:t=>{"use strict";t.exports=function(t){return null==t}},6285:(t,e,r)=>{"use strict";var i=r(2250);t.exports=function(t){return"object"==typeof t?null!==t:i(t)}},4018:(t,e,r)=>{"use strict";var i=r(6285);t.exports=function(t){return i(t)||null===t}},7376:t=>{"use strict";t.exports=!0},2087:(t,e,r)=>{"use strict";var i=r(6285),s=r(5807),n=r(6264)("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[n])?!!e:"RegExp"===s(t))}},5594:(t,e,r)=>{"use strict";var i=r(5582),s=r(2250),n=r(8280),a=r(1175),o=Object;t.exports=a?function(t){return"symbol"==typeof t}:function(t){var e=i("Symbol");return s(e)&&n(e.prototype,o(t))}},154:(t,e,r)=>{"use strict";var i=r(3930),s=r(6624),n=r(9367);t.exports=function(t,e,r){var a,o;s(t);try{if(!(a=n(t,"return"))){if("throw"===e)throw r;return r}a=i(a,t)}catch(t){o=!0,a=t}if("throw"===e)throw r;if(o)throw a;return s(a),r}},7181:(t,e,r)=>{"use strict";var i=r(5116).IteratorPrototype,s=r(8075),n=r(5817),a=r(4840),o=r(3742),u=function(){return this};t.exports=function(t,e,r,c){var h=e+" Iterator";return t.prototype=s(i,{next:n(+!c,r)}),a(t,h,!1,!0),o[h]=u,t}},183:(t,e,r)=>{"use strict";var i=r(1091),s=r(3930),n=r(7376),a=r(6833),o=r(2250),u=r(7181),c=r(5972),h=r(9192),l=r(4840),f=r(1626),p=r(8055),d=r(6264),m=r(3742),v=r(5116),g=a.PROPER,_=a.CONFIGURABLE,x=v.IteratorPrototype,y=v.BUGGY_SAFARI_ITERATORS,b=d("iterator"),E="keys",T="values",R="entries",w=function(){return this};t.exports=function(t,e,r,a,d,v,S){u(r,e,a);var A,C,L,O=function(t){if(t===d&&U)return U;if(!y&&t&&t in I)return I[t];switch(t){case E:case T:case R:return function(){return new r(this,t)}}return function(){return new r(this)}},P=e+" Iterator",M=!1,I=t.prototype,k=I[b]||I["@@iterator"]||d&&I[d],U=!y&&k||O(d),B="Array"===e&&I.entries||k;if(B&&(A=c(B.call(new t)))!==Object.prototype&&A.next&&(n||c(A)===x||(h?h(A,x):o(A[b])||p(A,b,w)),l(A,P,!0,!0),n&&(m[P]=w)),g&&d===T&&k&&k.name!==T&&(!n&&_?f(I,"name",T):(M=!0,U=function(){return s(k,this)})),d)if(C={values:O(T),keys:v?U:O(E),entries:O(R)},S)for(L in C)(y||M||!(L in I))&&p(I,L,C[L]);else i({target:e,proto:!0,forced:y||M},C);return n&&!S||I[b]===U||p(I,b,U,{name:d}),m[e]=U,C}},5116:(t,e,r)=>{"use strict";var i,s,n,a=r(8828),o=r(2250),u=r(6285),c=r(8075),h=r(5972),l=r(8055),f=r(6264),p=r(7376),d=f("iterator"),m=!1;[].keys&&("next"in(n=[].keys())?(s=h(h(n)))!==Object.prototype&&(i=s):m=!0),!u(i)||a((function(){var t={};return i[d].call(t)!==t}))?i={}:p&&(i=c(i)),o(i[d])||l(i,d,(function(){return this})),t.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:m}},3742:t=>{"use strict";t.exports={}},575:(t,e,r)=>{"use strict";var i=r(3121);t.exports=function(t){return i(t.length)}},1176:t=>{"use strict";var e=Math.ceil,r=Math.floor;t.exports=Math.trunc||function(t){var i=+t;return(i>0?r:e)(i)}},9538:(t,e,r)=>{"use strict";var i=r(9447),s=r(1907),n=r(3930),a=r(8828),o=r(2875),u=r(7170),c=r(2574),h=r(9298),l=r(6946),f=Object.assign,p=Object.defineProperty,d=s([].concat);t.exports=!f||a((function(){if(i&&1!==f({b:1},f(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},r=Symbol("assign detection"),s="abcdefghijklmnopqrst";return t[r]=7,s.split("").forEach((function(t){e[t]=t})),7!==f({},t)[r]||o(f({},e)).join("")!==s}))?function(t,e){for(var r=h(t),s=arguments.length,a=1,f=u.f,p=c.f;s>a;)for(var m,v=l(arguments[a++]),g=f?d(o(v),f(v)):o(v),_=g.length,x=0;_>x;)m=g[x++],i&&!n(p,v,m)||(r[m]=v[m]);return r}:f},8075:(t,e,r)=>{"use strict";var i,s=r(6624),n=r(2220),a=r(376),o=r(8530),u=r(2416),c=r(9552),h=r(2522),l="prototype",f="script",p=h("IE_PROTO"),d=function(){},m=function(t){return"<"+f+">"+t+"</"+f+">"},v=function(t){t.write(m("")),t.close();var e=t.parentWindow.Object;return t=null,e},g=function(){try{i=new ActiveXObject("htmlfile")}catch(t){}var t,e,r;g="undefined"!=typeof document?document.domain&&i?v(i):(e=c("iframe"),r="java"+f+":",e.style.display="none",u.appendChild(e),e.src=String(r),(t=e.contentWindow.document).open(),t.write(m("document.F=Object")),t.close(),t.F):v(i);for(var s=a.length;s--;)delete g[l][a[s]];return g()};o[p]=!0,t.exports=Object.create||function(t,e){var r;return null!==t?(d[l]=s(t),r=new d,d[l]=null,r[p]=t):r=g(),void 0===e?r:n.f(r,e)}},2220:(t,e,r)=>{"use strict";var i=r(9447),s=r(8661),n=r(4284),a=r(6624),o=r(7374),u=r(2875);e.f=i&&!s?Object.defineProperties:function(t,e){a(t);for(var r,i=o(e),s=u(e),c=s.length,h=0;c>h;)n.f(t,r=s[h++],i[r]);return t}},4284:(t,e,r)=>{"use strict";var i=r(9447),s=r(3648),n=r(8661),a=r(6624),o=r(470),u=TypeError,c=Object.defineProperty,h=Object.getOwnPropertyDescriptor,l="enumerable",f="configurable",p="writable";e.f=i?n?function(t,e,r){if(a(t),e=o(e),a(r),"function"==typeof t&&"prototype"===e&&"value"in r&&p in r&&!r[p]){var i=h(t,e);i&&i[p]&&(t[e]=r.value,r={configurable:f in r?r[f]:i[f],enumerable:l in r?r[l]:i[l],writable:!1})}return c(t,e,r)}:c:function(t,e,r){if(a(t),e=o(e),a(r),s)try{return c(t,e,r)}catch(t){}if("get"in r||"set"in r)throw new u("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},3846:(t,e,r)=>{"use strict";var i=r(9447),s=r(3930),n=r(2574),a=r(5817),o=r(7374),u=r(470),c=r(9724),h=r(3648),l=Object.getOwnPropertyDescriptor;e.f=i?l:function(t,e){if(t=o(t),e=u(e),h)try{return l(t,e)}catch(t){}if(c(t,e))return a(!s(n.f,t,e),t[e])}},5407:(t,e,r)=>{"use strict";var i=r(5807),s=r(7374),n=r(4443).f,a=r(3427),o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return o&&"Window"===i(t)?function(t){try{return n(t)}catch(t){return a(o)}}(t):n(s(t))}},4443:(t,e,r)=>{"use strict";var i=r(3045),s=r(376).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,s)}},7170:(t,e)=>{"use strict";e.f=Object.getOwnPropertySymbols},5972:(t,e,r)=>{"use strict";var i=r(9724),s=r(2250),n=r(9298),a=r(2522),o=r(7382),u=a("IE_PROTO"),c=Object,h=c.prototype;t.exports=o?c.getPrototypeOf:function(t){var e=n(t);if(i(e,u))return e[u];var r=e.constructor;return s(r)&&e instanceof r?r.prototype:e instanceof c?h:null}},8280:(t,e,r)=>{"use strict";var i=r(1907);t.exports=i({}.isPrototypeOf)},3045:(t,e,r)=>{"use strict";var i=r(1907),s=r(9724),n=r(7374),a=r(4436).indexOf,o=r(8530),u=i([].push);t.exports=function(t,e){var r,i=n(t),c=0,h=[];for(r in i)!s(o,r)&&s(i,r)&&u(h,r);for(;e.length>c;)s(i,r=e[c++])&&(~a(h,r)||u(h,r));return h}},2875:(t,e,r)=>{"use strict";var i=r(3045),s=r(376);t.exports=Object.keys||function(t){return i(t,s)}},2574:(t,e)=>{"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,s=i&&!r.call({1:2},1);e.f=s?function(t){var e=i(this,t);return!!e&&e.enumerable}:r},9192:(t,e,r)=>{"use strict";var i=r(1871),s=r(6285),n=r(4239),a=r(43);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=i(Object.prototype,"__proto__","set"))(r,[]),e=r instanceof Array}catch(t){}return function(r,i){return n(r),a(i),s(r)?(e?t(r,i):r.__proto__=i,r):r}}():void 0)},4878:(t,e,r)=>{"use strict";var i=r(2623),s=r(3948);t.exports=i?{}.toString:function(){return"[object "+s(this)+"]"}},581:(t,e,r)=>{"use strict";var i=r(3930),s=r(2250),n=r(6285),a=TypeError;t.exports=function(t,e){var r,o;if("string"===e&&s(r=t.toString)&&!n(o=i(r,t)))return o;if(s(r=t.valueOf)&&!n(o=i(r,t)))return o;if("string"!==e&&s(r=t.toString)&&!n(o=i(r,t)))return o;throw new a("Can't convert object to primitive value")}},2046:t=>{"use strict";t.exports={}},5606:(t,e,r)=>{"use strict";var i=r(6624);t.exports=function(){var t=i(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}},663:(t,e,r)=>{"use strict";var i=r(3930),s=r(9724),n=r(8280),a=r(5606),o=RegExp.prototype;t.exports=function(t){var e=t.flags;return void 0!==e||"flags"in o||s(t,"flags")||!n(o,t)?e:i(a,t)}},4239:(t,e,r)=>{"use strict";var i=r(7136),s=TypeError;t.exports=function(t){if(i(t))throw new s("Can't call method on "+t);return t}},2098:(t,e,r)=>{"use strict";var i=r(5951),s=r(9447),n=Object.getOwnPropertyDescriptor;t.exports=function(t){if(!s)return i[t];var e=n(i,t);return e&&e.value}},4840:(t,e,r)=>{"use strict";var i=r(2623),s=r(4284).f,n=r(1626),a=r(9724),o=r(4878),u=r(6264)("toStringTag");t.exports=function(t,e,r,c){var h=r?t:t&&t.prototype;h&&(a(h,u)||s(h,u,{configurable:!0,value:e}),c&&!i&&n(h,"toString",o))}},2522:(t,e,r)=>{"use strict";var i=r(5816),s=r(6499),n=i("keys");t.exports=function(t){return n[t]||(n[t]=s(t))}},6128:(t,e,r)=>{"use strict";var i=r(7376),s=r(5951),n=r(2532),a="__core-js_shared__",o=t.exports=s[a]||n(a,{});(o.versions||(o.versions=[])).push({version:"3.39.0",mode:i?"pure":"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.39.0/LICENSE",source:"https://github.com/zloirock/core-js"})},5816:(t,e,r)=>{"use strict";var i=r(6128);t.exports=function(t,e){return i[t]||(i[t]=e||{})}},1470:(t,e,r)=>{"use strict";var i=r(1907),s=r(5482),n=r(160),a=r(4239),o=i("".charAt),u=i("".charCodeAt),c=i("".slice),h=function(t){return function(e,r){var i,h,l=n(a(e)),f=s(r),p=l.length;return f<0||f>=p?t?"":void 0:(i=u(l,f))<55296||i>56319||f+1===p||(h=u(l,f+1))<56320||h>57343?t?o(l,f):i:t?c(l,f,f+2):h-56320+(i-55296<<10)+65536}};t.exports={codeAt:h(!1),charAt:h(!0)}},9156:(t,e,r)=>{"use strict";var i=r(1907),s=2147483647,n=/[^\0-\u007E]/,a=/[.\u3002\uFF0E\uFF61]/g,o="Overflow: input needs wider integers to process",u=RangeError,c=i(a.exec),h=Math.floor,l=String.fromCharCode,f=i("".charCodeAt),p=i([].join),d=i([].push),m=i("".replace),v=i("".split),g=i("".toLowerCase),_=function(t){return t+22+75*(t<26)},x=function(t,e,r){var i=0;for(t=r?h(t/700):t>>1,t+=h(t/e);t>455;)t=h(t/35),i+=36;return h(i+36*t/(t+38))},y=function(t){var e=[];t=function(t){for(var e=[],r=0,i=t.length;r<i;){var s=f(t,r++);if(s>=55296&&s<=56319&&r<i){var n=f(t,r++);56320==(64512&n)?d(e,((1023&s)<<10)+(1023&n)+65536):(d(e,s),r--)}else d(e,s)}return e}(t);var r,i,n=t.length,a=128,c=0,m=72;for(r=0;r<t.length;r++)(i=t[r])<128&&d(e,l(i));var v=e.length,g=v;for(v&&d(e,"-");g<n;){var y=s;for(r=0;r<t.length;r++)(i=t[r])>=a&&i<y&&(y=i);var b=g+1;if(y-a>h((s-c)/b))throw new u(o);for(c+=(y-a)*b,a=y,r=0;r<t.length;r++){if((i=t[r])<a&&++c>s)throw new u(o);if(i===a){for(var E=c,T=36;;){var R=T<=m?1:T>=m+26?26:T-m;if(E<R)break;var w=E-R,S=36-R;d(e,l(_(R+w%S))),E=h(w/S),T+=36}d(e,l(_(E))),m=x(c,b,g===v),c=0,g++}}c++,a++}return p(e,"")};t.exports=function(t){var e,r,i=[],s=v(m(g(t),a,"."),".");for(e=0;e<s.length;e++)r=s[e],d(i,c(n,r)?"xn--"+y(r):r);return p(i,".")}},9846:(t,e,r)=>{"use strict";var i=r(798),s=r(8828),n=r(5951).String;t.exports=!!Object.getOwnPropertySymbols&&!s((function(){var t=Symbol("symbol detection");return!n(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&i&&i<41}))},3467:(t,e,r)=>{"use strict";var i=r(3930),s=r(5582),n=r(6264),a=r(8055);t.exports=function(){var t=s("Symbol"),e=t&&t.prototype,r=e&&e.valueOf,o=n("toPrimitive");e&&!e[o]&&a(e,o,(function(t){return i(r,this)}),{arity:1})}},2595:(t,e,r)=>{"use strict";var i=r(5582),s=r(1907),n=i("Symbol"),a=n.keyFor,o=s(n.prototype.valueOf);t.exports=n.isRegisteredSymbol||function(t){try{return void 0!==a(o(t))}catch(t){return!1}}},9197:(t,e,r)=>{"use strict";for(var i=r(5816),s=r(5582),n=r(1907),a=r(5594),o=r(6264),u=s("Symbol"),c=u.isWellKnownSymbol,h=s("Object","getOwnPropertyNames"),l=n(u.prototype.valueOf),f=i("wks"),p=0,d=h(u),m=d.length;p<m;p++)try{var v=d[p];a(u[v])&&o(v)}catch(t){}t.exports=function(t){if(c&&c(t))return!0;try{for(var e=l(t),r=0,i=h(f),s=i.length;r<s;r++)if(f[i[r]]==e)return!0}catch(t){}return!1}},4411:(t,e,r)=>{"use strict";var i=r(9846);t.exports=i&&!!Symbol.for&&!!Symbol.keyFor},4849:(t,e,r)=>{"use strict";var i=r(5482),s=Math.max,n=Math.min;t.exports=function(t,e){var r=i(t);return r<0?s(r+e,0):n(r,e)}},7374:(t,e,r)=>{"use strict";var i=r(6946),s=r(4239);t.exports=function(t){return i(s(t))}},5482:(t,e,r)=>{"use strict";var i=r(1176);t.exports=function(t){var e=+t;return e!=e||0===e?0:i(e)}},3121:(t,e,r)=>{"use strict";var i=r(5482),s=Math.min;t.exports=function(t){var e=i(t);return e>0?s(e,9007199254740991):0}},9298:(t,e,r)=>{"use strict";var i=r(4239),s=Object;t.exports=function(t){return s(i(t))}},6028:(t,e,r)=>{"use strict";var i=r(3930),s=r(6285),n=r(5594),a=r(9367),o=r(581),u=r(6264),c=TypeError,h=u("toPrimitive");t.exports=function(t,e){if(!s(t)||n(t))return t;var r,u=a(t,h);if(u){if(void 0===e&&(e="default"),r=i(u,t,e),!s(r)||n(r))return r;throw new c("Can't convert object to primitive value")}return void 0===e&&(e="number"),o(t,e)}},470:(t,e,r)=>{"use strict";var i=r(6028),s=r(5594);t.exports=function(t){var e=i(t,"string");return s(e)?e:e+""}},2623:(t,e,r)=>{"use strict";var i={};i[r(6264)("toStringTag")]="z",t.exports="[object z]"===String(i)},160:(t,e,r)=>{"use strict";var i=r(3948),s=String;t.exports=function(t){if("Symbol"===i(t))throw new TypeError("Cannot convert a Symbol value to a string");return s(t)}},4640:t=>{"use strict";var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},6499:(t,e,r)=>{"use strict";var i=r(1907),s=0,n=Math.random(),a=i(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+a(++s+n,36)}},4791:(t,e,r)=>{"use strict";var i=r(8828),s=r(6264),n=r(9447),a=r(7376),o=s("iterator");t.exports=!i((function(){var t=new URL("b?a=1&b=2&c=3","https://a"),e=t.searchParams,r=new URLSearchParams("a=1&a=2&b=3"),i="";return t.pathname="c%20d",e.forEach((function(t,r){e.delete("b"),i+=r+t})),r.delete("a",2),r.delete("b",void 0),a&&(!t.toJSON||!r.has("a",1)||r.has("a",2)||!r.has("a",void 0)||r.has("b"))||!e.size&&(a||!n)||!e.sort||"https://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[o]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("https://тест").host||"#%D0%B1"!==new URL("https://a#б").hash||"a1c3"!==i||"x"!==new URL("https://x",void 0).host}))},1175:(t,e,r)=>{"use strict";var i=r(9846);t.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},8661:(t,e,r)=>{"use strict";var i=r(9447),s=r(8828);t.exports=i&&s((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},4787:t=>{"use strict";var e=TypeError;t.exports=function(t,r){if(t<r)throw new e("Not enough arguments");return t}},551:(t,e,r)=>{"use strict";var i=r(5951),s=r(2250),n=i.WeakMap;t.exports=s(n)&&/native code/.test(String(n))},366:(t,e,r)=>{"use strict";var i=r(2046),s=r(9724),n=r(560),a=r(4284).f;t.exports=function(t){var e=i.Symbol||(i.Symbol={});s(e,t)||a(e,t,{value:n.f(t)})}},560:(t,e,r)=>{"use strict";var i=r(6264);e.f=i},6264:(t,e,r)=>{"use strict";var i=r(5951),s=r(5816),n=r(9724),a=r(6499),o=r(9846),u=r(1175),c=i.Symbol,h=s("wks"),l=u?c.for||c:c&&c.withoutSetter||a;t.exports=function(t){return n(h,t)||(h[t]=o&&n(c,t)?c[t]:l("Symbol."+t)),h[t]}},8545:(t,e,r)=>{"use strict";var i=r(1091),s=r(8828),n=r(1793),a=r(6285),o=r(9298),u=r(575),c=r(8024),h=r(5543),l=r(6968),f=r(7171),p=r(6264),d=r(798),m=p("isConcatSpreadable"),v=d>=51||!s((function(){var t=[];return t[m]=!1,t.concat()[0]!==t})),g=function(t){if(!a(t))return!1;var e=t[m];return void 0!==e?!!e:n(t)};i({target:"Array",proto:!0,arity:1,forced:!v||!f("concat")},{concat:function(t){var e,r,i,s,n,a=o(this),f=l(a,0),p=0;for(e=-1,i=arguments.length;e<i;e++)if(g(n=-1===e?a:arguments[e]))for(s=u(n),c(p+s),r=0;r<s;r++,p++)r in n&&h(f,p,n[r]);else c(p+1),h(f,p++,n);return f.length=p,f}})},9363:(t,e,r)=>{"use strict";var i=r(7374),s=r(2156),n=r(3742),a=r(4932),o=r(4284).f,u=r(183),c=r(9550),h=r(7376),l=r(9447),f="Array Iterator",p=a.set,d=a.getterFor(f);t.exports=u(Array,"Array",(function(t,e){p(this,{type:f,target:i(t),index:0,kind:e})}),(function(){var t=d(this),e=t.target,r=t.index++;if(!e||r>=e.length)return t.target=null,c(void 0,!0);switch(t.kind){case"keys":return c(r,!1);case"values":return c(e[r],!1)}return c([r,e[r]],!1)}),"values");var m=n.Arguments=n.Array;if(s("keys"),s("values"),s("entries"),!h&&l&&"values"!==m.name)try{o(m,"name",{value:"values"})}catch(t){}},8537:()=>{},9721:(t,e,r)=>{"use strict";var i=r(1091),s=r(5582),n=r(6024),a=r(3930),o=r(1907),u=r(8828),c=r(2250),h=r(5594),l=r(3427),f=r(6656),p=r(9846),d=String,m=s("JSON","stringify"),v=o(/./.exec),g=o("".charAt),_=o("".charCodeAt),x=o("".replace),y=o(1..toString),b=/[\uD800-\uDFFF]/g,E=/^[\uD800-\uDBFF]$/,T=/^[\uDC00-\uDFFF]$/,R=!p||u((function(){var t=s("Symbol")("stringify detection");return"[null]"!==m([t])||"{}"!==m({a:t})||"{}"!==m(Object(t))})),w=u((function(){return'"\\udf06\\ud834"'!==m("\udf06\ud834")||'"\\udead"'!==m("\udead")})),S=function(t,e){var r=l(arguments),i=f(e);if(c(i)||void 0!==t&&!h(t))return r[1]=function(t,e){if(c(i)&&(e=a(i,this,d(t),e)),!h(e))return e},n(m,null,r)},A=function(t,e,r){var i=g(r,e-1),s=g(r,e+1);return v(E,t)&&!v(T,s)||v(T,t)&&!v(E,i)?"\\u"+y(_(t,0),16):t};m&&i({target:"JSON",stat:!0,arity:3,forced:R||w},{stringify:function(t,e,r){var i=l(arguments),s=n(R?S:m,null,i);return w&&"string"==typeof s?x(s,b,A):s}})},7024:(t,e,r)=>{"use strict";var i=r(5951);r(4840)(i.JSON,"JSON",!0)},8172:()=>{},6750:(t,e,r)=>{"use strict";var i=r(1091),s=r(9447),n=r(4284).f;i({target:"Object",stat:!0,forced:Object.defineProperty!==n,sham:!s},{defineProperty:n})},5264:(t,e,r)=>{"use strict";var i=r(1091),s=r(9846),n=r(8828),a=r(7170),o=r(9298);i({target:"Object",stat:!0,forced:!s||n((function(){a.f(1)}))},{getOwnPropertySymbols:function(t){var e=a.f;return e?e(o(t)):[]}})},3643:()=>{},5205:()=>{},1398:()=>{},1074:(t,e,r)=>{"use strict";var i=r(1091),s=r(1907),n=r(4849),a=RangeError,o=String.fromCharCode,u=String.fromCodePoint,c=s([].join);i({target:"String",stat:!0,arity:1,forced:!!u&&1!==u.length},{fromCodePoint:function(t){for(var e,r=[],i=arguments.length,s=0;i>s;){if(e=+arguments[s++],n(e,1114111)!==e)throw new a(e+" is not a valid code point");r[s]=e<65536?o(e):o(55296+((e-=65536)>>10),e%1024+56320)}return c(r,"")}})},7057:(t,e,r)=>{"use strict";var i=r(1470).charAt,s=r(160),n=r(4932),a=r(183),o=r(9550),u="String Iterator",c=n.set,h=n.getterFor(u);a(String,"String",(function(t){c(this,{type:u,string:s(t),index:0})}),(function(){var t,e=h(this),r=e.string,s=e.index;return s>=r.length?o(void 0,!0):(t=i(r,s),e.index+=t.length,o(t,!1))}))},929:(t,e,r)=>{"use strict";var i=r(1091),s=r(3930),n=r(1907),a=r(4239),o=r(2250),u=r(7136),c=r(2087),h=r(160),l=r(9367),f=r(663),p=r(7703),d=r(6264),m=r(7376),v=d("replace"),g=TypeError,_=n("".indexOf),x=n("".replace),y=n("".slice),b=Math.max;i({target:"String",proto:!0},{replaceAll:function(t,e){var r,i,n,d,E,T,R,w,S,A,C=a(this),L=0,O="";if(!u(t)){if((r=c(t))&&(i=h(a(f(t))),!~_(i,"g")))throw new g("`.replaceAll` does not allow non-global regexes");if(n=l(t,v))return s(n,t,C,e);if(m&&r)return x(h(C),t,e)}for(d=h(C),E=h(t),(T=o(e))||(e=h(e)),R=E.length,w=b(1,R),S=_(d,E);-1!==S;)A=T?h(e(E,S,d)):p(E,d,S,[],void 0,e),O+=y(d,L,S)+A,L=S+R,S=S+w>d.length?-1:_(d,E,S+w);return L<d.length&&(O+=y(d,L)),O}})},1995:()=>{},3997:(t,e,r)=>{"use strict";r(366)("asyncIterator")},3674:(t,e,r)=>{"use strict";var i=r(1091),s=r(5951),n=r(3930),a=r(1907),o=r(7376),u=r(9447),c=r(9846),h=r(8828),l=r(9724),f=r(8280),p=r(6624),d=r(7374),m=r(470),v=r(160),g=r(5817),_=r(8075),x=r(2875),y=r(4443),b=r(5407),E=r(7170),T=r(3846),R=r(4284),w=r(2220),S=r(2574),A=r(8055),C=r(9251),L=r(5816),O=r(2522),P=r(8530),M=r(6499),I=r(6264),k=r(560),U=r(366),B=r(3467),V=r(4840),D=r(4932),F=r(726).forEach,N=O("hidden"),G="Symbol",j="prototype",W=D.set,X=D.getterFor(G),H=Object[j],z=s.Symbol,Y=z&&z[j],K=s.RangeError,q=s.TypeError,$=s.QObject,Z=T.f,J=R.f,Q=b.f,tt=S.f,et=a([].push),rt=L("symbols"),it=L("op-symbols"),st=L("wks"),nt=!$||!$[j]||!$[j].findChild,at=function(t,e,r){var i=Z(H,e);i&&delete H[e],J(t,e,r),i&&t!==H&&J(H,e,i)},ot=u&&h((function(){return 7!==_(J({},"a",{get:function(){return J(this,"a",{value:7}).a}})).a}))?at:J,ut=function(t,e){var r=rt[t]=_(Y);return W(r,{type:G,tag:t,description:e}),u||(r.description=e),r},ct=function(t,e,r){t===H&&ct(it,e,r),p(t);var i=m(e);return p(r),l(rt,i)?(r.enumerable?(l(t,N)&&t[N][i]&&(t[N][i]=!1),r=_(r,{enumerable:g(0,!1)})):(l(t,N)||J(t,N,g(1,_(null))),t[N][i]=!0),ot(t,i,r)):J(t,i,r)},ht=function(t,e){p(t);var r=d(e),i=x(r).concat(dt(r));return F(i,(function(e){u&&!n(lt,r,e)||ct(t,e,r[e])})),t},lt=function(t){var e=m(t),r=n(tt,this,e);return!(this===H&&l(rt,e)&&!l(it,e))&&(!(r||!l(this,e)||!l(rt,e)||l(this,N)&&this[N][e])||r)},ft=function(t,e){var r=d(t),i=m(e);if(r!==H||!l(rt,i)||l(it,i)){var s=Z(r,i);return!s||!l(rt,i)||l(r,N)&&r[N][i]||(s.enumerable=!0),s}},pt=function(t){var e=Q(d(t)),r=[];return F(e,(function(t){l(rt,t)||l(P,t)||et(r,t)})),r},dt=function(t){var e=t===H,r=Q(e?it:d(t)),i=[];return F(r,(function(t){!l(rt,t)||e&&!l(H,t)||et(i,rt[t])})),i};c||(A(Y=(z=function(){if(f(Y,this))throw new q("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?v(arguments[0]):void 0,e=M(t),r=function(t){var i=void 0===this?s:this;i===H&&n(r,it,t),l(i,N)&&l(i[N],e)&&(i[N][e]=!1);var a=g(1,t);try{ot(i,e,a)}catch(t){if(!(t instanceof K))throw t;at(i,e,a)}};return u&&nt&&ot(H,e,{configurable:!0,set:r}),ut(e,t)})[j],"toString",(function(){return X(this).tag})),A(z,"withoutSetter",(function(t){return ut(M(t),t)})),S.f=lt,R.f=ct,w.f=ht,T.f=ft,y.f=b.f=pt,E.f=dt,k.f=function(t){return ut(I(t),t)},u&&(C(Y,"description",{configurable:!0,get:function(){return X(this).description}}),o||A(H,"propertyIsEnumerable",lt,{unsafe:!0}))),i({global:!0,constructor:!0,wrap:!0,forced:!c,sham:!c},{Symbol:z}),F(x(st),(function(t){U(t)})),i({target:G,stat:!0,forced:!c},{useSetter:function(){nt=!0},useSimple:function(){nt=!1}}),i({target:"Object",stat:!0,forced:!c,sham:!u},{create:function(t,e){return void 0===e?_(t):ht(_(t),e)},defineProperty:ct,defineProperties:ht,getOwnPropertyDescriptor:ft}),i({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:pt}),B(),V(z,G),P[N]=!0},5084:()=>{},3313:(t,e,r)=>{"use strict";var i=r(1091),s=r(5582),n=r(9724),a=r(160),o=r(5816),u=r(4411),c=o("string-to-symbol-registry"),h=o("symbol-to-string-registry");i({target:"Symbol",stat:!0,forced:!u},{for:function(t){var e=a(t);if(n(c,e))return c[e];var r=s("Symbol")(e);return c[e]=r,h[r]=e,r}})},2596:(t,e,r)=>{"use strict";r(366)("hasInstance")},5721:(t,e,r)=>{"use strict";r(366)("isConcatSpreadable")},4954:(t,e,r)=>{"use strict";r(366)("iterator")},4452:(t,e,r)=>{"use strict";r(3674),r(3313),r(751),r(9721),r(5264)},751:(t,e,r)=>{"use strict";var i=r(1091),s=r(9724),n=r(5594),a=r(4640),o=r(5816),u=r(4411),c=o("symbol-to-string-registry");i({target:"Symbol",stat:!0,forced:!u},{keyFor:function(t){if(!n(t))throw new TypeError(a(t)+" is not a symbol");if(s(c,t))return c[t]}})},3377:(t,e,r)=>{"use strict";r(366)("matchAll")},4123:(t,e,r)=>{"use strict";r(366)("match")},2230:(t,e,r)=>{"use strict";r(366)("replace")},5344:(t,e,r)=>{"use strict";r(366)("search")},1660:(t,e,r)=>{"use strict";r(366)("species")},4610:(t,e,r)=>{"use strict";r(366)("split")},3669:(t,e,r)=>{"use strict";var i=r(366),s=r(3467);i("toPrimitive"),s()},4810:(t,e,r)=>{"use strict";var i=r(5582),s=r(366),n=r(4840);s("toStringTag"),n(i("Symbol"),"Symbol")},3325:(t,e,r)=>{"use strict";r(366)("unscopables")},768:(t,e,r)=>{"use strict";var i=r(6264),s=r(4284).f,n=i("metadata"),a=Function.prototype;void 0===a[n]&&s(a,n,{value:null})},6038:(t,e,r)=>{"use strict";r(929)},8549:(t,e,r)=>{"use strict";r(366)("asyncDispose")},1697:(t,e,r)=>{"use strict";r(366)("customMatcher")},7152:(t,e,r)=>{"use strict";r(366)("dispose")},3939:(t,e,r)=>{"use strict";r(1091)({target:"Symbol",stat:!0},{isRegisteredSymbol:r(2595)})},3422:(t,e,r)=>{"use strict";r(1091)({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:r(2595)})},1785:(t,e,r)=>{"use strict";r(1091)({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:r(9197)})},36:(t,e,r)=>{"use strict";r(1091)({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:r(9197)})},8703:(t,e,r)=>{"use strict";r(366)("matcher")},6878:(t,e,r)=>{"use strict";r(366)("metadataKey")},1372:(t,e,r)=>{"use strict";r(366)("metadata")},4664:(t,e,r)=>{"use strict";r(366)("observable")},9671:(t,e,r)=>{"use strict";r(366)("patternMatch")},359:(t,e,r)=>{"use strict";r(366)("replaceAll")},2560:(t,e,r)=>{"use strict";r(9363);var i=r(9287),s=r(5951),n=r(4840),a=r(3742);for(var o in i)n(s[o],o),a[o]=a.Array},7105:(t,e,r)=>{"use strict";r(9363),r(1074);var i=r(1091),s=r(5951),n=r(2098),a=r(5582),o=r(3930),u=r(1907),c=r(9447),h=r(4791),l=r(8055),f=r(9251),p=r(2802),d=r(4840),m=r(7181),v=r(4932),g=r(9596),_=r(2250),x=r(9724),y=r(8311),b=r(3948),E=r(6624),T=r(6285),R=r(160),w=r(8075),S=r(5817),A=r(300),C=r(3448),L=r(9550),O=r(4787),P=r(6264),M=r(4321),I=P("iterator"),k="URLSearchParams",U=k+"Iterator",B=v.set,V=v.getterFor(k),D=v.getterFor(U),F=n("fetch"),N=n("Request"),G=n("Headers"),j=N&&N.prototype,W=G&&G.prototype,X=s.TypeError,H=s.encodeURIComponent,z=String.fromCharCode,Y=a("String","fromCodePoint"),K=parseInt,q=u("".charAt),$=u([].join),Z=u([].push),J=u("".replace),Q=u([].shift),tt=u([].splice),et=u("".split),rt=u("".slice),it=u(/./.exec),st=/\+/g,nt=/^[0-9a-f]+$/i,at=function(t,e){var r=rt(t,e,e+2);return it(nt,r)?K(r,16):NaN},ot=function(t){for(var e=0,r=128;r>0&&t&r;r>>=1)e++;return e},ut=function(t){var e=null;switch(t.length){case 1:e=t[0];break;case 2:e=(31&t[0])<<6|63&t[1];break;case 3:e=(15&t[0])<<12|(63&t[1])<<6|63&t[2];break;case 4:e=(7&t[0])<<18|(63&t[1])<<12|(63&t[2])<<6|63&t[3]}return e>1114111?null:e},ct=function(t){for(var e=(t=J(t,st," ")).length,r="",i=0;i<e;){var s=q(t,i);if("%"===s){if("%"===q(t,i+1)||i+3>e){r+="%",i++;continue}var n=at(t,i+1);if(n!=n){r+=s,i++;continue}i+=2;var a=ot(n);if(0===a)s=z(n);else{if(1===a||a>4){r+="�",i++;continue}for(var o=[n],u=1;u<a&&!(3+ ++i>e||"%"!==q(t,i));){var c=at(t,i+1);if(c!=c){i+=3;break}if(c>191||c<128)break;Z(o,c),i+=2,u++}if(o.length!==a){r+="�";continue}var h=ut(o);null===h?r+="�":s=Y(h)}}r+=s,i++}return r},ht=/[!'()~]|%20/g,lt={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ft=function(t){return lt[t]},pt=function(t){return J(H(t),ht,ft)},dt=m((function(t,e){B(this,{type:U,target:V(t).entries,index:0,kind:e})}),k,(function(){var t=D(this),e=t.target,r=t.index++;if(!e||r>=e.length)return t.target=null,L(void 0,!0);var i=e[r];switch(t.kind){case"keys":return L(i.key,!1);case"values":return L(i.value,!1)}return L([i.key,i.value],!1)}),!0),mt=function(t){this.entries=[],this.url=null,void 0!==t&&(T(t)?this.parseObject(t):this.parseQuery("string"==typeof t?"?"===q(t,0)?rt(t,1):t:R(t)))};mt.prototype={type:k,bindURL:function(t){this.url=t,this.update()},parseObject:function(t){var e,r,i,s,n,a,u,c=this.entries,h=C(t);if(h)for(r=(e=A(t,h)).next;!(i=o(r,e)).done;){if(n=(s=A(E(i.value))).next,(a=o(n,s)).done||(u=o(n,s)).done||!o(n,s).done)throw new X("Expected sequence with length 2");Z(c,{key:R(a.value),value:R(u.value)})}else for(var l in t)x(t,l)&&Z(c,{key:l,value:R(t[l])})},parseQuery:function(t){if(t)for(var e,r,i=this.entries,s=et(t,"&"),n=0;n<s.length;)(e=s[n++]).length&&(r=et(e,"="),Z(i,{key:ct(Q(r)),value:ct($(r,"="))}))},serialize:function(){for(var t,e=this.entries,r=[],i=0;i<e.length;)t=e[i++],Z(r,pt(t.key)+"="+pt(t.value));return $(r,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var vt=function(){g(this,gt);var t=B(this,new mt(arguments.length>0?arguments[0]:void 0));c||(this.size=t.entries.length)},gt=vt.prototype;if(p(gt,{append:function(t,e){var r=V(this);O(arguments.length,2),Z(r.entries,{key:R(t),value:R(e)}),c||this.length++,r.updateURL()},delete:function(t){for(var e=V(this),r=O(arguments.length,1),i=e.entries,s=R(t),n=r<2?void 0:arguments[1],a=void 0===n?n:R(n),o=0;o<i.length;){var u=i[o];if(u.key!==s||void 0!==a&&u.value!==a)o++;else if(tt(i,o,1),void 0!==a)break}c||(this.size=i.length),e.updateURL()},get:function(t){var e=V(this).entries;O(arguments.length,1);for(var r=R(t),i=0;i<e.length;i++)if(e[i].key===r)return e[i].value;return null},getAll:function(t){var e=V(this).entries;O(arguments.length,1);for(var r=R(t),i=[],s=0;s<e.length;s++)e[s].key===r&&Z(i,e[s].value);return i},has:function(t){for(var e=V(this).entries,r=O(arguments.length,1),i=R(t),s=r<2?void 0:arguments[1],n=void 0===s?s:R(s),a=0;a<e.length;){var o=e[a++];if(o.key===i&&(void 0===n||o.value===n))return!0}return!1},set:function(t,e){var r=V(this);O(arguments.length,1);for(var i,s=r.entries,n=!1,a=R(t),o=R(e),u=0;u<s.length;u++)(i=s[u]).key===a&&(n?tt(s,u--,1):(n=!0,i.value=o));n||Z(s,{key:a,value:o}),c||(this.size=s.length),r.updateURL()},sort:function(){var t=V(this);M(t.entries,(function(t,e){return t.key>e.key?1:-1})),t.updateURL()},forEach:function(t){for(var e,r=V(this).entries,i=y(t,arguments.length>1?arguments[1]:void 0),s=0;s<r.length;)i((e=r[s++]).value,e.key,this)},keys:function(){return new dt(this,"keys")},values:function(){return new dt(this,"values")},entries:function(){return new dt(this,"entries")}},{enumerable:!0}),l(gt,I,gt.entries,{name:"entries"}),l(gt,"toString",(function(){return V(this).serialize()}),{enumerable:!0}),c&&f(gt,"size",{get:function(){return V(this).entries.length},configurable:!0,enumerable:!0}),d(vt,k),i({global:!0,constructor:!0,forced:!h},{URLSearchParams:vt}),!h&&_(G)){var _t=u(W.has),xt=u(W.set),yt=function(t){if(T(t)){var e,r=t.body;if(b(r)===k)return e=t.headers?new G(t.headers):new G,_t(e,"content-type")||xt(e,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),w(t,{body:S(0,R(r)),headers:S(0,e)})}return t};if(_(F)&&i({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(t){return F(t,arguments.length>1?yt(arguments[1]):{})}}),_(N)){var bt=function(t){return g(this,j),new N(t,arguments.length>1?yt(arguments[1]):{})};j.constructor=bt,bt.prototype=j,i({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:bt})}}t.exports={URLSearchParams:vt,getState:V}},5042:()=>{},7649:()=>{},6299:(t,e,r)=>{"use strict";r(7105)},3604:()=>{},8669:(t,e,r)=>{"use strict";var i=r(1091),s=r(5582),n=r(8828),a=r(4787),o=r(160),u=r(4791),c=s("URL"),h=u&&n((function(){c.canParse()})),l=n((function(){return 1!==c.canParse.length}));i({target:"URL",stat:!0,forced:!h||l},{canParse:function(t){var e=a(arguments.length,1),r=o(t),i=e<2||void 0===arguments[1]?void 0:o(arguments[1]);try{return!!new c(r,i)}catch(t){return!1}}})},6909:(t,e,r)=>{"use strict";r(7057);var i,s=r(1091),n=r(9447),a=r(4791),o=r(5951),u=r(8311),c=r(1907),h=r(8055),l=r(9251),f=r(9596),p=r(9724),d=r(9538),m=r(1229),v=r(3427),g=r(1470).codeAt,_=r(9156),x=r(160),y=r(4840),b=r(4787),E=r(7105),T=r(4932),R=T.set,w=T.getterFor("URL"),S=E.URLSearchParams,A=E.getState,C=o.URL,L=o.TypeError,O=o.parseInt,P=Math.floor,M=Math.pow,I=c("".charAt),k=c(/./.exec),U=c([].join),B=c(1..toString),V=c([].pop),D=c([].push),F=c("".replace),N=c([].shift),G=c("".split),j=c("".slice),W=c("".toLowerCase),X=c([].unshift),H="Invalid scheme",z="Invalid host",Y="Invalid port",K=/[a-z]/i,q=/[\d+-.a-z]/i,$=/\d/,Z=/^0x/i,J=/^[0-7]+$/,Q=/^\d+$/,tt=/^[\da-f]+$/i,et=/[\0\t\n\r #%/:<>?@[\\\]^|]/,rt=/[\0\t\n\r #/:<>?@[\\\]^|]/,it=/^[\u0000-\u0020]+/,st=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,nt=/[\t\n\r]/g,at=function(t){var e,r,i,s;if("number"==typeof t){for(e=[],r=0;r<4;r++)X(e,t%256),t=P(t/256);return U(e,".")}if("object"==typeof t){for(e="",i=function(t){for(var e=null,r=1,i=null,s=0,n=0;n<8;n++)0!==t[n]?(s>r&&(e=i,r=s),i=null,s=0):(null===i&&(i=n),++s);return s>r?i:e}(t),r=0;r<8;r++)s&&0===t[r]||(s&&(s=!1),i===r?(e+=r?":":"::",s=!0):(e+=B(t[r],16),r<7&&(e+=":")));return"["+e+"]"}return t},ot={},ut=d({},ot,{" ":1,'"':1,"<":1,">":1,"`":1}),ct=d({},ut,{"#":1,"?":1,"{":1,"}":1}),ht=d({},ct,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),lt=function(t,e){var r=g(t,0);return r>32&&r<127&&!p(e,t)?t:encodeURIComponent(t)},ft={ftp:21,file:null,http:80,https:443,ws:80,wss:443},pt=function(t,e){var r;return 2===t.length&&k(K,I(t,0))&&(":"===(r=I(t,1))||!e&&"|"===r)},dt=function(t){var e;return t.length>1&&pt(j(t,0,2))&&(2===t.length||"/"===(e=I(t,2))||"\\"===e||"?"===e||"#"===e)},mt=function(t){return"."===t||"%2e"===W(t)},vt={},gt={},_t={},xt={},yt={},bt={},Et={},Tt={},Rt={},wt={},St={},At={},Ct={},Lt={},Ot={},Pt={},Mt={},It={},kt={},Ut={},Bt={},Vt=function(t,e,r){var i,s,n,a=x(t);if(e){if(s=this.parse(a))throw new L(s);this.searchParams=null}else{if(void 0!==r&&(i=new Vt(r,!0)),s=this.parse(a,null,i))throw new L(s);(n=A(new S)).bindURL(this),this.searchParams=n}};Vt.prototype={type:"URL",parse:function(t,e,r){var s,n,a,o,u,c=this,h=e||vt,l=0,f="",d=!1,g=!1,_=!1;for(t=x(t),e||(c.scheme="",c.username="",c.password="",c.host=null,c.port=null,c.path=[],c.query=null,c.fragment=null,c.cannotBeABaseURL=!1,t=F(t,it,""),t=F(t,st,"$1")),t=F(t,nt,""),s=m(t);l<=s.length;){switch(n=s[l],h){case vt:if(!n||!k(K,n)){if(e)return H;h=_t;continue}f+=W(n),h=gt;break;case gt:if(n&&(k(q,n)||"+"===n||"-"===n||"."===n))f+=W(n);else{if(":"!==n){if(e)return H;f="",h=_t,l=0;continue}if(e&&(c.isSpecial()!==p(ft,f)||"file"===f&&(c.includesCredentials()||null!==c.port)||"file"===c.scheme&&!c.host))return;if(c.scheme=f,e)return void(c.isSpecial()&&ft[c.scheme]===c.port&&(c.port=null));f="","file"===c.scheme?h=Lt:c.isSpecial()&&r&&r.scheme===c.scheme?h=xt:c.isSpecial()?h=Tt:"/"===s[l+1]?(h=yt,l++):(c.cannotBeABaseURL=!0,D(c.path,""),h=kt)}break;case _t:if(!r||r.cannotBeABaseURL&&"#"!==n)return H;if(r.cannotBeABaseURL&&"#"===n){c.scheme=r.scheme,c.path=v(r.path),c.query=r.query,c.fragment="",c.cannotBeABaseURL=!0,h=Bt;break}h="file"===r.scheme?Lt:bt;continue;case xt:if("/"!==n||"/"!==s[l+1]){h=bt;continue}h=Rt,l++;break;case yt:if("/"===n){h=wt;break}h=It;continue;case bt:if(c.scheme=r.scheme,n===i)c.username=r.username,c.password=r.password,c.host=r.host,c.port=r.port,c.path=v(r.path),c.query=r.query;else if("/"===n||"\\"===n&&c.isSpecial())h=Et;else if("?"===n)c.username=r.username,c.password=r.password,c.host=r.host,c.port=r.port,c.path=v(r.path),c.query="",h=Ut;else{if("#"!==n){c.username=r.username,c.password=r.password,c.host=r.host,c.port=r.port,c.path=v(r.path),c.path.length--,h=It;continue}c.username=r.username,c.password=r.password,c.host=r.host,c.port=r.port,c.path=v(r.path),c.query=r.query,c.fragment="",h=Bt}break;case Et:if(!c.isSpecial()||"/"!==n&&"\\"!==n){if("/"!==n){c.username=r.username,c.password=r.password,c.host=r.host,c.port=r.port,h=It;continue}h=wt}else h=Rt;break;case Tt:if(h=Rt,"/"!==n||"/"!==I(f,l+1))continue;l++;break;case Rt:if("/"!==n&&"\\"!==n){h=wt;continue}break;case wt:if("@"===n){d&&(f="%40"+f),d=!0,a=m(f);for(var y=0;y<a.length;y++){var b=a[y];if(":"!==b||_){var E=lt(b,ht);_?c.password+=E:c.username+=E}else _=!0}f=""}else if(n===i||"/"===n||"?"===n||"#"===n||"\\"===n&&c.isSpecial()){if(d&&""===f)return"Invalid authority";l-=m(f).length+1,f="",h=St}else f+=n;break;case St:case At:if(e&&"file"===c.scheme){h=Pt;continue}if(":"!==n||g){if(n===i||"/"===n||"?"===n||"#"===n||"\\"===n&&c.isSpecial()){if(c.isSpecial()&&""===f)return z;if(e&&""===f&&(c.includesCredentials()||null!==c.port))return;if(o=c.parseHost(f))return o;if(f="",h=Mt,e)return;continue}"["===n?g=!0:"]"===n&&(g=!1),f+=n}else{if(""===f)return z;if(o=c.parseHost(f))return o;if(f="",h=Ct,e===At)return}break;case Ct:if(!k($,n)){if(n===i||"/"===n||"?"===n||"#"===n||"\\"===n&&c.isSpecial()||e){if(""!==f){var T=O(f,10);if(T>65535)return Y;c.port=c.isSpecial()&&T===ft[c.scheme]?null:T,f=""}if(e)return;h=Mt;continue}return Y}f+=n;break;case Lt:if(c.scheme="file","/"===n||"\\"===n)h=Ot;else{if(!r||"file"!==r.scheme){h=It;continue}switch(n){case i:c.host=r.host,c.path=v(r.path),c.query=r.query;break;case"?":c.host=r.host,c.path=v(r.path),c.query="",h=Ut;break;case"#":c.host=r.host,c.path=v(r.path),c.query=r.query,c.fragment="",h=Bt;break;default:dt(U(v(s,l),""))||(c.host=r.host,c.path=v(r.path),c.shortenPath()),h=It;continue}}break;case Ot:if("/"===n||"\\"===n){h=Pt;break}r&&"file"===r.scheme&&!dt(U(v(s,l),""))&&(pt(r.path[0],!0)?D(c.path,r.path[0]):c.host=r.host),h=It;continue;case Pt:if(n===i||"/"===n||"\\"===n||"?"===n||"#"===n){if(!e&&pt(f))h=It;else if(""===f){if(c.host="",e)return;h=Mt}else{if(o=c.parseHost(f))return o;if("localhost"===c.host&&(c.host=""),e)return;f="",h=Mt}continue}f+=n;break;case Mt:if(c.isSpecial()){if(h=It,"/"!==n&&"\\"!==n)continue}else if(e||"?"!==n)if(e||"#"!==n){if(n!==i&&(h=It,"/"!==n))continue}else c.fragment="",h=Bt;else c.query="",h=Ut;break;case It:if(n===i||"/"===n||"\\"===n&&c.isSpecial()||!e&&("?"===n||"#"===n)){if(".."===(u=W(u=f))||"%2e."===u||".%2e"===u||"%2e%2e"===u?(c.shortenPath(),"/"===n||"\\"===n&&c.isSpecial()||D(c.path,"")):mt(f)?"/"===n||"\\"===n&&c.isSpecial()||D(c.path,""):("file"===c.scheme&&!c.path.length&&pt(f)&&(c.host&&(c.host=""),f=I(f,0)+":"),D(c.path,f)),f="","file"===c.scheme&&(n===i||"?"===n||"#"===n))for(;c.path.length>1&&""===c.path[0];)N(c.path);"?"===n?(c.query="",h=Ut):"#"===n&&(c.fragment="",h=Bt)}else f+=lt(n,ct);break;case kt:"?"===n?(c.query="",h=Ut):"#"===n?(c.fragment="",h=Bt):n!==i&&(c.path[0]+=lt(n,ot));break;case Ut:e||"#"!==n?n!==i&&("'"===n&&c.isSpecial()?c.query+="%27":c.query+="#"===n?"%23":lt(n,ot)):(c.fragment="",h=Bt);break;case Bt:n!==i&&(c.fragment+=lt(n,ut))}l++}},parseHost:function(t){var e,r,i;if("["===I(t,0)){if("]"!==I(t,t.length-1))return z;if(e=function(t){var e,r,i,s,n,a,o,u=[0,0,0,0,0,0,0,0],c=0,h=null,l=0,f=function(){return I(t,l)};if(":"===f()){if(":"!==I(t,1))return;l+=2,h=++c}for(;f();){if(8===c)return;if(":"!==f()){for(e=r=0;r<4&&k(tt,f());)e=16*e+O(f(),16),l++,r++;if("."===f()){if(0===r)return;if(l-=r,c>6)return;for(i=0;f();){if(s=null,i>0){if(!("."===f()&&i<4))return;l++}if(!k($,f()))return;for(;k($,f());){if(n=O(f(),10),null===s)s=n;else{if(0===s)return;s=10*s+n}if(s>255)return;l++}u[c]=256*u[c]+s,2!=++i&&4!==i||c++}if(4!==i)return;break}if(":"===f()){if(l++,!f())return}else if(f())return;u[c++]=e}else{if(null!==h)return;l++,h=++c}}if(null!==h)for(a=c-h,c=7;0!==c&&a>0;)o=u[c],u[c--]=u[h+a-1],u[h+--a]=o;else if(8!==c)return;return u}(j(t,1,-1)),!e)return z;this.host=e}else if(this.isSpecial()){if(t=_(t),k(et,t))return z;if(e=function(t){var e,r,i,s,n,a,o,u=G(t,".");if(u.length&&""===u[u.length-1]&&u.length--,(e=u.length)>4)return t;for(r=[],i=0;i<e;i++){if(""===(s=u[i]))return t;if(n=10,s.length>1&&"0"===I(s,0)&&(n=k(Z,s)?16:8,s=j(s,8===n?1:2)),""===s)a=0;else{if(!k(10===n?Q:8===n?J:tt,s))return t;a=O(s,n)}D(r,a)}for(i=0;i<e;i++)if(a=r[i],i===e-1){if(a>=M(256,5-e))return null}else if(a>255)return null;for(o=V(r),i=0;i<r.length;i++)o+=r[i]*M(256,3-i);return o}(t),null===e)return z;this.host=e}else{if(k(rt,t))return z;for(e="",r=m(t),i=0;i<r.length;i++)e+=lt(r[i],ot);this.host=e}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"===this.scheme},includesCredentials:function(){return""!==this.username||""!==this.password},isSpecial:function(){return p(ft,this.scheme)},shortenPath:function(){var t=this.path,e=t.length;!e||"file"===this.scheme&&1===e&&pt(t[0],!0)||t.length--},serialize:function(){var t=this,e=t.scheme,r=t.username,i=t.password,s=t.host,n=t.port,a=t.path,o=t.query,u=t.fragment,c=e+":";return null!==s?(c+="//",t.includesCredentials()&&(c+=r+(i?":"+i:"")+"@"),c+=at(s),null!==n&&(c+=":"+n)):"file"===e&&(c+="//"),c+=t.cannotBeABaseURL?a[0]:a.length?"/"+U(a,"/"):"",null!==o&&(c+="?"+o),null!==u&&(c+="#"+u),c},setHref:function(t){var e=this.parse(t);if(e)throw new L(e);this.searchParams.update()},getOrigin:function(){var t=this.scheme,e=this.port;if("blob"===t)try{return new Dt(t.path[0]).origin}catch(t){return"null"}return"file"!==t&&this.isSpecial()?t+"://"+at(this.host)+(null!==e?":"+e:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(t){this.parse(x(t)+":",vt)},getUsername:function(){return this.username},setUsername:function(t){var e=m(x(t));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var r=0;r<e.length;r++)this.username+=lt(e[r],ht)}},getPassword:function(){return this.password},setPassword:function(t){var e=m(x(t));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var r=0;r<e.length;r++)this.password+=lt(e[r],ht)}},getHost:function(){var t=this.host,e=this.port;return null===t?"":null===e?at(t):at(t)+":"+e},setHost:function(t){this.cannotBeABaseURL||this.parse(t,St)},getHostname:function(){var t=this.host;return null===t?"":at(t)},setHostname:function(t){this.cannotBeABaseURL||this.parse(t,At)},getPort:function(){var t=this.port;return null===t?"":x(t)},setPort:function(t){this.cannotHaveUsernamePasswordPort()||(""===(t=x(t))?this.port=null:this.parse(t,Ct))},getPathname:function(){var t=this.path;return this.cannotBeABaseURL?t[0]:t.length?"/"+U(t,"/"):""},setPathname:function(t){this.cannotBeABaseURL||(this.path=[],this.parse(t,Mt))},getSearch:function(){var t=this.query;return t?"?"+t:""},setSearch:function(t){""===(t=x(t))?this.query=null:("?"===I(t,0)&&(t=j(t,1)),this.query="",this.parse(t,Ut)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var t=this.fragment;return t?"#"+t:""},setHash:function(t){""!==(t=x(t))?("#"===I(t,0)&&(t=j(t,1)),this.fragment="",this.parse(t,Bt)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Dt=function(t){var e=f(this,Ft),r=b(arguments.length,1)>1?arguments[1]:void 0,i=R(e,new Vt(t,!1,r));n||(e.href=i.serialize(),e.origin=i.getOrigin(),e.protocol=i.getProtocol(),e.username=i.getUsername(),e.password=i.getPassword(),e.host=i.getHost(),e.hostname=i.getHostname(),e.port=i.getPort(),e.pathname=i.getPathname(),e.search=i.getSearch(),e.searchParams=i.getSearchParams(),e.hash=i.getHash())},Ft=Dt.prototype,Nt=function(t,e){return{get:function(){return w(this)[t]()},set:e&&function(t){return w(this)[e](t)},configurable:!0,enumerable:!0}};if(n&&(l(Ft,"href",Nt("serialize","setHref")),l(Ft,"origin",Nt("getOrigin")),l(Ft,"protocol",Nt("getProtocol","setProtocol")),l(Ft,"username",Nt("getUsername","setUsername")),l(Ft,"password",Nt("getPassword","setPassword")),l(Ft,"host",Nt("getHost","setHost")),l(Ft,"hostname",Nt("getHostname","setHostname")),l(Ft,"port",Nt("getPort","setPort")),l(Ft,"pathname",Nt("getPathname","setPathname")),l(Ft,"search",Nt("getSearch","setSearch")),l(Ft,"searchParams",Nt("getSearchParams")),l(Ft,"hash",Nt("getHash","setHash"))),h(Ft,"toJSON",(function(){return w(this).serialize()}),{enumerable:!0}),h(Ft,"toString",(function(){return w(this).serialize()}),{enumerable:!0}),C){var Gt=C.createObjectURL,jt=C.revokeObjectURL;Gt&&h(Dt,"createObjectURL",u(Gt,C)),jt&&h(Dt,"revokeObjectURL",u(jt,C))}y(Dt,"URL"),s({global:!0,constructor:!0,forced:!a,sham:!n},{URL:Dt})},3487:(t,e,r)=>{"use strict";r(6909)},8670:(t,e,r)=>{"use strict";var i=r(1091),s=r(5582),n=r(4787),a=r(160),o=r(4791),u=s("URL");i({target:"URL",stat:!0,forced:!o},{parse:function(t){var e=n(arguments.length,1),r=a(t),i=e<2||void 0===arguments[1]?void 0:a(arguments[1]);try{return new u(r,i)}catch(t){return null}}})},4783:()=>{},2222:(t,e,r)=>{"use strict";var i=r(6823);t.exports=i},8251:(t,e,r)=>{"use strict";var i=r(1926);t.exports=i},4139:(t,e,r)=>{"use strict";var i=r(3842);r(2560),t.exports=i},7045:(t,e,r)=>{"use strict";var i=r(1730);r(2560),t.exports=i},70:(t,e,r)=>{"use strict";var i=r(1661);t.exports=i},9792:(t,e,r)=>{"use strict";var i=r(6908);t.exports=i},9076:(t,e,r)=>{"use strict";r(6299),r(5042),r(7649),r(3604);var i=r(2046);t.exports=i.URLSearchParams},6908:(t,e,r)=>{"use strict";r(9076),r(3487),r(8669),r(8670),r(4783);var i=r(2046);t.exports=i.URL}},e={};function r(i){var s=e[i];if(void 0!==s)return s.exports;var n=e[i]={exports:{}};return t[i].call(n.exports,n,n.exports,r),n.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var i in e)r.o(e,i)&&!r.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var i={};return(()=>{"use strict";r.d(i,{default:()=>j});var t,e=r(6984),s=r.n(e);!function(t){t.VB_INIT_SUCCESS="VB_INIT_SUCCESS",t.VB_INIT_FAILED="VB_INIT_FAILED",t.VB_GENERATED_FRAME="VB_GENERATED_FRAME",t.VB_SEND_FRAME="VB_SEND_FRAME",t.VB_UPDATE_BG="VB_UPDATE_BG",t.VB_PREDICT_DONE="VB_PREDICT_DONE",t.VB_MODEL_READY="VB_MODEL_READY",t.VB_FREE_MEMORY="VB_FREE_MEMORY",t.VB_VIDEO_FORMAT_UNSUPPORTED="VB_VIDEO_FORMAT_UNSUPPORTED",t.VB_WORKER_INIT="VB_WORKER_INIT",t.VB_WORKER_ERROR="VB_WORKER_ERROR",t.VB_RENDER_CANVAS="VB_RENDER_CANVAS",t.VB_RENDER_FRAME="VB_RENDER_FRAME",t.VB_START="VB_START",t.VB_REQUEST_FRAME="VB_REQUEST_FRAME",t.VB_TOGGLE_VB="VB_TOGGLE_VB",t.VB_STOP="VB_STOP",t.VB_MIRROR="VB_MIRROR",t.VB_GENERATE_STREAM="VB_GENERATE_STREAM",t.VB_STOP_STREAM="VB_STOP_STREAM",t.VB_CHANGE_STREAM_CANVAS_SIZE="VB_CHANGE_STREAM_CANVAS_SIZE",t.VB_GENERATE_FIRST_FRAME="VB_GENERATE_FIRST_FRAME",t.VB_UPDATE_STATS="VB_UPDATE_STATS",t.VB_UPDATE_NEED_FRAME="VB_UPDATE_NEED_FRAME",t.VB_UPDATE_FRAME_RATE="VB_UPDATE_FRAME_RATE",t.VB_RESOLUTION_CHANGE="VB_RESOLUTION_CHANGE"}(t||(t={}));let n=function(){};n.prototype={threads:async()=>(async t=>{if(!WebAssembly.validate(t))return!1;try{return(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),!0}catch(t){return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])),simd:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]))};const a=new n,o="UNIFIED_VB_STOP";var u=r(4997),c=r(2321),h=r(2231);function l(t){return l="function"==typeof c&&"symbol"==typeof h?function(t){return typeof t}:function(t){return t&&"function"==typeof c&&t.constructor===c&&t!==c.prototype?"symbol":typeof t},l(t)}var f=r(9280);function p(t,e,r){return(e=function(t){var e=function(t){if("object"!=l(t)||!t)return t;var e=t[f];if(void 0!==e){var r=e.call(t,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==l(e)?e:e+""}(e))in t?u(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const d=0,m=3,v=(new Map([["useinbandfec",1],["maxaveragebitrate",48e3],["maxplaybackrate",24e3],["sprop-maxcapturerate",24e3],["sprop-stereo",null],["stereo",null]]),new Map([["useinbandfec",null],["maxaveragebitrate",96e3],["maxplaybackrate",48e3],["sprop-maxcapturerate",48e3],["sprop-stereo",1],["stereo",1]]),new Map([["useinbandfec",null],["maxaveragebitrate",96e3],["maxplaybackrate",48e3],["sprop-maxcapturerate",48e3],["sprop-stereo",1],["stereo",1]]),new Map([["useinbandfec",null],["maxaveragebitrate",128e3],["maxplaybackrate",48e3],["sprop-maxcapturerate",48e3],["sprop-stereo",1],["stereo",1]]),new Map([["useinbandfec",null],["maxaveragebitrate",128e3],["maxplaybackrate",48e3],["sprop-maxcapturerate",48e3],["sprop-stereo",1],["stereo",1]]),new Map([["useinbandfec",null],["maxaveragebitrate",96e3],["maxplaybackrate",48e3],["sprop-maxcapturerate",48e3]]),new Map([["useinbandfec",1],["maxaveragebitrate",64e3],["maxplaybackrate",24e3],["sprop-maxcapturerate",24e3],["sprop-stereo",null],["stereo",null]]),new Map([["stereo",1]]),"MEDIASDK_CACHE_INFO"),g=new class{constructor(){this._highFrequencyLogs={},this.fixVersion="",this.cacheLogStack=[],this.isFlushing=!1}setInstance(t,e){this._instance=t,this.fixVersion=e}getMessageFromErrorOrEvent(t,e){let r=t;return e instanceof ErrorEvent?(e.filename&&(r+=" File: ".concat(e.filename)),(e.lineno||e.colno)&&(r+=" Line: ".concat(e.lineno,":").concat(e.colno)),e.message&&(r+=" Message: ".concat(e.message)),e.error&&(r+="\nStack: ".concat(e.error.stack))):e instanceof Error?(e.fileName&&(r+=" File: ".concat(e.fileName)),(e.lineNumber||e.columnNumber)&&(r+=" Line: ".concat(e.lineNumber,":").concat(e.columnNumber)),e.message&&(r+=" Message: ".concat(e.message)),e.stack&&(r+=" Stack: ".concat(e.stack)),e.name&&(r+=" Name: ".concat(e.name)),e.constraint&&(r+=" Constraint: ".concat(e.constraint))):e instanceof CloseEvent?(e.code&&(r+=" Code: ".concat(e.code)),e.reason&&(r+=" Reason: ".concat(e.reason)),r+=" wasClean: ".concat(e.wasClean)):e instanceof DOMException?(e.message&&(r+=" Message: ".concat(e.message)),e.name&&(r+=" Name: ".concat(e.name))):r+=e?e.toString():"",r}_addCacheLog(t,e){this.cacheLogStack.length<100&&this.cacheLogStack.push({type:t,message:e})}flushCacheLog(){if(this._instance&&this.cacheLogStack.length>0&&!this.isFlushing){this.isFlushing=!0;let t="";this.cacheLogStack.forEach((e=>{let{type:r,message:{message:i="",tags:s=[]}}=e;const n=i?"".concat(s.join("|"),":").concat(i).concat("|----|"):"";switch(r){case"log":this._log(i,[...s,v]);break;case"warn":case"error":case"severityerror":case"directReport":t+=n}})),t&&this._directReport(t,[v]),this.cacheLogStack=[],this.isFlushing=!1}}log(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this._instance?(this.flushCacheLog(),this._log(t,e)):this._addCacheLog("log",{message:t,tags:e})}warn(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];t=this.getMessageFromErrorOrEvent(t,e),this._instance?(this.flushCacheLog(),this._warn(t,r)):this._addCacheLog("warn",{message:t,tags:r})}error(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];var i;t=this.getMessageFromErrorOrEvent(t,e),this._highFrequencyLogs[t]?this._highFrequencyLogs[t]+=1:this._highFrequencyLogs[t]=1,!((i=this._highFrequencyLogs[t])&i-1)&&(this._instance?(this.flushCacheLog(),this._error(t,r)):this._addCacheLog("error",{message:t,tags:r}))}severityerror(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this._instance?(this.flushCacheLog(),this._severityerror(JSON.stringify(t),e)):this._addCacheLog("severityerror",{message:JSON.stringify(t),tags:e})}directReport(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["MEDIASDK_INFO"];var r;this._instance?(this.flushCacheLog(),null===(r=this._directReport)||void 0===r||r.call(this,t,e)):this._addCacheLog("directReport",{message:t,tags:e})}_log(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this._instance&&this._instance.log(t,e)}_warn(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this._instance&&this._instance.warn(t,e)}_error(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this._instance&&this._instance.error(t,[this.fixVersion,...e])}_severityerror(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this._instance&&this._instance.error(t,e)}_directReport(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var r,i;this._instance&&(null===(r=(i=this._instance).directReport)||void 0===r||r.call(i,{msg:t},e))}clearHighFrequencyLogs(){this._highFrequencyLogs={}}};var _=r(7201),x=r.n(_);new Error;const y=new Map;function b(t){var e;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"|";return t?x()(e=t.toString()).call(e,/[,，]/g,r):""}const E="function"!=typeof importScripts;function T(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;E?g.error(t,e):function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var r,i;if(e instanceof Error||e instanceof ErrorEvent){const s=e;t+=" Code: "+(null==s?void 0:s.code)+" Message: "+(null==e?void 0:e.message)+" Stack: "+(null!==(i=null===(r=null==s?void 0:s.error)||void 0===r?void 0:r.stack)&&void 0!==i?i:null==s?void 0:s.stack),e=null}postMessage({status:61,errorMessage:t,errorEvent:e})}(t,e)}function R(t){E?function(t,e){var r,i;if(!function(t){const e=performance.now();return(!y.has(t)||e-y.get(t)>5e3)&&(y.set(t,e),!0)}(t))return;let s;try{s=b("object"==typeof e?JSON.stringify(e):e)}catch(t){s=b(e)}null===(r=null)||void 0===r||r("NEM-".concat(t,"-").concat(s)),g.error("NotifyUIError,event=".concat(t,",data=").concat(s)),null===(i=null)||void 0===i||i(t,e)}(-51,t):postMessage({status:-27,where:t})}function w(t){postMessage({status:61,errorMessage:t,level:"low"})}const S=["","MOZ_","OP_","WEBKIT_"];function A(t,e){for(var r=0;r<S.length;++r){var i=S[r]+e,s=t.getExtension(i);if(s)return s}}new Map,new class{constructor(){this.ssrcInfoMap=new Map,this.timer=null}updateSSRCInfo(t,e){this.ssrcInfoMap.has(t)||this.ssrcInfoMap.set(t,{firstTime:0,lastTime:0,frames:0,fps:0}),this._calculateFPS(t,e),this._removeZeroFPS()}_calculateFPS(t,e){const r=this.ssrcInfoMap.get(t);if(0===r.frames?r.firstTime=e:r.lastTime=e,r.frames+=1,r.frames>2&&r.frames%5==0&&r.lastTime-r.firstTime>=1e3){const e=Math.floor(1e3/((r.lastTime-r.firstTime)/(r.frames-1)));r.fps!==e&&(this._notifyFPS(t,e),r.fps=e),r.firstTime=r.lastTime,r.frames=1}}_removeZeroFPS(){let t=Date.now();this.ssrcInfoMap.forEach(((e,r)=>{const i=this.ssrcInfoMap.get(r);i&&i.lastTime&&t-i.lastTime>2e3&&(this.ssrcInfoMap.delete(r),this._notifyFPS(r,0))}))}_notifyFPS(t,e){postMessage({status:66.6,data:{ssrc:t,fps:e}})}_checkIfNewFrameComing(){this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout((()=>{this._removeZeroFPS(),this.timer=null}),2500)}},new class{constructor(){this.ssrcInfoMap=new Map,this.timer=null}updateSSRCInfo(t,e){this.ssrcInfoMap.has(t)||this.ssrcInfoMap.set(t,{timeList:[],lastTime:0,fps:0}),this._calculateFPS(t,e),this._removeZeroFPS(),this._checkIfNewFrameComing()}_calculateFPS(t,e){const r=this.ssrcInfoMap.get(t);if(r.timeList.push(e),r.lastTime=e,r.timeList.length>2){const e=r.timeList[0],i=r.timeList[r.timeList.length-1];if(i-e>=1e3){const s=Math.floor(1e3/((i-e)/(r.timeList.length-1)));r.fps!==s&&(this._notifyFPS(t,s),r.fps=s),r.timeList=[]}}r.timeList.length>30&&(r.timeList=r.timeList.slice(r.timeList.length-30))}_removeZeroFPS(){this.ssrcInfoMap.forEach(((t,e)=>{const r=this.ssrcInfoMap.get(e);r&&Date.now()-r.lastTime>2e3&&(this.ssrcInfoMap.delete(e),this._notifyFPS(e,0))}))}_notifyFPS(t,e){postMessage({status:66.6,data:{ssrc:t,fps:e}})}_checkIfNewFrameComing(){this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout((()=>{this._removeZeroFPS(),this.timer=null}),2500)}};const C=.005;function L(t,e){const r=Math.pow(10,e);return Math.floor(t*r)/r}function O(t,e){const r=Math.pow(10,e);return Math.ceil(t*r)/r}function P(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function M(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?P(Object(r),!0).forEach((function(e){p(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}let I=new Map,k=[];function U(t){t.preventDefault()}function B(t,e,r,i,s,n,a){let o=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.canvasElement=t,this.canvasID=e,this.contextOptions=s,this.textureindex=r||0,this.texturestride=this.textureindex?3:a?4:6,this.initmask=a||!1,this.reuse=!1,this.isEnableCanvasAlphaChannel=o,B.prototype.ROTATION_CLOCK0=0,B.prototype.ROTATION_CLOCK90=1,B.prototype.ROTATION_CLOCK180=2,B.prototype.ROTATION_CLOCK270=3,this.webGLResources=n,n||(this.initContextGL(),this.contextGL&&(this.webGLContextLostProtect(),this.contextGL.isContextLost()&&this.restoreContext())),this.reinit(n);var u=new ArrayBuffer(4);this.dummpyCursor=new Uint8Array(u),this.dummpyWaterMark=new Uint8Array(u),this.cursorWidth=0,this.cursorHeight=0,this.hasCursor=0,this.hasWaterMark=0,this.watermarkOpacity=.15,this.watermarkData=null,this.watermarkWidth=0,this.watermarkHeight=0,this.isMultiView=!1,this.hasWholeFrame=0,this.croppingParams={},this.croppingParams.top=0,this.croppingParams.left=0,this.croppingParams.width=0,this.croppingParams.height=0,this.textureWidth=0,this.textureHeight=0,this.canvasWidth=0,this.canvasHeight=0,this.picRotation=-1,this.bgColor=[0,0,0],this.cx=0,this.cy=0,this.cw=0,this.ch=0,this.colorRange=-1,this.videoMode=-1,this.rotation=this.ROTATION_CLOCK0,this.fillMode=0,this.fillModeForResolution=0,this.viewPostion=null,this.enable_rounded_corner=0,this.radius_lt_x=0,this.radius_lt_y=0,this.radius_lb_x=0,this.radius_lb_y=0,this.radius_rt_x=0,this.radius_rt_y=0,this.radius_rb_x=0,this.radius_rb_y=0,this.aa_width=C,this.viewport_rect=null}B.prototype.reinit=function(t){if(this.webGLResources=t,!this.contextGL||this.contextGL.isContextLost()||this.contextGL.glInitSucceed||this.webGLResources){if(this.webGLResources&&this.webGLResources.contextgl&&!this.webGLResources.contextgl.isContextLost()){this.contextGL=this.webGLResources.contextgl,this.shaderProgram=this.webGLResources.program,this.waterMarkTextureRef=this.webGLResources.waterMarkTextureRef,this.repeatedWaterMarkTextureRef=this.webGLResources.repeatedWaterMarkTextureRef,this.initTextures(!1),this.vertexPosBuffer=this.webGLResources.vBuffer,this.texturePosBuffer=this.webGLResources.tBuffer;let t=this.contextGL.getError();this.contextGL.glInitSucceed=t!=this.contextGL.NO_ERROR&&t!=this.contextGL.CONTEXT_LOST_WEBGL?0:1}}else{this.initProgram(),this.initmask?this.initTextures(!1):this.initTextures(!0),this.initBuffers();let t=this.contextGL.getError();this.contextGL.glInitSucceed=t!=this.contextGL.NO_ERROR&&t!=this.contextGL.CONTEXT_LOST_WEBGL?0:1}},B.prototype.webGLContextLostSimulate=function(){let t="undefined"==typeof window?self:window;t.webGLEXTSimulate=t.webGLEXTSimulate||[],t.webGLEXTSimulate.push(A(this.contextGL,"WEBGL_lose_context"))},B.prototype.restoreContext=function(){if(this.contextGL)try{var t,e;null!==(t=this.canvasElement)&&void 0!==t&&t.loseContextExtension&&!this.canvasElement.restoreTimeoutId&&this.contextGL.isContextLost()&&(this.canvasElement.restoreTimeoutId=setTimeout((()=>{R("WebGLRestoreTimeout")}),1500),null===(e=this.canvasElement)||void 0===e||e.loseContextExtension.restoreContext())}catch(t){T("webgl restoreContext exception",t)}},B.prototype.webgGLContextLostCallback=function(t){w("webglcontextlost event: canvas listener size=".concat(k.length,",  canvas id: ").concat(this.canvasID,", , ids:").concat(k.join())),t.preventDefault(),this.contextGL.glInitSucceed=0,this.contextOptions&&this.contextOptions.webglcontextlostCallback&&this.contextOptions.webglcontextlostCallback(t,this.contextOptions.params)},B.prototype.removeEventListener=function(t,e){if(t&&e){t.restoreTimeoutId&&(clearTimeout(t.restoreTimeoutId),t.restoreTimeoutId=void 0),t.removeEventListener("webglcontextlost",e.contextLostHandler),t.removeEventListener("webglcontextrestored",e.contextRestoredHandler);const r=k.indexOf(this.canvasID);k.splice(r,1),I.delete(t)}},B.prototype.webGLContextRestoredCallback=function(t){w("webglcontextrestored event from canvas id: ".concat(this.canvasID)),this.canvasElement.restoreTimeoutId&&(clearTimeout(this.canvasElement.restoreTimeoutId),this.canvasElement.restoreTimeoutId=void 0),this.reinit(),this.contextOptions&&this.contextOptions.webglcontextrestoredCallback&&this.contextOptions.webglcontextrestoredCallback(t,this.contextOptions.params)},B.prototype.webGLContextLostProtect=function(){this.canvasElement&&!this.canvasElement.loseContextExtension&&(this.canvasElement.loseContextExtension=A(this.contextGL,"WEBGL_lose_context"));let t=this.canvasElement,e=I.get(t);e&&this.removeEventListener(t,e),I.set(t,this),this.contextLostHandler=this.webgGLContextLostCallback.bind(this),this.contextRestoredHandler=this.webGLContextRestoredCallback.bind(this),t.addEventListener("webglcontextlost",this.contextLostHandler,{capture:!1}),t.addEventListener("webglcontextrestored",this.contextRestoredHandler,{capture:!1}),-1===k.indexOf(this.canvasID)&&(k.push(this.canvasID),k.length>4&&w("webglcanvas listener size=".concat(k.length,", ids:").concat(k.join())))},B.prototype.isWebGL=function(){return this.contextGL},B.prototype.isAvaiable=function(){return this.contextGL&&!this.contextGL.isContextLost()&&this.contextGL.glInitSucceed},B.prototype.initContextGL=function(){for(var t,e,r,i=this.canvasElement,s=null,n=["webgl","experimental-webgl","moz-webgl","webkit-3d"],a=0;!s&&a<n.length;){var o=n[a];try{if((void 0).config.isEnableCanvasCtxOptionsOpt()){let t={depth:!1,stencil:!1,antialias:!1,alpha:this.isEnableCanvasAlphaChannel};if(this.contextOptions){let e=M(M({},this.contextOptions),t);s=i.getContext(o,e)}else s=i.getContext(o,t)}else s=this.contextOptions?i.getContext(o,this.contextOptions):i.getContext(o)}catch(t){s=null}s&&"function"==typeof s.getParameter||(s=null),++a}if(this.contextGL=s,!s||s.isContextLost())return T("Failed when trying to get WebGLContext on canvas(".concat(null===(t=this.canvasElement)||void 0===t?void 0:t.width,",").concat(null===(e=this.canvasElement)||void 0===e?void 0:e.height,"), gl=").concat(s,", lost=").concat(null===(r=s)||void 0===r?void 0:r.isContextLost())),void R("InitWebGLFail");s.glInitSucceed=0},B.prototype.initProgram=function(){var t=this.contextGL,e=t.createShader(t.VERTEX_SHADER);t.shaderSource(e,"\n    attribute vec4 vertexPos;\n    attribute vec4 texturePos;\n    attribute vec4 masktexturePos;\n    varying vec2 textureCoord;\n    varying vec2 masktextureCoord;\n\n    void main() {\n        gl_Position = vertexPos;\n        textureCoord = texturePos.xy;\n        masktextureCoord = masktexturePos.xy;\n    }\n  "),t.compileShader(e),t.getShaderParameter(e,t.COMPILE_STATUS)||t.isContextLost()||w("webgl Vertex shader failed to compile: "+t.getShaderInfoLog(e));var r=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(r,"\n    precision highp float;\n    varying highp vec2 textureCoord;\n    varying highp vec2 masktextureCoord;\n    \n    uniform sampler2D ySampler;\n    uniform sampler2D uSampler;\n    uniform sampler2D vSampler;\n    uniform sampler2D cursorSampler;\n    uniform sampler2D waterMarkSampler;\n    uniform sampler2D previewVideoSampler;\n    uniform sampler2D maskSampler;\n    \n    uniform vec4 cursorInfo;\n    uniform int onlyRGBA;\n    uniform int bgraMode;\n    uniform int colorRange;\n    uniform int waterMarkFlag;\n    uniform int cursorFlag;\n    uniform int yuvmode;\n    \n    const int MAX_ELLIPSE_COUNT = 10;\n    uniform int maskFlag;                       // 0: mask disabled; 1: mask enabled;\n    uniform int maskMode;                       // 0: static mask; 1: dynamic mask;\n    uniform vec4 uEllipses[MAX_ELLIPSE_COUNT];  // each ellipse contains (cx, cy, rx, ry) 4-coords\n    uniform int uEllipseCount;                  // how many ellipses will draw\n\n    // rounded corner feature in gl shader\n    uniform float u_enable_rounded_corner;\n    uniform float u_radius_lt_x;\n    uniform float u_radius_lt_y;\n    uniform float u_radius_lb_x;\n    uniform float u_radius_lb_y;\n    uniform float u_radius_rt_x;\n    uniform float u_radius_rt_y;\n    uniform float u_radius_rb_x;\n    uniform float u_radius_rb_y;\n    uniform float u_aa_width;\n    uniform vec4 u_viewport_rect;\n\n    const mat4 YUV2RGB_L = mat4(\n      1.1643828125, 0, 1.59602734375, -0.87078515625,\n      1.1643828125, -0.39176171875, -0.81296875, 0.52959375,\n      1.1643828125, 2.017234375, 0, -1.081390625,\n      0, 0, 0, 1\n    );\n\n    const mat4 YUV2RGB_F = mat4(\n      1.0, 0, 1.402, -0.701,\n      1.0, -0.34413, -0.71414, 0.529135,\n      1.0, 1.772, 0, -0.886,\n      0, 0, 0, 1\n    );\n\n    void main(void) {\n      vec4 c;\n      if (waterMarkFlag != 1) {\n        if (onlyRGBA == 0) {\n          highp float y = texture2D(ySampler, textureCoord).r;\n          highp float u;\n          highp float v;\n\n          if (yuvmode == 1) {\n            u = texture2D(uSampler, textureCoord).r;\n            v = texture2D(vSampler, textureCoord).r;\n          } else {\n            u = texture2D(uSampler, textureCoord).r;\n            v = texture2D(uSampler, textureCoord).a;\n          }\n\n          if (colorRange == 0) {\n            c = vec4(y, u, v, 1) * YUV2RGB_L;\n          } else {\n            c = vec4(y, u, v, 1) * YUV2RGB_F;\n          }\n\n          if (cursorFlag == 1) {\n            if (cursorInfo.z > 0.0 && \n                textureCoord.x >= cursorInfo.x && \n                textureCoord.y >= cursorInfo.y && \n                textureCoord.x < cursorInfo.x + cursorInfo.z && \n                textureCoord.y < cursorInfo.y + cursorInfo.w) {\n              \n              vec2 cursorCoord = textureCoord - cursorInfo.xy;\n              cursorCoord /= cursorInfo.zw;\n              vec4 cursor = texture2D(cursorSampler, cursorCoord);\n              c = c * (1.0 - cursor.a) + cursor * cursor.a;\n            }\n          }\n        } else {\n          c = texture2D(previewVideoSampler, textureCoord);\n          if (bgraMode == 1) {\n            c = vec4(c.b, c.g, c.r, c.a);\n          }\n        }\n      } else {\n        c = texture2D(waterMarkSampler, textureCoord);\n        if (c.r == 0.0 && c.g == 0.0 && c.b == 0.0) {\n          c.a = 0.0;\n        }\n      }\n\n      if (maskFlag == 1 && waterMarkFlag != 1) {\n        vec4 mask = texture2D(maskSampler, masktextureCoord);\n        if (maskMode == 0) {\n          // -- handle static mask --\n          if (mask.r != 0.0 || mask.g != 0.0 || mask.b != 0.0) {\n            c = mask * mask.a + c * (1.0 - mask.a);\n          }\n        } else if (maskMode == 1) {\n          // -- handle dynamic mask -- \n          bool inEllipse = false; // variable for checking whether the pixel to be drawn hits ellipse\n          for (int i = 0; i < MAX_ELLIPSE_COUNT; i++) {\n            if (i > uEllipseCount) break;\n\n            vec2 ellipseCenter = uEllipses[i].xy;\n            vec2 ellipseRadii = uEllipses[i].zw;\n            vec2 ellipsePos = masktextureCoord - ellipseCenter;\n\n            float ellipseEq = (ellipsePos.x * ellipsePos.x) / (ellipseRadii.x * ellipseRadii.x) + \n                              (ellipsePos.y * ellipsePos.y) / (ellipseRadii.y * ellipseRadii.y);\n            if (ellipseEq <= 1.0) {\n              // the pixel in the ellipse range\n              inEllipse = true;\n              break;\n            }\n          }\n\n          if (inEllipse) {\n            c = mask * mask.a + c * (1.0 - mask.a);\n          }\n        }\n      }\n\n      if (waterMarkFlag != 1) {\n        c.a = 1.0;\n      }\n\n      if (u_enable_rounded_corner < 0.5) {\n        gl_FragColor = c;\n        return;\n      }\n\n      // step 1: viewport coordinate mapping\n      // convert the fragment coordinate(canvas coordinate) to the viewport coordinate\n      // for example, a viewport={x: 100, y: 100, w: 200, h: 160}, a fragCoord.xy={x:120, y: 120}\n      // we can get the pos={x: 20, y: 20}\n      vec2 pos = gl_FragCoord.xy - u_viewport_rect.xy;\n      vec2 viewportSize = u_viewport_rect.zw;\n\n      // convert the normalized radius to pixel value\n      float r_lt_x = u_radius_lt_x * viewportSize.x;\n      float r_lt_y = u_radius_lt_y * viewportSize.y;\n      float r_rt_x = u_radius_rt_x * viewportSize.x;\n      float r_rt_y = u_radius_rt_y * viewportSize.y;\n      float r_lb_x = u_radius_lb_x * viewportSize.x;\n      float r_lb_y = u_radius_lb_y * viewportSize.y;\n      float r_rb_x = u_radius_rb_x * viewportSize.x;\n      float r_rb_y = u_radius_rb_y * viewportSize.y;\n\n      // step 2: calculate the rounded corner mask (as alpha)\n      float alpha = 1.0;\n\n      // --- calculation of the left-top corner ---\n      // Condition: if (pos.x < r_lt_x && pos.y < r_lt_y)\n      float in_lt = (1.0 - step(r_lt_x, pos.x)) * (1.0 - step(r_lt_y, pos.y));\n      // the circle center of the left-top corner in pixel coordinate\n      vec2 center_lt = vec2(r_lt_x, r_lt_y);\n      // calculate and normalize the distance between the fragment and the center\n      vec2 diff_lt = (pos - center_lt) / vec2(r_lt_x, r_lt_y);\n      float normDist_lt = length(diff_lt);\n      // smoothstep function is used to calculate the alpha value\n      float mask_lt = 1.0 - smoothstep(1.0 - u_aa_width, 1.0, normDist_lt);\n      float final_lt = mix(1.0, mask_lt, in_lt);\n\n      // --- calculation of the right-top corner ---\n      float in_rt = (1.0 - step(r_rt_x, viewportSize.x - pos.x)) * (1.0 - step(r_rt_y, pos.y));\n      vec2 center_rt = vec2(viewportSize.x - r_rt_x, r_rt_y);\n      vec2 diff_rt = (pos - center_rt) / vec2(r_rt_x, r_rt_y);\n      float normDist_rt = length(diff_rt);\n      float mask_rt = 1.0 - smoothstep(1.0 - u_aa_width, 1.0, normDist_rt);\n      float final_rt = mix(1.0, mask_rt, in_rt);\n\n      // --- calculation of the left-bottom corner ---\n      float in_lb = (1.0 - step(r_lb_x, pos.x)) * (1.0 - step(r_lb_y, viewportSize.y - pos.y));\n      vec2 center_lb = vec2(r_lb_x, viewportSize.y - r_lb_y);\n      vec2 diff_lb = (pos - center_lb) / vec2(r_lb_x, r_lb_y);\n      float normDist_lb = length(diff_lb);\n      float mask_lb = 1.0 - smoothstep(1.0 - u_aa_width, 1.0, normDist_lb);\n      float final_lb = mix(1.0, mask_lb, in_lb);\n\n      // --- calculation of the right-bottom corner ---\n      float in_rb = (1.0 - step(r_rb_x, viewportSize.x - pos.x)) * (1.0 - step(r_rb_y, viewportSize.y - pos.y));\n      vec2 center_rb = vec2(viewportSize.x - r_rb_x, viewportSize.y - r_rb_y);\n      vec2 diff_rb = (pos - center_rb) / vec2(r_rb_x, r_rb_y);\n      float normDist_rb = length(diff_rb);\n      float mask_rb = 1.0 - smoothstep(1.0 - u_aa_width, 1.0, normDist_rb);\n      float final_rb = mix(1.0, mask_rb, in_rb);\n\n      // Get the minimum value from the four corners (to ensure that if any corner requires transparency it is applied)\n      float finalAlpha = min(min(final_lt, final_rt), min(final_lb, final_rb));\n\n      // Final output color\n      gl_FragColor = vec4(c.rgb, c.a * finalAlpha);\n    }\n"),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)||t.isContextLost()||w("webgl Fragment shader failed to compile: "+t.getShaderInfoLog(r));var i=t.createProgram();t.attachShader(i,e),t.attachShader(i,r),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)||t.isContextLost()||w("webgl Program failed to compile: "+t.getProgramInfoLog(i)),t.useProgram(i),this.shaderProgram=i},B.prototype.initBuffers=function(){var t=this.contextGL,e=this.shaderProgram,r=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,1,-1,1,1,-1,-1,-1,1,1,-1,1,1,-1,-1,-1]),t.STATIC_DRAW);var i=t.getAttribLocation(e,"vertexPos");t.enableVertexAttribArray(i),t.vertexAttribPointer(i,2,t.FLOAT,!1,0,0),this.vertexPosBuffer=r;var s=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1,1,0,0,0,1,1,0,1]),t.STATIC_DRAW);var n=t.getAttribLocation(e,"texturePos");if(t.enableVertexAttribArray(n),t.vertexAttribPointer(n,2,t.FLOAT,!1,0,0),this.initmask&&!this.masktexturePosBuffer){var a=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1]),t.STATIC_DRAW);var o=t.getAttribLocation(e,"masktexturePos");t.enableVertexAttribArray(o),t.vertexAttribPointer(o,2,t.FLOAT,!1,0,0),this.masktexturePosBuffer=a}this.texturePosBuffer=s},B.prototype.initTextures=function(t){var e=this.contextGL,r=this.shaderProgram;e.pixelStorei(e.UNPACK_ALIGNMENT,1);var i=this.initTexture();this.yTextureRef=i,this.oyTextureRef=i;var s=this.initTexture();this.uTextureRef=s,this.ouTextureRef=s;var n=this.initTexture();if(this.vTextureRef=n,this.ovTextureRef=n,t){this.BindTextures(1);var a=this.initTexture(),o=e.getUniformLocation(r,"cursorSampler");e.uniform1i(o,this.textureindex*this.texturestride+3),this.cursorTextureRef=a;var u=this.initTexture(),c=e.getUniformLocation(r,"waterMarkSampler");e.uniform1i(c,4),this.waterMarkTextureRef=u;var h=this.initTexture();this.repeatedWaterMarkTextureRef=h;var l=this.initTexture(),f=e.getUniformLocation(r,"previewVideoSampler");e.uniform1i(f,this.textureindex*this.texturestride+5),this.previewVideoTextureRef=l;var p=e.getUniformLocation(r,"cursorInfo");this.cursorInfoRef=p}if(this.initmask){e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,1);var d=this.initTexture(),m=e.getUniformLocation(r,"maskSampler");e.uniform1i(m,this.textureindex*this.texturestride+6),this.maskTextureRef=d}var v=e.getUniformLocation(r,"colorRange");this.colorRangeRef=v,this.onlyRGBARef=e.getUniformLocation(r,"onlyRGBA"),this.bgraModeRef=e.getUniformLocation(r,"bgraMode"),this.waterMarkFlagRef=e.getUniformLocation(r,"waterMarkFlag"),this.maskFlagRef=e.getUniformLocation(r,"maskFlag"),this.cursorFlagRef=e.getUniformLocation(r,"cursorFlag"),this.yuvmodeRef=e.getUniformLocation(r,"yuvmode"),this.ul_enable_rounded_corner=e.getUniformLocation(r,"u_enable_rounded_corner"),this.ul_radius_lt_x=e.getUniformLocation(r,"u_radius_lt_x"),this.ul_radius_lt_y=e.getUniformLocation(r,"u_radius_lt_y"),this.ul_radius_lb_x=e.getUniformLocation(r,"u_radius_lb_x"),this.ul_radius_lb_y=e.getUniformLocation(r,"u_radius_lb_y"),this.ul_radius_rt_x=e.getUniformLocation(r,"u_radius_rt_x"),this.ul_radius_rt_y=e.getUniformLocation(r,"u_radius_rt_y"),this.ul_radius_rb_x=e.getUniformLocation(r,"u_radius_rb_x"),this.ul_radius_rb_y=e.getUniformLocation(r,"u_radius_rb_y"),this.ul_aa_width=e.getUniformLocation(r,"u_aa_width"),this.ul_viewport_rect=e.getUniformLocation(r,"u_viewport_rect")},B.prototype.BindTextures=function(t){var e=this.contextGL,r=this.shaderProgram;if(e.pixelStorei(e.UNPACK_ALIGNMENT,1),e.activeTexture(e.TEXTURE0+0),e.bindTexture(e.TEXTURE_2D,this.yTextureRef),e.activeTexture(e.TEXTURE0+1),e.bindTexture(e.TEXTURE_2D,this.uTextureRef),e.activeTexture(e.TEXTURE0+2),e.bindTexture(e.TEXTURE_2D,this.vTextureRef),1==t){let t=e.getUniformLocation(r,"ySampler");e.uniform1i(t,0);let i=e.getUniformLocation(r,"uSampler");e.uniform1i(i,1);let s=e.getUniformLocation(r,"vSampler");e.uniform1i(s,2)}else if(this.isRGBAMode(t)){let t=e.getUniformLocation(r,"previewVideoSampler");e.uniform1i(t,0);let i=e.getUniformLocation(r,"ySampler");e.uniform1i(i,0);let s=e.getUniformLocation(r,"uSampler");e.uniform1i(s,0);let n=e.getUniformLocation(r,"vSampler");e.uniform1i(n,0)}else if(2==t){let t=e.getUniformLocation(r,"ySampler");e.uniform1i(t,0);let i=e.getUniformLocation(r,"uSampler");e.uniform1i(i,1);let s=e.getUniformLocation(r,"vSampler");e.uniform1i(s,0)}let i=e.getUniformLocation(r,"previewVideoSampler");e.uniform1i(i,0);let s=e.getUniformLocation(r,"maskSampler");this.initmask?(e.activeTexture(e.TEXTURE0+6),e.bindTexture(e.TEXTURE_2D,this.maskTextureRef),e.uniform1i(s,6)):e.uniform1i(s,0);let n=e.getUniformLocation(r,"cursorSampler");e.uniform1i(n,0);let a=e.getUniformLocation(this.shaderProgram,"waterMarkSampler");e.uniform1i(a,0)},B.prototype.initTexture=function(){var t=this.contextGL,e=t.createTexture();return t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.bindTexture(t.TEXTURE_2D,null),e},B.prototype.clearDisplay=function(){var t=this.contextGL;t&&(t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT))},B.prototype.cleanup=function(){let t=this.canvasElement,e=I.get(t);if(e&&this.removeEventListener(t,e),t.defaultContextLostHandler||(t.defaultContextLostHandler=U,t.addEventListener("webglcontextlost",U,{capture:!1})),this.cleanupRoundedCornerRadius(),this.isAvaiable()){var r=this.contextGL;r.deleteProgram(this.program),r.activeTexture(r.TEXTURE0+this.textureindex*this.texturestride),r.bindTexture(r.TEXTURE_2D,null),r.activeTexture(r.TEXTURE1+this.textureindex*this.texturestride),r.bindTexture(r.TEXTURE_2D,null),r.activeTexture(r.TEXTURE2+this.textureindex*this.texturestride),r.bindTexture(r.TEXTURE_2D,null),this.textureindex||this.initmask||(r.activeTexture(r.TEXTURE3+this.textureindex*this.texturestride),r.bindTexture(r.TEXTURE_2D,null),r.activeTexture(r.TEXTURE4+this.textureindex*this.texturestride),r.bindTexture(r.TEXTURE_2D,null),r.activeTexture(this.getRepeatedWatermarkTextureValue(r)),r.bindTexture(r.TEXTURE_2D,null),r.activeTexture(r.TEXTURE5+this.textureindex*this.texturestride),r.bindTexture(r.TEXTURE_2D,null)),r.bindBuffer(r.ARRAY_BUFFER,null),r.deleteTexture(this.yTextureRef),r.deleteTexture(this.uTextureRef),r.deleteTexture(this.vTextureRef),this.textureindex||this.initmask||(r.deleteTexture(this.cursorTextureRef),r.deleteTexture(this.waterMarkTextureRef),r.deleteTexture(this.repeatedWaterMarkTextureRef),r.deleteTexture(this.previewVideoTextureRef),r.deleteBuffer(this.vertexPosBuffer),r.deleteBuffer(this.texturePosBuffer)),this.maskTextureRef&&r.deleteTexture(this.maskTextureRef),this.masktexturePosBuffer&&r.deleteBuffer(this.masktexturePosBuffer),r.glInitSucceed=0}},B.prototype.drawNextOutputPicture=function(t,e,r,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;this.contextGL?this.drawNextOutputPictureFrame(t,e,r,i,s):this.drawNextOuptutPictureRGBA(t,e,r,i)},B.prototype.updateVertexInfoForMultiView=function(t,e,r,i,s){var n,a,o,u,c=this.contextGL;if(this.isUseFillMode({width:r,height:i,rotation:s}))n=0,a=0,o=1,u=1;else{var h=s==this.ROTATION_CLOCK90||s==this.ROTATION_CLOCK270?i:r,l=s==this.ROTATION_CLOCK90||s==this.ROTATION_CLOCK270?r:i,f=h/l*e;f>t?(n=0,o=1,u=1-(a=(e-l/h*t)/2/e)):(a=0,u=1,o=1-(n=(t-f)/2/t))}n=2*n-1,o=2*o-1,a=1-2*a,u=1-2*u;var p=new Float32Array([o,a,n,a,o,u,n,u,1,1,-1,1,1,-1,-1,-1]);this.viewPostion=p,c.bindBuffer(c.ARRAY_BUFFER,this.vertexPosBuffer),c.bufferData(c.ARRAY_BUFFER,p,c.DYNAMIC_DRAW)},B.prototype.getViewPosition=function(){let t=[0,0,1,1];if(!this.viewPostion)return t;const e=this.viewPostion[0],r=this.viewPostion[1],i=this.viewPostion[2],s=this.viewPostion[5];return t[0]=(1-r)/2,t[1]=(1+i)/2,t[2]=(1-s)/2,t[3]=(1+e)/2,t},B.prototype.updateTextureInfo=function(t,e,r,i,s){var n=t.contextGL,a=i.top/r,o=i.left/e,u=a+(i.height-1)/r,c=o+i.width/e,h=[o,a,c,a,c,u,o,u];s==t.ROTATION_CLOCK90&&(h.unshift(h[6],h[7]),h=h.slice(0,8)),s==t.ROTATION_CLOCK180&&(h.unshift(h[4],h[5],h[6],h[7]),h=h.slice(0,8)),s==t.ROTATION_CLOCK270&&(h.push(h[0],h[1]),h=h.slice(2));var l=h[0],f=h[1];h[0]=h[2],h[1]=h[3],h[2]=l,h[3]=f;var p=new Float32Array([...h,1,0,0,0,1,1,0,1]);n.bindBuffer(n.ARRAY_BUFFER,t.texturePosBuffer),n.bufferData(n.ARRAY_BUFFER,p,n.DYNAMIC_DRAW)},B.prototype.updateTextureInfoForMultiView=function(t,e,r,i,s,n,a){var o,u,c,h,l=this.contextGL;if(this.isUseFillMode({width:r.width,height:r.height,rotation:i})){const s=i==this.ROTATION_CLOCK90||i==this.ROTATION_CLOCK270?a/n:n/a,l=r.left||0,f=r.top||0;if(r.width/r.height>s){const i=r.height*s;o=f/e,u=(Math.round((r.width-i)/2)+l)/t,c=o+(r.height-1)/e,h=u+i/t}else{const i=r.width/s;c=(o=(Math.round((r.height-i)/2)+f)/e)+(i-1)/e,h=(u=l/t)+r.width/t}}else o=O(r.top/e,2),u=O(r.left/t,2),c=L((r.top+r.height-1)/e,2),h=L((r.width-1+r.left)/t,2);var f=[u,o,h,o,h,c,u,c];i==this.ROTATION_CLOCK90&&(f.unshift(f[6],f[7]),f=f.slice(0,8)),i==this.ROTATION_CLOCK180&&(f.unshift(f[4],f[5],f[6],f[7]),f=f.slice(0,8)),i==this.ROTATION_CLOCK270&&(f.push(f[0],f[1]),f=f.slice(2,10));var p=f[0],d=f[1];if(f[0]=f[2],f[1]=f[3],f[2]=p,f[3]=d,s)if(i==this.ROTATION_CLOCK90||i==this.ROTATION_CLOCK270){let t=f[1];f[1]=f[3],f[3]=t,t=f[5],f[5]=f[7],f[7]=t}else f[0]=1-f[0],f[2]=1-f[2],f[4]=1-f[4],f[6]=1-f[6];var m=new Float32Array([...f,1,0,0,0,1,1,0,1]);l.bindBuffer(l.ARRAY_BUFFER,this.texturePosBuffer),l.bufferData(l.ARRAY_BUFFER,m,l.DYNAMIC_DRAW)},B.prototype.drawNextOutputPictureFrame=function(t,e,r,i,s){let n=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=!(arguments.length>7&&void 0!==arguments[7])||arguments[7];if(!this.isAvaiable())return;var u=this.contextGL,c=(this.texturePosBuffer,this.yTextureRef),h=this.uTextureRef,l=this.vTextureRef;u.enable(u.BLEND),u.blendFunc(u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA),s=s||this.ROTATION_CLOCK0;var f=(r=r||{top:0,left:0,width:t,height:e}).width!=this.croppingParams.width||r.height!=this.croppingParams.height,p=r.top!=this.croppingParams.top||r.left!=this.croppingParams.left,d=u.canvas.width!=this.canvasWidth||u.canvas.height!=this.canvasHeight,m=t!=this.textureWidth||e!=this.textureHeight,v=s!=this.picRotation;(f||d||v)&&function(t,e,r,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;var n=t.contextGL;let a=n.canvas.width,o=n.canvas.height;s&&(a=s.width,o=s.height);var u,c,h,l,f=i==t.ROTATION_CLOCK90||i==t.ROTATION_CLOCK270?r:e,p=i==t.ROTATION_CLOCK90||i==t.ROTATION_CLOCK270?e:r,d=f/p*o;d>a?(u=0,h=1,l=1-(c=(o-p/f*a)/2/o)):(c=0,l=1,h=1-(u=(a-d)/2/a)),u=2*u-1,h=2*h-1,c=1-2*c,l=1-2*l;var m=new Float32Array([h,c,u,c,h,l,u,l,h,c,u,c,h,l,u,l]);n.bindBuffer(n.ARRAY_BUFFER,t.vertexPosBuffer),n.bufferData(n.ARRAY_BUFFER,m,n.DYNAMIC_DRAW)}(this,r.width,r.height,s,a),(f||p||m||v)&&this.updateTextureInfo(this,t,e,r,s);let g=n?0:1;g!=this.colorRange&&(u.uniform1i(this.colorRangeRef,g),this.colorRange=g),a?(u.viewport(a.x,a.y,a.width,a.height),this.viewport_rect||(this.viewport_rect=new Float32Array(4)),this.viewport_rect.set([a.x,a.y,a.width,a.height],0),u.uniform4fv(this.ul_viewport_rect,this.viewport_rect)):(u.viewport(0,0,u.canvas.width,u.canvas.height),this.viewport_rect||(this.viewport_rect=new Float32Array(4)),this.viewport_rect.set([0,0,u.canvas.width,u.canvas.height],0),u.uniform4fv(this.ul_viewport_rect,this.viewport_rect)),u.uniform1i(this.onlyRGBARef,0),u.uniform1i(this.yuvmodeRef,1),Object.assign(this.croppingParams,r),this.textureWidth=t,this.textureHeight=e,this.picRotation=s,this.canvasWidth=u.canvas.width,this.canvasHeight=u.canvas.height;var _=i,x=t*e;if(u.activeTexture(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,c),o){var y=_.subarray(0,x);u.texImage2D(u.TEXTURE_2D,0,u.LUMINANCE,t,e,0,u.LUMINANCE,u.UNSIGNED_BYTE,y)}var b=t/2*e/2;if(u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,h),o){var E=_.subarray(x,x+b);u.texImage2D(u.TEXTURE_2D,0,u.LUMINANCE,t/2,e/2,0,u.LUMINANCE,u.UNSIGNED_BYTE,E)}var T=b;if(u.activeTexture(u.TEXTURE2),u.bindTexture(u.TEXTURE_2D,l),o){var R=_.subarray(x+b,x+b+T);u.texImage2D(u.TEXTURE_2D,0,u.LUMINANCE,t/2,e/2,0,u.LUMINANCE,u.UNSIGNED_BYTE,R)}u.activeTexture(u.TEXTURE3),u.bindTexture(u.TEXTURE_2D,this.cursorTextureRef),this.hasCursor?u.uniform1i(this.cursorFlagRef,1):o&&u.texImage2D(u.TEXTURE_2D,0,u.RGBA,1,1,0,u.RGBA,u.UNSIGNED_BYTE,this.dummpyCursor),u.uniform4f(this.cursorInfoRef,this.cx,this.cy,this.cw,this.ch),u.activeTexture(u.TEXTURE5),u.bindTexture(u.TEXTURE_2D,this.previewVideoTextureRef),u.texImage2D(u.TEXTURE_2D,0,u.RGBA,1,1,0,u.RGBA,u.UNSIGNED_BYTE,this.dummpyWaterMark);var w=u.getUniformLocation(this.shaderProgram,"maskSampler");u.uniform1i(w,5),this.render(),this.hasWholeFrame=1},B.prototype.updateTextureBlock=function(t,e,r,i,s){if(this.isAvaiable()){var n=this.contextGL,a=s;if(!(!this.hasWholeFrame||t<=0||e<=0||r<0||i<0||r+t>this.textureWidth||i+e>this.textureHeight)&&s&&s.length==t*e*3/2){var o=this.yTextureRef,u=this.uTextureRef,c=this.vTextureRef,h=t*e,l=a.subarray(0,h);n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,o),n.texSubImage2D(n.TEXTURE_2D,0,r,i,t,e,n.LUMINANCE,n.UNSIGNED_BYTE,l);var f=t/2*e/2,p=a.subarray(h,h+f);n.activeTexture(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,u),n.texSubImage2D(n.TEXTURE_2D,0,r/2,i/2,t/2,e/2,n.LUMINANCE,n.UNSIGNED_BYTE,p);var d=f,m=a.subarray(h+f,h+f+d);n.activeTexture(n.TEXTURE2),n.bindTexture(n.TEXTURE_2D,c),n.texSubImage2D(n.TEXTURE_2D,0,r/2,i/2,t/2,e/2,n.LUMINANCE,n.UNSIGNED_BYTE,m)}}},B.prototype.updateCursor=function(t,e,r){if(this.isAvaiable()){var i=this.contextGL;t<=0||e<=0||!r||r.length!=t*e*4||(i.activeTexture(i.TEXTURE3),i.bindTexture(i.TEXTURE_2D,this.cursorTextureRef),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,t,e,0,i.RGBA,i.UNSIGNED_BYTE,r),this.cursorWidth=t,this.cursorHeight=e,this.hasCursor=1)}},B.prototype.updateWatermark=function(t,e,r){this.isAvaiable()&&(this.contextGL,t<=0||e<=0||!r||r.length!=t*e*4||(this.watermarkData=r,this.watermarkWidth=t,this.watermarkHeight=e,this.hasWaterMark=1))},B.prototype.drawWatermark=function(){if(this.isAvaiable()){var t=this.contextGL;if(this.isSetWatermark()&&this.watermarkData&&this.watermarkWidth&&this.watermarkHeight){t.uniform1i(this.waterMarkFlagRef,1),this.isWatermarkRepeated()?(t.activeTexture(this.getRepeatedWatermarkTextureValue(t)),t.bindTexture(t.TEXTURE_2D,this.repeatedWaterMarkTextureRef)):(t.activeTexture(t.TEXTURE4),t.bindTexture(t.TEXTURE_2D,this.waterMarkTextureRef)),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.watermarkWidth,this.watermarkHeight,0,t.RGBA,t.UNSIGNED_BYTE,this.watermarkData);let e=t.getUniformLocation(this.shaderProgram,"waterMarkSampler");t.uniform1i(e,this.isWatermarkRepeated()?this.getRepeatedWatermarkUniformValue():4),t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.drawArrays(t.TRIANGLE_STRIP,4,4)}}},B.prototype.drawRoundedCorner=function(){if(this.isAvaiable()){var t=this.contextGL;t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.uniform1f(this.ul_enable_rounded_corner,this.enable_rounded_corner),t.uniform1f(this.ul_radius_lt_x,this.radius_lt_x),t.uniform1f(this.ul_radius_lt_y,this.radius_lt_y),t.uniform1f(this.ul_radius_lb_x,this.radius_lb_x),t.uniform1f(this.ul_radius_lb_y,this.radius_lb_y),t.uniform1f(this.ul_radius_rt_x,this.radius_rt_x),t.uniform1f(this.ul_radius_rt_y,this.radius_rt_y),t.uniform1f(this.ul_radius_rb_x,this.radius_rb_x),t.uniform1f(this.ul_radius_rb_y,this.radius_rb_y),t.uniform1f(this.ul_aa_width,this.aa_width)}},B.prototype.cleanupRoundedCornerRadius=function(){this.enable_rounded_corner=0,this.radius_lt_x=0,this.radius_lt_y=0,this.radius_lb_x=0,this.radius_lb_y=0,this.radius_rt_x=0,this.radius_rt_y=0,this.radius_rb_x=0,this.radius_rb_y=0,this.aa_width=C,this.viewport_rect=null},B.prototype.render=function(){if(this.isAvaiable()){var t=this.contextGL;this.drawRoundedCorner(),t.uniform1i(this.waterMarkFlagRef,0),t.drawArrays(t.TRIANGLE_STRIP,0,4),this.drawWatermark()}},B.prototype.drawCursor=function(t,e,r,i,s){if(this.isAvaiable()){var n=this.contextGL;if(!(!this.hasWholeFrame||t&&(i<0||s<0))){n.viewport(0,0,n.canvas.width,n.canvas.height);var a=this.yTextureRef,o=this.uTextureRef,u=this.vTextureRef,c=this.cursorTextureRef;if(n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,a),n.activeTexture(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,o),n.activeTexture(n.TEXTURE2),n.bindTexture(n.TEXTURE_2D,u),n.activeTexture(n.TEXTURE3),n.bindTexture(n.TEXTURE_2D,c),t&&this.hasCursor){let t=e/this.croppingParams.width,a=r/this.croppingParams.height,o=i/this.croppingParams.width,u=s/this.croppingParams.height;this.cx=t,this.cy=a,this.cw=o,this.ch=u,n.uniform4f(this.cursorInfoRef,t,a,o,u)}else n.uniform4f(this.cursorInfoRef,0,0,0,0);this.render()}}},B.prototype.clear=function(){this.hasWholeFrame=0,this.hasCursor=0,this.cleanupRoundedCornerRadius()},B.prototype.clearCanvas=function(t){if(this.cleanupRoundedCornerRadius(),this.isAvaiable()){var e=this.contextGL;t?e.clearColor(t.R,t.G,t.B,t.A):e.clearColor(this.bgColor[0],this.bgColor[1],this.bgColor[2],255),e.clear(e.COLOR_BUFFER_BIT)}},B.prototype.drawNextOuptutPictureRGBA=function(t,e,r,i){if(this.isAvaiable()){var s=i,n=this.canvasElement.getContext("2d"),a=n.getImageData(0,0,t,e);a.data.set(s),n.putImageData(a,0,0)}},B.prototype.isRGBAMode=function(t){return-1!==[d,m].indexOf(t)},B.prototype.updateRemoteVideoTextures=function(t,e,r,i,s){let n=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=!(arguments.length>8&&void 0!==arguments[8])||arguments[8];if(!this.isAvaiable())return;var o=this.contextGL,u=this.yTextureRef,c=this.uTextureRef,h=this.vTextureRef;o.enable(o.BLEND),o.blendFunc(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA);const l=this.isRGBAMode(this.videoMode);if(t<=0||e<=0||!i||!i.length||i.length!=t*e*3/2&&!l||r&&(r.top<0||r.left<0||r.left+r.width>t||r.top+r.height>e))return!1;let f=n?0:1;if(this.colorRange=f,this.rotation=s,Object.assign(this.croppingParams,r),this.textureWidth=t,this.textureHeight=e,this.canvasWidth=o.canvas.width,this.canvasHeight=o.canvas.height,!a)return;if(o.bindTexture(o.TEXTURE_2D,u),l)return void o.texImage2D(o.TEXTURE_2D,0,o.RGBA,t,e,0,o.RGBA,o.UNSIGNED_BYTE,i);var p=i,d=t*e,m=p.subarray(0,d);o.texImage2D(o.TEXTURE_2D,0,o.LUMINANCE,t,e,0,o.LUMINANCE,o.UNSIGNED_BYTE,m);let v=0,g=0;1==this.videoMode?(v=t/2*e/2,g=v):2==this.videoMode&&(v=t*e/2,g=0);var _=p.subarray(d,d+v);if(o.bindTexture(o.TEXTURE_2D,c),g){o.texImage2D(o.TEXTURE_2D,0,o.LUMINANCE,t/2,e/2,0,o.LUMINANCE,o.UNSIGNED_BYTE,_);var x=p.subarray(d+v,d+v+g);o.bindTexture(o.TEXTURE_2D,h),o.texImage2D(o.TEXTURE_2D,0,o.LUMINANCE,t/2,e/2,0,o.LUMINANCE,o.UNSIGNED_BYTE,x)}else o.texImage2D(o.TEXTURE_2D,0,o.LUMINANCE_ALPHA,t/2,e/2,0,o.LUMINANCE_ALPHA,o.UNSIGNED_BYTE,_);return!0},B.prototype.updateRemoteVideoTexturesImageBitmap=function(t,e,r,i,s){let n=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(t<=0||e<=0||!r)return;if(!this.isAvaiable())return;var a=this.contextGL;if(this.textureWidth=t,this.textureHeight=e,Number.isNaN(s)||(this.rotation=s),Object.assign(this.croppingParams,i),!n)return;a.bindTexture(a.TEXTURE_2D,this.yTextureRef);const o=a.RGBA,u=a.RGBA,c=a.UNSIGNED_BYTE;a.texImage2D(a.TEXTURE_2D,0,o,u,c,r)},B.prototype.updateSelfMaskImage=function(t,e,r){if(!(t<=0||e<=0)&&r&&r.length==t*e*4&&this.isAvaiable()){var i=this.contextGL;i.bindTexture(i.TEXTURE_2D,this.maskTextureRef),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,t,e,0,i.RGBA,i.UNSIGNED_BYTE,r)}},B.prototype.VideoFlip=function(){if(this.isAvaiable()){var t=this.contextGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,1)}},B.prototype.drawRemoteVideo=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.isAvaiable())return;var r=this.contextGL;let i=this.isRGBAMode(this.videoMode)?1:0;r.uniform1i(this.colorRangeRef,this.colorRange),this.setUniformFlag(i,this.hasCursor,this.videoMode),this.initmask&&r.uniform1i(this.maskFlagRef,1),this.updateTextureInfoForMultiView(this.textureWidth,this.textureHeight,this.croppingParams,this.rotation,e,t.width,t.height),r.viewport(t.x,t.y,t.width,t.height),this.viewport_rect||(this.viewport_rect=new Float32Array(4)),this.viewport_rect.set([t.x,t.y,t.width,t.height],0),r.uniform4fv(this.ul_viewport_rect,this.viewport_rect),this.updateVertexInfoForMultiView(t.width,t.height,this.croppingParams.width,this.croppingParams.height,this.rotation),this.BindTextures(this.videoMode),r.enable(r.BLEND),r.blendFunc(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA),this.render()},B.prototype.readPixelsSyncRequest=function(t,e,r,i){if(this.isAvaiable()){var s,n=this.contextGL;return this.destination&&this.destination.length==r*i*4||(this.destination=new Uint8Array(r*i*4)),s=this.destination,n.flush(),n.readPixels(t,e,r,i,n.RGBA,n.UNSIGNED_BYTE,s),s}},B.prototype.updateSelfVideoTextures=function(t,e,r,i){let s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(!(t<=0||e<=0)&&r&&r.length%4==0&&this.isAvaiable()){var a=this.contextGL;this.textureWidth=t,this.textureHeight=e,this.rotation=n,Object.assign(this.croppingParams,i),s&&(a.bindTexture(a.TEXTURE_2D,this.yTextureRef),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,t,e,0,a.RGBA,a.UNSIGNED_BYTE,r))}},B.prototype.drawSelfVideo=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.isAvaiable()){var i=this.contextGL;this.setUniformFlag(1,this.hasCursor,this.videoMode),this.updateTextureInfoForMultiView(this.textureWidth,this.textureHeight,this.croppingParams,this.rotation,r,t.width,t.height),i.viewport(t.x,t.y,t.width,t.height),this.viewport_rect||(this.viewport_rect=new Float32Array(4)),this.viewport_rect.set([t.x,t.y,t.width,t.height],0),i.uniform4fv(this.ul_viewport_rect,this.viewport_rect),e?(i.enable(i.BLEND),i.blendFunc(i.ZERO,i.ZERO),this.updateVertexInfoForMultiView(t.width,t.height,t.width,t.height,this.ROTATION_CLOCK0)):(i.enable(i.BLEND),i.blendFunc(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA),this.updateVertexInfoForMultiView(t.width,t.height,this.croppingParams.width,this.croppingParams.height,this.rotation)),this.BindTextures(d),this.render()}},B.prototype.isSetWatermark=function(){return this.hasWaterMark},B.prototype.recoverTextures=function(){},B.prototype.setWatermarkFlag=function(t){this.hasWaterMark=t,t||(this.setWatermarkRepeated(!1),this.setWatermarkOpacity(),this.setWatermarkPosition(16))},B.prototype.setUniformFlag=function(t,e,r){if(this.isAvaiable()){var i=this.contextGL;i.uniform1i(this.onlyRGBARef,t),i.uniform1i(this.bgraModeRef,t&&r===m?1:0),i.uniform1i(this.cursorFlagRef,e),t||i.uniform1i(this.yuvmodeRef,r)}},B.prototype.setVideoMode=function(t){this.videoMode=t},B.prototype.getVideoMode=function(t){return this.videoMode},B.prototype.setWatermarkRepeated=function(t){this.watermarkRepeated=t},B.prototype.isWatermarkRepeated=function(){return!!this.watermarkRepeated},B.prototype.setWatermarkOpacity=function(t){this.watermarkOpacity=t||.15},B.prototype.getWatermarkOpacity=function(){return this.watermarkOpacity},B.prototype.setWatermarkPosition=function(t){this.watermarkPosition=t||16},B.prototype.getWatermarkPosition=function(){return this.watermarkPosition},B.prototype.setMultiView=function(t){return this.isMultiView=t},B.prototype.getRepeatedWatermarkUniformValue=function(){return this.isMultiView?30:7},B.prototype.getRepeatedWatermarkTextureValue=function(t){return this.isMultiView?t.TEXTURE30:t.TEXTURE7},B.prototype.setFillMode=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.fillMode=t,this.fillModeForResolution=e},B.prototype.getFillMode=function(){return this.fillMode},B.prototype.getFillModeForResolution=function(){return this.fillModeForResolution},B.prototype.getTextureIndex=function(){return this.textureindex},B.prototype.getTextureWidth=function(){return this.textureWidth},B.prototype.getTextureHeight=function(){return this.textureHeight},B.prototype.getRotation=function(){return this.rotation},B.prototype.getCroppingParams=function(){return this.croppingParams},B.prototype.getIndex=function(){return this.textureindex},B.prototype.getWatermarkWidth=function(){return this.watermarkWidth},B.prototype.getWatermarkHeight=function(){return this.watermarkHeight},B.prototype.getWatermarkOpacity=function(){return this.watermarkOpacity},B.prototype.getAttachedCanvas=function(){return this.canvasElement},B.prototype.getCanvasId=function(){return this.canvasID},B.prototype.resizeCanvasTo=function(t,e){this.contextGL.canvas.width=t,this.contextGL.canvas.height=e},B.prototype.isUseFillMode=function(t){let{width:e,height:r,rotation:i}=t;if(!this.fillMode)return!1;if(!this.fillModeForResolution)return!0;if(!e||!r)return!1;const s=i===this.ROTATION_CLOCK90||i==this.ROTATION_CLOCK270?r/e:e/r;return(Array.isArray(this.fillModeForResolution)?this.fillModeForResolution:[this.fillModeForResolution]).some((t=>Math.abs(s-t)<.01))},B.prototype.setRoundedCornerRadius=function(t){t?(this.radius_lt_x=t.radius_lt_x,this.radius_lt_y=t.radius_lt_y,this.radius_lb_x=t.radius_lb_x,this.radius_lb_y=t.radius_lb_y,this.radius_rt_x=t.radius_rt_x,this.radius_rt_y=t.radius_rt_y,this.radius_rb_x=t.radius_rb_x,this.radius_rb_y=t.radius_rb_y,0===this.radius_lt_x&&0===this.radius_lt_y&&0===this.radius_lb_x&&0===this.radius_lb_y&&0===this.radius_rt_x&&0===this.radius_rt_y&&0===this.radius_rb_x&&0===this.radius_rb_y?this.enable_rounded_corner=0:this.enable_rounded_corner=1):this.enable_rounded_corner=0},B.prototype.setAntialiasWidth=function(t){(t<=0||t>=1)&&(t=C),this.aa_width=t};const V=B;class D{constructor(t,e){this.isMirror=!1,this.display=new V(t,e,0,void 0,{preserveDrawingBuffer:!1},void 0,!1,!1)}renderFrame(t,e,r,i){if(this.display){let s={x:0,y:0,width:this.display.canvasElement.width,height:this.display.canvasElement.height};this.display.updateRemoteVideoTextures(t,e,i,r,0,!0,s,!1),this.display.drawRemoteVideo(s,this.isMirror)}}render(t){return e=this,r=void 0,s=function*(){let e=d;if("data_ptr"in t){const{data:e,format_width:r,format_height:i,valid_x:s,valid_y:n,valid_width:a,valid_height:o}=t;let u={top:n,left:s,width:a,height:o};this.display.setVideoMode(1),this.renderFrame(r,i,e,u)}else if(self.VideoFrame&&t instanceof VideoFrame){const{format:r,visibleRect:i}=t;if(r&&i){if("I420"===r||"I420A"===r)e=1;else if("NV12"===r)e=2;else{if("BGRA"!==r)return void(this.onUnsupportedFrame&&this.onUnsupportedFrame(r));e=m}const{width:s,height:n}=i,a=new Uint8Array(t.allocationSize()),o={top:0,left:0,width:s,height:n};this.display.setVideoMode(e);try{yield t.copyTo(a),this.renderFrame(s,n,a,o)}catch(t){}t.close()}}else if(t instanceof ImageData){const{width:e,height:r}=t,i={top:0,left:0,width:e,height:r};this.display.setVideoMode(d),this.renderFrame(e,r,t.data,i)}},new((i=void 0)||(i=Promise))((function(t,n){function a(t){try{u(s.next(t))}catch(t){n(t)}}function o(t){try{u(s.throw(t))}catch(t){n(t)}}function u(e){var r;e.done?t(e.value):(r=e.value,r instanceof i?r:new i((function(t){t(r)}))).then(a,o)}u((s=s.apply(e,r||[])).next())}));var e,r,i,s}updateSize(t,e){this.display.canvasElement.width=t,this.display.canvasElement.height=e}setMirror(t){this.isMirror=t}}class F{constructor(){this.timer3s=null,this.timer10s=null,this.isVBPredictDone=!1,this.inited=!1}start(){this.inited=!0,this.clear(),this.timer3s=setTimeout((()=>{this.isVBPredictDone||this.ontimeout3s()}),3e3),this.timer10s=setTimeout((()=>{this.isVBPredictDone||this.ontimeout10s()}),1e4)}clear(){clearTimeout(this.timer3s),clearTimeout(this.timer10s),this.timer3s=null,this.timer10s=null}}var N=function(t,e,r,i){return new(r||(r=Promise))((function(s,n){function a(t){try{u(i.next(t))}catch(t){n(t)}}function o(t){try{u(i.throw(t))}catch(t){n(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,o)}u((i=i.apply(t,e||[])).next())}))};class G{constructor(t){this.isVBReady=!1,this.videoStream=null,this.isVBInitializing=!1,this.receiveTimer=null,this.msgChannel=null,this.isEnabled=!0,this.trackProcessor=null,this.isVBRunning=!1,this.frameRate=24,this.isStreamEnabled=!1,this.destoryed=!1,this._needFrame=!1,this._backend="",this.isMetadataLoaded=!1,this.isCapturing=!1,this.isReportVideoFrameError=!1,this.shouldStopCapture=!1;const{canvas:e,canvasID:r,bgImage:i,cdnPath:s}=t,n=function(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(r[i[s]]=t[i[s]])}return r}(t,["canvas","canvasID","bgImage","cdnPath"]);if(this.cdnPath=s||G.cdnPath,!this.cdnPath)throw new Error("VB module: cdnPath is not provided");this.vbWorkerUrl="".concat(this.cdnPath,"/vb_worker.min.js"),this.initParam=n,this._needFrame=n.needFrame,e&&(this.cvsEle="string"==typeof e?document.querySelector("#".concat(e)):e),i&&(this.bgImage=i),this.handle_message_from_vb_worker=this.handle_message_from_vb_worker.bind(this);const a=navigator.userAgent.toLocaleLowerCase();this.isSafari=a.includes("safari")&&!a.includes("chrome")&&!a.includes("chromium"),this.vbLoadingTimer=new F,this.handleLoadMetadata=this.handleLoadMetadata.bind(this),this.stats={fps:0,receivingFps:0,receivedFrames:0,generatedFrames:0,width:0,height:0}}set needFrame(e){this._needFrame=e,this.postMessage({cmd:t.VB_UPDATE_NEED_FRAME,payload:e})}get needFrame(){return this._needFrame}get backend(){return this._backend}set ontimeout3s(t){this.vbLoadingTimer.ontimeout3s=t}set ontimeout10s(t){this.vbLoadingTimer.ontimeout10s=t}static isSupportVB(){return N(this,void 0,void 0,(function*(){try{const t=yield a.simd();return navigator.hardwareConcurrency&&navigator.hardwareConcurrency>2&&t&&"function"==typeof OffscreenCanvas}catch(t){return!1}}))}sendCanvas(){if(this.cvsEle){const e=this.cvsEle.transferControlToOffscreen();this.postMessage({cmd:t.VB_RENDER_CANVAS,payload:e},[e])}}generateVBStream(){if(this.vbTrackGenerator){const e=this.vbTrackGenerator.writable;this.postMessage({cmd:t.VB_GENERATE_STREAM,payload:e},[e])}else if(this.streamCanvas)if(this.isSafari){const e=this.streamCanvas.transferControlToOffscreen();this.postMessage({cmd:t.VB_GENERATE_STREAM,payload:e},[e])}else this.streamRender=new D(this.streamCanvas,G.VB_STREAM_CANVAS),this.postMessage({cmd:t.VB_GENERATE_STREAM})}initialize(){return this.isVBReady?Promise.resolve():(this.isVBInitializing||(this.isVBInitializing=!0,this.vbLoadingTimer.isVBPredictDone=!1,this.initPromise=new Promise(((e,r)=>N(this,void 0,void 0,(function*(){this.initReject=r,this.initResolve=e;try{const e=yield fetch(this.vbWorkerUrl);if(e.ok){const r=yield e.arrayBuffer();if(this.destoryed)return;const i=s().createObjectURL(new Blob([r]));this.worker=new Worker(i,{name:G.VB_WORKER_NAME}),this.worker.addEventListener("message",this.handle_message_from_vb_worker),this.postMessage({cmd:t.VB_WORKER_INIT,payload:Object.assign(Object.assign({renderUserAgentInfo:(void 0).userAgent.info(),renderCapabilitiesDesc:(void 0).capabilities.desc(),renderConfigDesc:(void 0).config.desc()},this.initParam),{cdnPath:this.cdnPath})}),this.sendCanvas(),s().revokeObjectURL(i)}else{const{url:t,status:i}=e;this.isVBInitializing=!1,r("Fetch worker file failed. url: ".concat(t,", status: ").concat(i))}}catch(t){this.isVBInitializing=!1,r(t)}}))))),this.initPromise)}send_frame(e){this.isVBReady&&("format"in e?this.postMessage({cmd:t.VB_SEND_FRAME,payload:e},[e]):this.postMessage({cmd:t.VB_SEND_FRAME,payload:e},[e.data.buffer]))}Crop_Mask_Bg_16V9(){let t,e,r,i=0,s=16/9,n=this.bgImage.width,a=this.bgImage.height;return s*a>=n?(r=n,i=n/s,t=0,e=(a-i)/2):(r=a*s,i=a,t=(n-r)/2,e=0),{sx:t,sy:e,sw:r,sh:i}}set_background_image(e){if(this.bgImage=e,!this.isVBReady)return!1;const r=this.Crop_Mask_Bg_16V9();let i,s,n,a,o,u;i=r.sx,s=r.sy,n=r.sw,a=r.sh,n>1920?(o=1920,u=1080):(o=n,u=a),this.bgConvertCanvas||(this.bgConvertCanvas=new OffscreenCanvas(o,u)),this.bgConvertCanvas.width=o,this.bgConvertCanvas.height=u;let c=null;try{c=this.bgConvertCanvas.getContext("2d",{willReadFrequently:!0})}catch(t){}finally{c||(c=this.bgConvertCanvas.getContext("2d"))}if(!c)return!1;c.drawImage(e,i,s,n,a,0,0,this.bgConvertCanvas.width,this.bgConvertCanvas.height);let h=c.getImageData(0,0,this.bgConvertCanvas.width,this.bgConvertCanvas.height);return this.postMessage({cmd:t.VB_UPDATE_BG,payload:h}),"close"in e&&e.close(),!0}set_background_blur(){this.isVBReady&&this.postMessage({cmd:t.VB_UPDATE_BG,payload:"blur"})}handle_message_from_vb_worker(e){const{cmd:r}=e.data;switch(G.EXTERNAL_EVENTS.has(r)&&(r!==t.VB_GENERATED_FRAME||this._needFrame)&&this.callback&&this.callback(e.data),r){case t.VB_MODEL_READY:this.vbLoadingTimer.start();break;case t.VB_PREDICT_DONE:{const{payload:t}=e.data;this.vbLoadingTimer.isVBPredictDone=!0,this.vbLoadingTimer.clear(),this._backend=t;break}case t.VB_INIT_FAILED:{const{payload:t}=e.data;this.isVBInitializing=!1,this.initReject(t);break}case t.VB_INIT_SUCCESS:this.isVBReady=!0,this.isVBInitializing=!1,this.bgImage&&this.set_background_image(this.bgImage),this.generateVBStream(),this.initResolve();break;case t.VB_REQUEST_FRAME:if(this.updateConstraints(),this.captureVideoEle&&this.isVideoPlaying(this.captureVideoEle))if(window.VideoFrame){if(this.isMetadataLoaded)try{const t=new VideoFrame(this.captureVideoEle,{timestamp:1e3*performance.now()});this.send_frame(t),t.close()}catch(e){this.callback&&!this.isReportVideoFrameError&&(this.callback({cmd:t.VB_WORKER_ERROR,payload:e}),this.isReportVideoFrameError=!0)}}else if(this.captureCtx){this.captureCtx.drawImage(this.captureVideoEle,0,0);const t=this.captureCtx.getImageData(0,0,this.captureVideoEle.videoWidth,this.captureVideoEle.videoHeight);this.streamRender&&this.isStreamEnabled&&!this.isEnabled&&this.streamRender.render(t),this.send_frame(t)}break;case t.VB_GENERATED_FRAME:{const t=e.data.payload,{data_ptr:r}=t;this.streamRender&&this.isStreamEnabled&&this.streamRender.render(t),r&&this.freeMemory(r);break}case t.VB_UPDATE_STATS:this.stats=e.data.payload;break;case t.VB_RESOLUTION_CHANGE:{const{width:t,height:r}=e.data.payload;this.stats.width=t,this.stats.height=r}}}onMessage(t){this.callback=t}createCaptureEle(){window.MediaStreamTrackProcessor||(this.captureVideoEle=document.querySelector("#".concat(G.VB_CAPTURE_VIDEO)),this.captureVideoEle||(this.captureVideoEle=document.createElement("video"),this.captureVideoEle.autoplay=!0,this.captureVideoEle.playsInline=!0,this.captureVideoEle.id=G.VB_CAPTURE_VIDEO,this.captureVideoEle.style.position="fixed",this.captureVideoEle.style.width="1px",this.captureVideoEle.style.height="1px",this.captureVideoEle.style.bottom="0px",this.captureVideoEle.style.right="0px",this.captureVideoEle.muted=!0,document.body.appendChild(this.captureVideoEle)),this.captureCanvas||window.VideoFrame||(this.captureCanvas=document.createElement("canvas"),this.captureCtx=this.captureCanvas.getContext("2d")))}isVideoPlaying(t){return(t.paused||t.ended)&&t.play(),t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2}postMessage(t,e){var r,i;e?null===(r=this.worker)||void 0===r||r.postMessage(t,e):null===(i=this.worker)||void 0===i||i.postMessage(t)}updateStreamCanvasSize(e,r){this.streamCanvas&&(this.isSafari?this.postMessage({cmd:t.VB_CHANGE_STREAM_CANVAS_SIZE,payload:{width:e,height:r}}):(this.streamCanvas.width=e,this.streamCanvas.height=r))}updateConstraints(){const e=this.videoStream.getVideoTracks()[0],{width:r,height:i,frameRate:s}=e.getSettings();r&&i&&(!this.streamCanvas||r===this.streamCanvas.width&&i===this.streamCanvas.height||this.updateStreamCanvasSize(r,i),this.captureCanvas&&(r!==this.captureCanvas.width&&(this.captureCanvas.width=r),i!==this.captureCanvas.height&&(this.captureCanvas.height=i))),s&&this.frameRate!=Math.min(s,24)&&(this.frameRate=Math.min(s,24),this.postMessage({cmd:t.VB_UPDATE_FRAME_RATE,payload:this.frameRate}))}captureVideo(e){return N(this,void 0,void 0,(function*(){if(this.shouldStopCapture=!1,this.isVBReady||this.isVBInitializing?this.isVBInitializing&&(yield this.initPromise):yield this.initialize(),this.shouldStopCapture)return this.shouldStopCapture=!1,Promise.reject("The capture was stopped");if(this.isCapturing)return Promise.reject("Capture is already started");let r=!0;if("id"in e){if(!e.active)return Promise.reject("stream is not active");this.videoStream&&this.videoStream.id===e.id?r=!1:(this.videoStream&&this.stopCapture(),this.videoStream=e)}else if(this.videoStream&&this.captureConf===e)r=!1;else{this.videoStream&&this.stopCapture(),this.isCapturing=!0;try{this.videoStream=yield navigator.mediaDevices.getUserMedia(Object.assign(Object.assign({},e),{audio:!1})),this.captureConf=e,this.isCapturing=!1}catch(t){return this.isCapturing=!1,Promise.reject(t)}}if(this.createCaptureEle(),r){let e;if(!(e=this.videoStream.getVideoTracks()[0]))return Promise.reject("No video track in stream");{const r=e.getSettings(),{width:i=0,height:s=0,frameRate:n=24}=r;if(this.updateStreamCanvasSize(i,s),this.frameRate=Math.min(n,24),window.MediaStreamTrackProcessor){this.trackProcessor=new window.MediaStreamTrackProcessor({track:e});const r=this.trackProcessor.readable;this.postMessage({cmd:t.VB_START,payload:{videoStream:r,frameRate:this.frameRate}},[r])}else this.captureVideoEle&&(this.isMetadataLoaded=!1,this.captureVideoEle.addEventListener("loadedmetadata",this.handleLoadMetadata),this.captureVideoEle.srcObject=this.videoStream,this.captureVideoEle.play(),this.captureCanvas&&(this.captureCanvas.width=i,this.captureCanvas.height=s),this.postMessage({cmd:t.VB_START,payload:{frameRate:this.frameRate}}))}}else{if(this.isVBRunning)return;this.videoStream.getVideoTracks()[0].enabled=!0,this.captureVideoEle&&this.captureVideoEle.play(),this.postMessage({cmd:t.VB_START})}return this.isVBRunning=!0,this.shouldStopCapture?(this.stopCapture(),this.shouldStopCapture=!1,Promise.reject("The capture was stopped")):void 0}))}stopCapture(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.videoStream?(this.postMessage({cmd:t.VB_STOP,payload:e}),this.captureVideoEle&&this.captureVideoEle.pause(),this.videoStream&&e&&(this.videoStream.getTracks().forEach((t=>{t.stop()})),this.videoStream=null),this.isVBRunning=!1):this.shouldStopCapture=!0}setMirror(e){this.postMessage({cmd:t.VB_MIRROR,payload:e})}freeMemory(e){this.isVBReady&&this.postMessage({cmd:t.VB_FREE_MEMORY,payload:e})}startReceiveMode(t){return t&&(this.captureConf=t),this.msgChannel||(this.msgChannel=new MessageChannel,this.msgChannel.port1.onmessage=t=>{var e;const{type:r,frame:i}=t.data;this.receiveTimer&&clearTimeout(this.receiveTimer),"UNIFIED_VB_FRAME"===r&&i?(null===(e=this.msgChannel)||void 0===e||e.port1.postMessage({type:"UNIFIED_VB_ACK"}),this.isEnabled?(this.isVBRunning&&this.stopCapture(),this.renderFrame(i)):i.close(),this.isSafari||(this.receiveTimer=setTimeout((()=>{this.captureConf&&!this.isVBRunning&&this.captureVideo(this.captureConf)}),1e3))):"UNIFIED_VB_PAUSE"!==r&&r!==o||(this.captureConf&&!this.isVBRunning&&this.captureVideo(this.captureConf),r===o&&this.msgChannel&&(this.msgChannel.port1.onmessage=null,this.msgChannel=null))}),this.msgChannel.port2}enable(){this.postMessage({cmd:t.VB_TOGGLE_VB,payload:!0}),this.isEnabled=!0}disable(){this.postMessage({cmd:t.VB_TOGGLE_VB,payload:!1}),this.isEnabled=!1,!this.isVBRunning&&this.msgChannel&&this.captureConf&&(this.captureVideo(this.captureConf).catch((t=>{})),clearTimeout(this.receiveTimer))}renderFrame(e){return N(this,void 0,void 0,(function*(){this.postMessage({cmd:t.VB_RENDER_FRAME,payload:e}),"close"in e&&e.close()}))}destory(){this.destoryed=!0,this.stopCapture(),this.vbLoadingTimer.clear(),this.msgChannel&&(this.msgChannel.port2.onmessage=null),this.captureVideoEle&&document.body.removeChild(this.captureVideoEle),this.worker&&(this.worker.removeEventListener("message",this.handle_message_from_vb_worker),this.worker.terminate())}createStream(){if(this.isStreamEnabled=!0,this.vbStream)return this.postMessage({cmd:t.VB_GENERATE_STREAM}),this.vbStream;if(window.MediaStreamTrackGenerator)this.vbTrackGenerator=new MediaStreamTrackGenerator({kind:"video"}),this.vbStream=new MediaStream([this.vbTrackGenerator]);else{if(this.streamCanvas=document.createElement("canvas"),this.videoStream){const t=this.videoStream.getVideoTracks()[0];if(t){const{width:e=0,height:r=0}=t.getSettings();this.streamCanvas.width=e,this.streamCanvas.height=r}}this.vbStream=this.streamCanvas.captureStream(24)}const e=this.vbStream.getVideoTracks()[0];return e&&(e.getStats=()=>this.stats),this.isVBReady&&this.generateVBStream(),this.vbStream}stopStream(){this.vbStream&&(this.isStreamEnabled=!1,this.postMessage({cmd:t.VB_STOP_STREAM}))}handleLoadMetadata(){this.isMetadataLoaded=!0,this.captureVideoEle.removeEventListener("loadedmetadata",this.handleLoadMetadata)}}G.VB_WORKER_NAME="vb_worker",G.VB_CAPTURE_VIDEO="VB_CAPTURE_VIDEO",G.VB_STREAM_CANVAS="VB_STREAM_CANVAS",G.EXTERNAL_EVENTS=new Set([t.VB_GENERATED_FRAME,t.VB_INIT_FAILED,t.VB_INIT_SUCCESS,t.VB_MODEL_READY,t.VB_PREDICT_DONE,t.VB_VIDEO_FORMAT_UNSUPPORTED,t.VB_WORKER_ERROR,t.VB_GENERATE_FIRST_FRAME,t.VB_RESOLUTION_CHANGE]);const j=G;if(document){const t=document.currentScript;if(t){const e=t.src;if(e){let t=e.indexOf("/vb.min.js");-1!==t&&(G.cdnPath=e.substring(0,t))}}}})(),i.default})()));
//# sourceMappingURL=https://d1cdksi819e9z7.cloudfront.net/sourcemap/vb.min.js-0eb6fe9a803fe895e4e0.map
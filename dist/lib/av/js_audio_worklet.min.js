!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=25)}([function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,r){var n=r(17);function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,n(i.key),i)}}t.exports=function(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,r){var n=r(24)();t.exports=n;try{regeneratorRuntime=n}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},function(t,e){function r(t,e,r,n,i,o,s){try{var a=t[o](s),u=a.value}catch(t){return void r(t)}a.done?e(u):Promise.resolve(u).then(n,i)}t.exports=function(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var s=t.apply(e,n);function a(t){r(s,i,o,a,u,"next",t)}function u(t){r(s,i,o,a,u,"throw",t)}a(void 0)}))}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,r){"use strict";var n,i,o,s,a,u,h,c=r(6),f=r(11),l=r(5),d={WORKLET:1,ENCODE:2,DECODE:3,WORKLET_APM_ONLY:4},p={MUTE:0,UNMUTE:1,LEAVED:2,MUTE_APM_ONLY:3,UNMUTE_APM_ONLY:4},b=0;var _=0;var v=!1;var m=null;var g=!1;e.a={WASMTYPE:d,AUDIO_STATE:p,onWasmModuleReady:function(t){if(!t)return console.warn("[AudioWASMAdapter] Module undefined");t.cwrap("_Heartbeat","number",["number"]),o=t.cwrap("_MuteUnmuteState","number",["number","number"]),s=t.cwrap("_Switch_Original_Sound","number",["number","boolean","boolean","boolean","boolean"]),a=t.cwrap("_Deliver_Recorded_Data","number",["number","number","number","number","number","number"]),u=t.cwrap("_Switch_Denoise","number",["number","number","number","number"]),h=t.cwrap("_Audio_Init","number",["number","string","string","number","number","boolean","boolean","boolean","number","boolean"])},setAudioInstanceAndType:function(t,e,r){n=t,e&&(b=e),r&&(i=r)},muteUnmuteState:function(t){if(null!=Object.values(p).find((function(e){return e==t})))return n?void(b!=d.WORKLET_APM_ONLY&&(o(n,t),Object(c.a)("muteUnmuteState: "+t))):Object(c.a)("muteUnmuteState: -1")},switchOriginalSound:function(t,e,r,i){n&&s(n,t,e,r,i)},deliverRecordedData:function(t,e,r,i){n&&a(n,t,e,0,r,i)},switchDenoise:function(t,e){n&&(v=t,u(n,!!t,3,!!e))},audioInit:function(t,e,r,n,i,o,s,a,u,c){return h(t,e,r,n,i,o,s,a,u,c)},setDecoder:function(t){m=t},needCalculateDenoiseOutput:function(){g=!0},onMonitorLogWASM:function(t,e){if(!(e<=0)){var r=Module.HEAPU8.subarray(t,t+e),n=String.fromCharCode.apply(null,r);n&&(b==d.ENCODE||b==d.DECODE?Object(c.a)(n):b==d.WORKLET?i&&i.port&&Object(c.a)(n,i.port):b==d.WORKLET_APM_ONLY&&i.port&&i.port.postMessage({status:"SPEECH_LOG",data:{log:n}}))}},onMuteSpeechWarningWASM:function(){postMessage({status:l.c})},onAudioLevelWASM:function(t,e,r){var n;b!=d.ENCODE&&b!=d.WORKLET_APM_ONLY||1==t&&(0===e&&0===_||(_=e,b===d.ENCODE?postMessage({status:l.a,value:e}):null!==(n=i)&&void 0!==n&&n.port&&i.port.postMessage({status:l.a,data:e})))},onAPMProcessedPCMWASM:function(t,e,r,n){if(v){var o=Module.HEAPF32.subarray(t/4,t/4+e);if(m){if(g){g=!1;var s=Object(f.a)(o,2).sumRms,a=Object(f.c)(s);i.port&&i.port.postMessage({status:"AUDIO_LEVEL_R16_DENOISE",level:a})}m.push([o])}}}}},function(t,e,r){"use strict";r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return i})),r.d(e,"c",(function(){return o}));var n=57,i=38,o=121},function(t,e,r){"use strict";var n=r(0),i=r.n(n),o=r(1),s=r.n(o);r(3),r(2);function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e)return e.postMessage({status:48,data:t});postMessage({status:48,data:t})}r.d(e,"a",(function(){return a}));var u=function(){function t(){i()(this,t),this.ssrcInfoMap=new Map,this.timer=null}return s()(t,[{key:"updateSSRCInfo",value:function(t,e){this.ssrcInfoMap.has(t)||this.ssrcInfoMap.set(t,{timeList:[],lastTime:0,fps:0}),this._calculateFPS(t,e),this._removeZeroFPS()}},{key:"_calculateFPS",value:function(t,e){var r=this.ssrcInfoMap.get(t);if(r.timeList.push(e),r.lastTime=e,r.timeList.length>2&&r.timeList.length%5==0){var n=r.timeList[0],i=r.timeList[r.timeList.length-1];if(i-n>=1e3){var o=Math.floor(1e3/((i-n)/(r.timeList.length-1)));r.fps!==o&&(this._notifyFPS(t,o),r.fps=o),r.timeList=[]}}r.timeList.length>30&&(r.timeList=r.timeList.slice(r.timeList.length-30))}},{key:"_removeZeroFPS",value:function(){var t=this;this.ssrcInfoMap.forEach((function(e,r){var n=t.ssrcInfoMap.get(r);n&&Date.now()-n.lastTime>2e3&&(t.ssrcInfoMap.delete(r),t._notifyFPS(r,0))}))}},{key:"_notifyFPS",value:function(t,e){postMessage({status:66.6,data:{ssrc:t,fps:e}})}},{key:"_checkIfNewFrameComing",value:function(){var t=this;this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout((function(){t._removeZeroFPS(),t.timer=null}),2500)}}]),t}();new Map,new u},function(t,e){function r(e){return t.exports=r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.__esModule=!0,t.exports.default=t.exports,r(e)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){function r(e){return t.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,r(e)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,r){"use strict";r.d(e,"b",(function(){return u})),r.d(e,"a",(function(){return h}));var n=r(0),i=r.n(n),o=r(1),s=r.n(o),a=r(12),u=function(){function t(e,r,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(i()(this,t),this.STATE_READ_READY=0,this.STATE_READ_INDEX=1,this.STATE_WRITE_READY=2,this.STATE_WRITE_INDEX=3,this.STATE_DATA_COUNT=4,this.STATE_CACHE_SIZE=5,this.STATY_READY_NO=0,this.STATY_READY_YES=1,this.sabState=new Uint32Array(e),this.sabBuffer=new Float32Array(r),this.perFrameLength=n,this.writeChannelNumb=o,this.bufferLen=this.sabBuffer.length,this.supportSpecialOptimization=this.bufferLen%n==0,this.bufferIndex=null,this.supportSpecialOptimization){var s=this.bufferLen/n;this.bufferIndex=[];for(var u=0;u<s;u++)this.bufferIndex.push(this.sabBuffer.subarray(u*n,u*n+n))}this.placeBuffer=new Float32Array(this.perFrameLength),this.QUANTUM_SIZE=128,this.CACHE_SIZE_MAX_VALUE=Math.floor(Math.floor(this.bufferLen/this.QUANTUM_SIZE)/2),this.CACHE_SIZE_MIN_VALUE=6,this.CACHE_SIZE_MAX_VALUE<this.CACHE_SIZE_MIN_VALUE&&(this.CACHE_SIZE_MAX_VALUE=this.CACHE_SIZE_MIN_VALUE),this.setCacheSize(this.CACHE_SIZE_MIN_VALUE),this._counter=0,this.onCacheSizeChange=null,this.cacheSizeController=new a.a}return s()(t,[{key:"getCacheSize",value:function(){return Atomics.load(this.sabState,this.STATE_CACHE_SIZE)}},{key:"setCacheSize",value:function(t){t>this.CACHE_SIZE_MAX_VALUE&&(t=this.CACHE_SIZE_MAX_VALUE),t<this.CACHE_SIZE_MIN_VALUE&&(t=this.CACHE_SIZE_MIN_VALUE),this.onCacheSizeChange&&this.cacheSizeController.shouldSendCacheSize(t)&&this.onCacheSizeChange(t),Atomics.store(this.sabState,this.STATE_CACHE_SIZE,t)}},{key:"setQuantumSize",value:function(t){this.QUANTUM_SIZE=t,this.CACHE_SIZE_MAX_VALUE=Math.floor(Math.floor(this.bufferLen/this.QUANTUM_SIZE)/2),this.CACHE_SIZE_MAX_VALUE<this.CACHE_SIZE_MIN_VALUE&&(this.CACHE_SIZE_MAX_VALUE=this.CACHE_SIZE_MIN_VALUE)}},{key:"isNeedMoreData",value:function(){var t=Atomics.load(this.sabState,this.STATE_CACHE_SIZE);return Atomics.load(this.sabState,this.STATE_DATA_COUNT)<t*this.QUANTUM_SIZE}},{key:"shouldAdjustCacheBuffer",value:function(){this._counter>0&&this.setCacheSize(this.getCacheSize()+1)}},{key:"clear",value:function(){this.sabState&&(this.sabState[this.STATE_READ_READY]=0,this.sabState[this.STATE_READ_INDEX]=0,this.sabState[this.STATE_WRITE_READY]=0,this.sabState[this.STATE_WRITE_INDEX]=0,this.sabState[this.STATE_DATA_COUNT]=0),this._counter=0}},{key:"setWriteReady",value:function(){this.sabState[this.STATE_WRITE_READY]=this.STATY_READY_YES}},{key:"isReady",value:function(){return this.sabState[this.STATE_WRITE_READY]&&this.sabState[this.STATE_READ_READY]}},{key:"getDataCount",value:function(){return Atomics.load(this.sabState,this.STATE_DATA_COUNT)}},{key:"write",value:function(t){if(void 0!==t[0]&&t[0].length*this.writeChannelNumb===this.perFrameLength){var e=this.sabState[this.STATE_READ_READY];if(this.sabState[this.STATE_WRITE_READY]||(this.sabState[this.STATE_WRITE_READY]=this.STATY_READY_YES,this.sabState[this.STATE_WRITE_INDEX]=0),e)return this.supportSpecialOptimization?this.writeSpecial(t):this.writeNormal(t)}}},{key:"writeNormal",value:function(t){for(var e=this.sabState[this.STATE_WRITE_INDEX],r=0;r<this.writeChannelNumb;r++)for(var n=0;t[r]&&n<t[r].length;n++)this.sabBuffer[(e+n*this.writeChannelNumb+r)%this.bufferLen]=t[r][n];(e+=this.perFrameLength)>=this.bufferLen&&(e-=this.bufferLen),this.sabState[this.STATE_WRITE_INDEX]=e,Atomics.add(this.sabState,this.STATE_DATA_COUNT,this.perFrameLength)}},{key:"writeSpecial",value:function(t){for(var e=this.sabState[this.STATE_WRITE_INDEX],r=0;r<this.writeChannelNumb;r++)for(var n=0;t[r]&&n<t[r].length;n++)this.bufferIndex[e][n*this.writeChannelNumb+r]=t[r][n];e=(e+1)%this.bufferIndex.length,this.sabState[this.STATE_WRITE_INDEX]=e,Atomics.add(this.sabState,this.STATE_DATA_COUNT,this.perFrameLength)}},{key:"read",value:function(){var t=this.sabState[this.STATE_READ_READY],e=this.sabState[this.STATE_WRITE_READY];if(t||(this.sabState[this.STATE_READ_READY]=this.STATY_READY_YES,this.sabState[this.STATE_READ_INDEX]=0),!e)return null;var r=this.supportSpecialOptimization?this.readSpecial():this.readNormal();return null===r?this.shouldAdjustCacheBuffer():this._counter++,r}},{key:"readNormal",value:function(){var t=this.sabState[this.STATE_READ_INDEX],e=Atomics.load(this.sabState,this.STATE_DATA_COUNT);if(e<this.perFrameLength)return null;if(e>this.bufferLen){var r=Math.ceil((e-this.bufferLen)/this.perFrameLength)+1;t=(r*this.perFrameLength+t)%this.bufferLen,Atomics.sub(this.sabState,this.STATE_DATA_COUNT,r*this.perFrameLength)}var n=null;if(this.bufferLen-t>=this.perFrameLength)n=this.sabBuffer.subarray(t,t+this.perFrameLength);else{var i=this.sabBuffer.subarray(t),o=this.sabBuffer.subarray(0,this.perFrameLength-i.length);(n=this.placeBuffer).set(i),n.set(o,i.length)}return(t+=this.perFrameLength)>=this.bufferLen&&(t-=this.bufferLen),this.sabState[this.STATE_READ_INDEX]=t,Atomics.sub(this.sabState,this.STATE_DATA_COUNT,this.perFrameLength),n}},{key:"readSpecial",value:function(){var t=this.sabState[this.STATE_READ_INDEX],e=Atomics.load(this.sabState,this.STATE_DATA_COUNT);if(e<this.perFrameLength)return null;if(e>this.bufferLen){var r=Math.ceil((e-this.bufferLen)/this.perFrameLength)+1;t=(r+t)%this.bufferIndex.length,Atomics.sub(this.sabState,this.STATE_DATA_COUNT,r*this.perFrameLength)}var n=this.bufferIndex[t];return t=(t+1)%this.bufferIndex.length,this.sabState[this.STATE_READ_INDEX]=t,Atomics.sub(this.sabState,this.STATE_DATA_COUNT,this.perFrameLength),n}}]),t}(),h=function(){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;i()(this,t),this.rframes=e,this.wframes=r,this.writeChannelNumb=n,this.cap=this.lcm(e,r),this.buffer=new Float32Array(this.cap),this.remain=0,this.woffset=0,this.roffset=0}return s()(t,[{key:"gcd",value:function(t,e){return 0===e?t:this.gcd(e,t%e)}},{key:"lcm",value:function(t,e){return t/this.gcd(t,e)*e}},{key:"push",value:function(t){if(null!=t[0]&&t[0].length*this.writeChannelNumb!=this.wframes)return console.error("[Audio] critical error in AudioWorklet: data.length:",t.length,"this.woffset:",this.woffset,"this.cap:",this.cap),void _workletPrinter.error({message:"[Audio] critical error in AudioWorklet: ".concat(t.length," ").concat(this.woffset," ").concat(this.cap)});for(var e=0;e<this.writeChannelNumb;e++)for(var r=0;r<t[0].length;r++)this.buffer[(this.woffset+r*this.writeChannelNumb+e)%this.cap]=t[e]?t[e][r]:t[0][r];this.woffset+=this.wframes,this.remain+=this.wframes,this.woffset>=this.cap&&(this.woffset=this.woffset%this.cap)}},{key:"read",value:function(){if(!this.hasData())return null;var t=this.buffer.subarray(this.roffset,this.roffset+this.rframes);return this.remain-=this.rframes,this.roffset+=this.rframes,this.roffset>=this.cap&&(this.roffset=this.roffset%this.cap),t}},{key:"hasData",value:function(){return this.remain>=this.rframes}},{key:"clear",value:function(){this.buffer.fill(0),this.remain=0,this.woffset=0,this.roffset=0}}]),t}()},function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return o})),r.d(e,"c",(function(){return s}));r(19),r(0),r(1);var n=[0,1,2,3,4,4,5,5,5,5,6,6,6,6,6,7,7,7,7,8,8,8,9,9,9,9,9,9,9,9,9,9,9];function i(t,e){for(var r=0,n=0,i=0;i<t.length;i+=e){n+=t[i]*t[i];var o=Math.abs(t[i]);o>r&&(r=o)}return{sumRms:n/t.length/e,absMax:r}}function o(t){if("number"!=typeof t||t<0||t>1)return-1;var e=parseInt(32768*t/1e3);return 0==e&&t>250&&(e=1),n[e]}function s(t){return t>.1995?15:t>.0794?14:t>.0316?13:t>.0126?12:t>.005?11:t>.002?10:t>79433e-8?9:t>31623e-8?8:t>12589e-8?7:t>50119e-9?6:t>19953e-9?5:t>79433e-10?4:t>31623e-10?3:t>12589e-10?2:t>5.0119e-7?1:0}},function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var n=r(0),i=r.n(n),o=r(1),s=r.n(o),a=function(){function t(){i()(this,t),this.cacheSize=0,this.sameCacheSizeCounter=0}return s()(t,[{key:"shouldSendCacheSize",value:function(t){return t===this.cacheSize&&this.sameCacheSizeCounter++,(this.cacheSize!==t||200===this.sameCacheSizeCounter)&&(this.sameCacheSizeCounter=0,this.cacheSize=t,!0)}}]),t}()},function(t,e){function r(e,n){return t.exports=r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},t.exports.__esModule=!0,t.exports.default=t.exports,r(e,n)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,r){var n=r(13);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&n(t,e)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,r){var n=r(8).default,i=r(9);t.exports=function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return i(t)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,r){var n=r(7),i=r(13),o=r(20),s=r(21);function a(e){var r="function"==typeof Map?new Map:void 0;return t.exports=a=function(t){if(null===t||!o(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,e)}function e(){return s(t,arguments,n(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),i(e,t)},t.exports.__esModule=!0,t.exports.default=t.exports,a(e)}t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,r){var n=r(8).default,i=r(23);t.exports=function(t){var e=i(t,"string");return"symbol"===n(e)?e:String(e)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var n=r(0),i=r.n(n),o=r(1),s=r.n(o),a=function(){function t(){i()(this,t),this.messageQueue=[],this.auidoNodePort,this.userAgent="",this.isSafari=!1,this.debug=this.debug.bind(this),this.log=this.log.bind(this),this.warn=this.warn.bind(this),this.error=this.error.bind(this),this.print_=this.print_.bind(this)}return s()(t,[{key:"setUserAgent",value:function(t){this.userAgent=t,this.userAgent.match(/AppleWebKit\/(\d+)\./)&&(this.isSafari=!0)}},{key:"setAuidoNodePort",value:function(t){this.auidoNodePort=t}},{key:"debug",value:function(t){t="[Audio][Worklet]"+t;for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];this.print_({level:"debug",message:t,data:r})}},{key:"log",value:function(t){t="[Audio][Worklet]"+t;for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];this.print_({level:"log",message:t,data:r})}},{key:"warn",value:function(t){t="[Audio][Worklet]"+t;for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];this.print_({level:"warn",message:t,data:r})}},{key:"error",value:function(t){t="[Audio][Worklet]"+t;for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];this.print_({level:"error",message:t,data:r})}},{key:"print_",value:function(t){if(this.messageQueue.push(t),this.auidoNodePort)for(;this.messageQueue.length;){var e=this.messageQueue.shift();this._postToWorkerPrint(e)}}},{key:"_postToWorkerPrint",value:function(t){this.auidoNodePort&&this.auidoNodePort.postMessage({status:"workletMessage",data:{level:t.level,message:t.message,data:t.data}})}}]),t}()},function(t,e,r){var n=r(17);t.exports=function(t,e,r){return(e=n(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t){return-1!==Function.toString.call(t).indexOf("[native code]")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,r){var n=r(13),i=r(22);function o(e,r,s){return i()?(t.exports=o=Reflect.construct.bind(),t.exports.__esModule=!0,t.exports.default=t.exports):(t.exports=o=function(t,e,r){var i=[null];i.push.apply(i,e);var o=new(Function.bind.apply(t,i));return r&&n(o,r.prototype),o},t.exports.__esModule=!0,t.exports.default=t.exports),o.apply(null,arguments)}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,r){var n=r(8).default;t.exports=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,r){var n=r(8).default;function i(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t.exports=i=function(){return e},t.exports.__esModule=!0,t.exports.default=t.exports;var e={},r=Object.prototype,o=r.hasOwnProperty,s=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",h=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof b?e:b,o=Object.create(i.prototype),a=new x(n||[]);return s(o,"_invoke",{value:T(t,r,a)}),o}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p={};function b(){}function _(){}function v(){}var m={};f(m,u,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(L([])));y&&y!==r&&o.call(y,u)&&(m=y);var A=v.prototype=b.prototype=Object.create(m);function S(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){var r;s(this,"_invoke",{value:function(i,s){function a(){return new e((function(r,a){!function r(i,s,a,u){var h=d(t[i],t,s);if("throw"!==h.type){var c=h.arg,f=c.value;return f&&"object"==n(f)&&o.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(h.arg)}(i,s,r,a)}))}return r=r?r.then(a,a):a()}})}function T(t,e,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return k()}for(r.method=i,r.arg=o;;){var s=r.delegate;if(s){var a=w(s,r);if(a){if(a===p)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=d(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function w(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var i=d(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,p;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function L(t){if(t){var e=t[u];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:k}}function k(){return{value:void 0,done:!0}}return _.prototype=v,s(A,"constructor",{value:v,configurable:!0}),s(v,"constructor",{value:_,configurable:!0}),_.displayName=f(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,f(t,c,"GeneratorFunction")),t.prototype=Object.create(A),t},e.awrap=function(t){return{__await:t}},S(E.prototype),f(E.prototype,h,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var s=new E(l(t,r,n,i),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(A),f(A,c,"Generator"),f(A,u,(function(){return this})),f(A,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=L,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(M),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return s.type="throw",s.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],s=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var a=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),M(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;M(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,r){"use strict";r.r(e);var n=r(9),i=r.n(n),o=r(14),s=r.n(o),a=r(15),u=r.n(a),h=r(7),c=r.n(h),f=r(16),l=r.n(f),d=r(0),p=r.n(d),b=r(1),_=r.n(b),v=r(18),m=function(t,e){this._BYTES_PER_ELEMENT=e,this.capacity=(t.byteLength-8)/e,this.usableCapacity=this.capacity-1,this.buf=t,this.write_ptr=new Uint32Array(this.buf,0,1),this.read_ptr=new Uint32Array(this.buf,4,1),this.storageUint8s=new Uint8Array(this.buf,8,t.byteLength-8)};m.prototype.available_read=function(){var t=Atomics.load(this.read_ptr,0),e=Atomics.load(this.write_ptr,0);return this._available_read(t,e)},m.prototype._available_read=function(t,e){return(e+this.capacity-t)%this.capacity},m.prototype.dequeue=function(){var t=Atomics.load(this.read_ptr,0),e=new Uint32Array(this.buf,t*this._BYTES_PER_ELEMENT+8,1);return this.storageUint8s.subarray(t*this._BYTES_PER_ELEMENT+4,t*this._BYTES_PER_ELEMENT+4+e[0])},m.prototype.addReadPtr=function(){var t=Atomics.load(this.read_ptr,0);Atomics.store(this.read_ptr,0,(t+1)%this.capacity)},m.prototype.getReaderPtr=function(){return this.read_ptr[0]},m.prototype.setReaderPtr=function(t){Atomics.store(this.read_ptr,0,t%this.capacity)},m.prototype.get=function(t){var e=t%this.capacity,r=new Uint32Array(this.buf,e*this._BYTES_PER_ELEMENT+8,1);return this.storageUint8s.subarray(e*this._BYTES_PER_ELEMENT+4,e*this._BYTES_PER_ELEMENT+4+r[0])};var g=m,y=r(5),A=r(4),S=(r(6),r(10)),E=r(12);function T(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=c()(t);if(e){var i=c()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return u()(this,r)}}r.d(e,"Update_SSRC_Time",(function(){return K})),r.d(e,"Get_SSRC_Latest_Time",(function(){return J})),globalThis.onerror=function(t){_workletPrinter.error(t.stack)},globalThis.onWasmModuleReady=function(){A.a.onWasmModuleReady(Module),O=Module.cwrap("_Audio_Init","number",["number","string","string","number","number","boolean","boolean","boolean","number","boolean"]),(I=O(j,z,W,0,0,!0,!1,F,1))?A.a.setAudioInstanceAndType(I,A.a.WASMTYPE.WORKLET,rt):_workletPrinter.error("audio_handle not exist"),N=Module.cwrap("_Audio_Decode","number",["number","number","number","number"]),B=Module.cwrap("_Get_Mixed_Audio","number",["number","number","number","number"]),U=Module.cwrap("_setMultiViewFlag","number",["number","boolean"]),w=Module.cwrap("_Interpretation_Configure","number",["number","number","number","number"]),M=Module.cwrap("_Set_Speech_Volume_Level","number",["number","number","number"]),P=Module._malloc(4*X),Module.HEAPU32.subarray(P/4,P/4+X),U(I,H),x=Module._malloc(Q),Module.HEAP8.subarray(x,x+Q),rt.port.postMessage({status:"WASM_INIT_SUCCESS",data:{audio_handle:0!==I}})},globalThis.onAbort=function(t){_workletPrinter.error("WASM onAbort "+(t?t.message:""),t)},globalThis.preInit=function(t){_workletPrinter.debug("WASM preInit"+(t?t.message:""),t)},globalThis.preRun=function(t){_workletPrinter.debug("WASM preRun"+(t?t.message:""),t)},globalThis._workletPrinter=new v.a,globalThis.AudioWasmAdapter=A.a;var w,P,M,x,L=function(){function t(){p()(this,t),this.buffList=[],this.cacheMinSize=4,this.cacheMaxSize=16,this.cacheSize=this.cacheMinSize,this.onCacheSizeChange=null,this.onrollbackbuffer=null,this.onneedmoredata=null,this.isReady=!1,this.cacheSizeController=new E.a}return _()(t,[{key:"push",value:function(t){this.isReady=!0,this.buffList.push({buff:t,offset:0})}},{key:"copy",value:function(t,e,r,n){return t.length-e<=r.length-n?(0===e?r.set(t,n):r.set(t.subarray(e),n),t.length-e):(r.set(t.subarray(e,e+r.length-n),n),r.length-n)}},{key:"increaseCacheSize",value:function(){this.isReady&&this.cacheSize++,this.cacheSize>this.cacheMaxSize&&(this.cacheSize=this.cacheMaxSize),this.onCacheSizeChange&&this.isReady&&this.cacheSizeController.shouldSendCacheSize(this.cacheSize)&&this.onCacheSizeChange(this.cacheSize)}},{key:"copyTo",value:function(t){if(0===this.buffList.length)return t.fill(0),void this.increaseCacheSize();var e=this.buffList[0];if(e.buff.length-e.offset>=t.length)this.copy(e.buff,e.offset,t,0),e.offset+=t.length,e.offset===e.buff.length&&(this.buffList.shift(),this.onrollbackbuffer&&this.onrollbackbuffer(e.buff));else{if(this.buffList.length<2)return t.fill(0),void this.increaseCacheSize();var r=this.copy(e.buff,e.offset,t,0);this.buffList.shift(),this.onrollbackbuffer&&this.onrollbackbuffer(e.buff),e=this.buffList[0],r=this.copy(e.buff,e.offset,t,r),e.offset+=r}}},{key:"requestMoreData",value:function(){this.buffList.length<this.cacheSize&&this.onneedmoredata&&this.onneedmoredata()}},{key:"hasData",value:function(){return this.buffList.length>=2}}]),t}(),k=function(){function t(e){p()(this,t),this.buffList=[],this.frameLength=e,this.onframedata=null}return _()(t,[{key:"copy",value:function(t,e,r,n){if(t[0].length*Z<=r.length-n){for(var i=0;i<Z;i++)for(var o=0;t[i]&&o<t[i].length;o++)r[n+o*Z+i]=t[i][o];return(t[0].length-e)*Z}for(var s=0;s<Z;s++)for(var a=0;t[s]&&a<t[s].length&&n+a*Z+s<r.length;a++)r[n+a*Z+s]=t[s][a];return r.length-n}},{key:"rollbackbuffer",value:function(t){this.buffList.push({buff:t,offset:0})}},{key:"push",value:function(t){0===this.buffList.length&&this.buffList.push({buff:new Float32Array(this.frameLength),offset:0});var e=this.buffList[0];if(e.buff.length-e.offset>=t[0].length*Z){var r=this.copy(t,0,e.buff,e.offset);e.offset+=r,e.buff.length===e.offset&&(this.buffList.shift(),this.onframedata&&this.onframedata(e.buff))}else{var n=this.copy(t,0,e.buff,e.offset);if(this.buffList.shift(),this.onframedata&&this.onframedata(e.buff),t[0].length*Z>n){for(var i=[],o=0;o<Z;o++)i.push(t[o].subarray(Math.floor(n/Z)+(n%Z>o?1:0)));this.push(i)}}}}]),t}(),C=function(){function t(e,r){var n=this;p()(this,t),this.context=r,this.decodePort=null,this.encodePort=null,this.captureSize=e/100*Z,this.playBuffer=new L,this.playBuffer.onrollbackbuffer=function(t){n.decodePort},this.playBuffer.onneedmoredata=function(){n.decodePort&&n.decodePort.postMessage({status:1})},this.playBuffer.onCacheSizeChange=function(t){n.decodePort&&n.decodePort.postMessage({status:3,cacheSize:t})},this.quantum=new Float32Array(128*G),this.captureBuffer=new k(this.captureSize),this.captureBuffer.onframedata=function(t){n.encodePort&&n.encodePort.postMessage({command:2,buffer:t},[t.buffer])}}return _()(t,[{key:"setDecodePort",value:function(t){this.decodePort&&this.decodePort.close(),this.decodePort=t,this.decodePort.onmessage=this.handleDecodeData.bind(this)}},{key:"setEncodePort",value:function(t){this.encodePort&&this.encodePort.close(),this.encodePort=t,this.encodePort.onmessage=this.handleEncodeData.bind(this)}},{key:"handleDecodeData",value:function(t){this.context.isPlaying&&this.playBuffer.push(t.data.data)}},{key:"handleEncodeData",value:function(t){switch(t.data.event){case 0:this.captureBuffer.rollbackbuffer(t.data.buffer)}}},{key:"requestMoreData",value:function(){this.playBuffer.requestMoreData()}},{key:"close",value:function(){this.decodePort&&(this.decodePort=null,this.decodePort.close()),this.encodePort&&(this.encodePort=null,this.encodePort.close())}},{key:"write",value:function(t){this.captureBuffer.push(t)}},{key:"read",value:function(){return this.playBuffer.copyTo(this.quantum),this.requestMoreData(),this.quantum}}]),t}(),D="undefined"!=typeof SharedArrayBuffer,R=!0,O=null,N=null,I=null,B=null,U=null,W=0,z=0,F=!1,j=0,Y=0,H=!1,Z=1,G=1,V=null,X=10,Q=1500,q=new Map;function K(t){if(t){var e=t.length/16,r=0,n=0;for(r=0;r<e;r++){var i=0;for(n=16*r+0;n<16*r+4;n++)i+=t[n]*Math.pow(256,n-16*r);i>>=10;var o=0;for(n=16*r+4;n<16*r+12;n++)o+=t[n]*Math.pow(256,n-16*r-4);q.set(i,o)}}}function J(t){t>>=10;var e=q.get(t);return e?(q.set(t,0),e):0}function $(t){var e=t[1];return 4294967296*t[2]+e}globalThis.update_play_time=function(t,e){if(e){var r=new Uint8Array(e),n=Module.HEAP8.subarray(t+0,t+e);if(r.set(n),H){var i;null===(i=rt.videoDecodePort)||void 0===i||i.postMessage({status:1,data:r},[r.buffer])}else{for(var o=new Uint32Array(r.buffer),s=0,a=0,u=0;u<r.length/16;u++){var h=o[4*u];512&h?a=$(o.subarray(4*u,4*u+4)):h>>10==Y>>10&&(s=$(o.subarray(4*u,4*u+4)))}if(!s&&!a)return;rt.port.postMessage({status:y.b,at:s,st:a})}}};var tt=null,et=null;globalThis.frame_callback=function(t,e,r,n,i,o,s,a){tt===t&&et.length==e*s||(et=Module.HEAPF32.subarray(t/4,t/4+e*s),tt=t),V.push([et])};var rt=null,nt=function(t){s()(r,t);var e=T(r);function r(t){var n,o,s;return p()(this,r),s=e.call(this),rt=i()(s),monitorLOG("WIB"),s.port.onmessage=s.handleMessage.bind(i()(s)),s.isPlaying=!1,s.isCapturing=!1,s.wasmModule=null==t||null===(n=t.processorOptions)||void 0===n?void 0:n.wasmModule,t&&t.processorOptions&&(t.processorOptions.audioEncodeChannelsNum&&(Z=t.processorOptions.audioEncodeChannelsNum),t.processorOptions.audioDecodeChannelsNum&&(G=t.processorOptions.audioDecodeChannelsNum)),s.SABConstructor(t&&t.processorOptions?t.processorOptions.sharedBuffer:null),s.noSABConstructor(),globalThis.fsHandler&&globalThis.fsHandler.setPort(s.port),null!=t&&null!==(o=t.processorOptions)&&void 0!==o&&o.userAgent&&_workletPrinter.setUserAgent(t.processorOptions.userAgent),_workletPrinter.setAuidoNodePort(s.port),monitorLOG("WIE"),s}return _()(r,[{key:"SABConstructor",value:function(t){this.sampleRate_=0,this.g_sharedbuffer=t||null,this.encodeSAB=null,this.decodeSAB=null,this.audioEncodePort=null,this.audioDecodePort=null,this.videoDecodePort=null,this.rtpSAB=null,this.stopPlayAudio=!1,V=new S.a(128*G,sampleRate/100*G)}},{key:"noSABConstructor",value:function(){this.audioProcessBuffer=new C(sampleRate,this),this.isRunning=!0}},{key:"handleMessage",value:function(t){var e=t.data,r=e.status,n=e.data;switch(r){case"diableSharedArrayBuffer":D=!1;break;case"disableDecoderinworklet":R=!1;break;case"data":console.info("Dropped audio data before initialized");break;case"stopPlayAudio":this.isPlaying=!1;break;case"stopWorklet":st=!0;break;case"startPlayAudio":this.isPlaying=!0;break;case"StartCaptureAudio":this.isCapturing=!0;break;case"sampleRate":this.sampleRate_=n;break;case"audiowasm":try{initWasm(Module,this.wasmModule)}catch(t){_workletPrinter.error("init WASM failed, error message:"+t.message+t.stack)}break;case"initData":j=n.userid,W=n.meetingid,z=n.meetingnum,F=n.qoson;break;case"currentSSRC":Y=n;break;case"stop_audio_incoming":this.stopPlayAudio=n;break;case"codecDoAVSync":H=!0,U&&I&&U(I,!0);break;case"checkProcess":monitorLOG("PCC"+at),at=0;break;case"interpretation_set_lang":Module.HEAPU32.subarray(P/4,P/4+X)[0]=n.lang,w(I,1,P,1);break;case"interpretation_enable":Module.HEAPU32.subarray(P/4,P/4+X)[0]=n.enable?1:0,w(I,0,P,1);break;case"interpretation_mute_origin":Module.HEAPU32.subarray(P/4,P/4+X)[0]=n.mute?1:0,w(I,2,P,1);break;case"interpretation_set_interpreter":var i=Module.HEAPU32.subarray(P/4,P/4+X),o=P;n.interpreterList.length>=X&&(o=Module._malloc(4*n.interpreterList.length),i=Module.HEAPU32.subarray(o/4,o/4+n.interpreterList.length));for(var s=0;s<n.interpreterList.length;s++)i[s]=n.interpreterList[s];w(I,3,o,n.interpreterList.length),n.interpreterList.length>=X&&Module._free(o);break;case"setSpeechVolumeLevel":if(!I)return;M(I,n.userid,n.volume);break;default:D?this.handleMessageForSAB(t):this.handleMessageForNoSAB(t)}}},{key:"handleMessageForSAB",value:function(t){var e=this,r=t.data,n=r.status,i=r.data;switch(n){case"encodeAudioPort":this.audioEncodePort&&this.audioEncodePort.close(),this.audioEncodePort=t.ports[0];break;case"decodeAudioPort":this.audioDecodePort&&this.audioDecodePort.close(),this.audioDecodePort=t.ports[0],this.audioDecodePort.onmessage=function(t){};break;case"decodeVideoPort":this.videoDecodePort&&this.videoDecodePort.close(),this.videoDecodePort=t.ports[0];break;case"close":break;case"sharedBuffer":i&&(this.g_sharedbuffer=i),this.g_sharedbuffer&&(this.encodeSAB=new S.b(this.g_sharedbuffer.inputState,this.g_sharedbuffer.inputBuffer,128*Z,Z),this.decodeSAB=new S.b(this.g_sharedbuffer.outputState,this.g_sharedbuffer.outputBuffer,128*G),this.rtpSAB=new g(this.g_sharedbuffer.rtpBuffer,1200),this.decodeSAB.onCacheSizeChange=function(t){e.audioDecodePort&&e.audioDecodePort.postMessage({status:3,cacheSize:t,isSAB:!0})});break;default:console.warn("unhanle commands in audioworklet",n)}}},{key:"handleMessageForNoSAB",value:function(t){var e=t.data.status;switch(e){case"encodeAudioPort":this.audioProcessBuffer.setEncodePort(t.ports[0]);break;case"decodeAudioPort":this.audioProcessBuffer.setDecodePort(t.ports[0]);break;case"close":this.audioProcessBuffer.close(),this.isPlaying=!1,this.isRunning=!1;break;default:console.warn("unhanle commands in audioworklet",e)}}},{key:"onReceivedRTP",value:function(){}},{key:"process",value:function(t,e,r){if(at++,st)return!1;try{return D?R?this.SABDecodeProcess(t,e,r):this.SABProcess(t,e,r):this.NoSABprocess(t,e,r)}catch(t){return _workletPrinter.error("::process() exception: "+t.message+t.stack),!0}}},{key:"NoSABprocess",value:function(t,e,r){return!!this.isRunning&&(!this.isPlaying||(this.inputDataForNoSAB(t),this.outputDataForNoSAB(e),!0))}},{key:"inputDataForNoSAB",value:function(t){if(!t[0]||!t[0][0])return!0;var e=t[0];try{for(var r=t[0].length;!ot&&r<Z;r++)e.push(e[0])}catch(t){ot=!0,_workletPrinter.error("::inputDataForNoSAB() exception: "+t.message+t.stack)}this.audioProcessBuffer.write(e)}},{key:"outputDataForNoSAB",value:function(t){var e=this.audioProcessBuffer.read();if(this.stopPlayAudio)return!0;var r=t[0];if(1===G)for(var n=0;n<r.length;n++)r[n].set(e);else for(var i=0;i<G;i++)for(var o=0;r[i]&&o<r[i].length;o++)r[i][o]=e[o*G+i]}},{key:"inputData",value:function(t){if(!this.encodeSAB)return!0;this.encodeSAB.write(t),this.audioEncodePort.postMessage({command:2,buffer:!1})}},{key:"outputDecodeData",value:function(t){try{V.hasData()||B&&(sampleRate!=it&&(globalThis.sampleRateLog(it,sampleRate,"","",3),it=sampleRate),B(I,sampleRate/100,0,sampleRate,G))}catch(t){_workletPrinter.error("::outputDecodeData() get_mixed_Audio exception: "+t.message+t.stack)}try{var e=V.read();if(!e)return;if(1===G)for(var r=0;r<t.length;r++)t[r].set(e);else for(var n=0;n<G;n++)for(var i=0;t[n]&&i<t[n].length;i++)t[n][i]=e[i*G+n]}catch(t){_workletPrinter.error("::outputDecodeData() set outputs exception: "+t.message+t.stack)}}},{key:"outputData",value:function(t){if(!this.decodeSAB)return!0;var e=this.decodeSAB.read();if(null===e||this.stopPlayAudio)return!0;if(1===G)for(var r=0;r<t.length;r++)t[r].set(e);else for(var n=0;n<G;n++)for(var i=0;t[n]&&i<t[n].length;i++)t[n][i]=e[i*G+n]}},{key:"SABDecodeProcess",value:function(t,e,r){try{if(!this.rtpSAB)return globalThis.monitorLOG("SABN"),!0;var n=this.rtpSAB.available_read();n>100&&(n=100);for(var i=this.rtpSAB.getReaderPtr(),o=0;o<n;){o++;var s=this.rtpSAB.get(i);i++,I&&x&&(Module.HEAP8.subarray(x,x+Q).set(s),N(I,0,x,s.length))}this.rtpSAB.setReaderPtr(i)}catch(t){_workletPrinter.error("::SABDecodeProcess() audio_decode exception: "+t.message+t.stack)}try{var a=t[0],u=e[0];if(!this.g_sharedbuffer)return!0;if(!this.sampleRate_||!u[0])return!0;if(a[0]&&this.isCapturing){try{for(var h=a.length;!ot&&h<Z;h++)a.push(a[0])}catch(t){ot=!0,_workletPrinter.error("::SABDecodeProcess() exception: "+t.message+t.stack)}this.inputData(a)}return this.outputDecodeData(u),!0}catch(t){_workletPrinter.error("::SABDecodeProcess() inputs or outputs exception: "+t.message+t.stack)}return!0}},{key:"SABProcess",value:function(t,e,r){var n=t[0],i=e[0];if(!this.g_sharedbuffer)return!0;if(!this.sampleRate_||!i[0])return!0;if(n[0]&&this.isCapturing){try{for(var o=n.length;!ot&&o<Z;o++)n.push(n[0])}catch(t){ot=!0,_workletPrinter.error("::SABProcess() exception: "+t.message+t.stack)}this.inputData(n)}return this.outputData(i),!0}}],[{key:"parameterDescriptors",get:function(){return[{name:"pcm",defaultValue:1}]}}]),r}(l()(AudioWorkletProcessor)),it=0,ot=!1,st=!1,at=0;globalThis.LOG_OUT=function(){},globalThis.fsHandler?(globalThis.LOG_OUT_WEBRTC=globalThis.fsHandler.handleFile,globalThis.Get_ExternalRecord=globalThis.fsHandler.handleViperPrint):(globalThis.LOG_OUT_WEBRTC=function(){},globalThis.Get_ExternalRecord=function(){}),globalThis.send_data=function(){},globalThis.monitorLOG=function(t){t&&rt.port.postMessage({status:"MONITOR_LOG",data:t})},globalThis.sampleRateLog=function(t,e,r,n,i){if(t||e){var o=null;switch(i){case 1:o="GGDS: ";break;case 2:o="SCAG: ";break;case 3:o="SCIW: "}var s=o+t+"|"+e+"|"+r+"|"+n;globalThis.monitorLOG(s)}},globalThis.wcl_trace_log=function(t,e){globalThis.fsHandler&&globalThis.fsHandler.handleAudioSDKUtilPrint(t,e)},registerProcessor("zoomAudioWorklet",nt)}]);
//# sourceMappingURL=https://d1cdksi819e9z7.cloudfront.net/sourcemap/js_audio_worklet.min.js-c7059c7b8bb3503b0777.map
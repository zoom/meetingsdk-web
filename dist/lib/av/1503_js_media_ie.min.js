!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.JsMediaSDK_Instance=t():e.JsMediaSDK_Instance=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=62)}([function(e,t,n){"use strict";var r=n(14),a=n(8),o=n(6),i=n(26),s=n.n(i),c=n(36),u=n.n(c),d=n(28),f=n.n(d),l=n(11),p=n.n(l),h=n(12),m=n.n(h),g=n(13);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var a=f()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return u()(this,n)}}var v=Object(g.a)("sdk.init"),y=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";p()(this,e),this.name=n,this.handler=null,this.wasm=null,this.socket=null,this.defered=new o.a,this.initSuccessPromise=this.defered.promise,this.wasmDefered=new o.a,this.wasmSuccessPromise=this.wasmDefered.promise,this.handlerDefered=new o.a,this.handlerSuccessPromise=this.handlerDefered.promise,this.socketDefered=new o.a,this.socketSuccessPromise=this.socketDefered.promise,Promise.all([this.wasmSuccessPromise,this.handlerSuccessPromise,this.socketSuccessPromise]).then((function(e){var n=e.every((function(e){return!0===e}));t.defered.resolve(n),n||v.error(t.name,{handler:t.handler,wasm:t.wasm,socket:t.socket})}))}return m()(e,[{key:"setHanderSuccess",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.handler=e,this.handlerDefered.resolve(e)}},{key:"setWasmSuccess",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.wasm=e,this.wasmDefered.resolve(e)}},{key:"setSocketSuccess",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.socket=e,this.socketDefered.resolve(e)}},{key:"checkInitSuccess",value:function(){var e=this.handler&&this.wasm&&this.socket;return e&&this.defered.resolve(!0),e}},{key:"isSocketInitSuccess",value:function(){return this.socket}},{key:"waitforInitSuccess",value:function(){return this.initSuccessPromise}}]),e}(),S=function(e){s()(n,e);var t=_(n);function n(e){return p()(this,n),t.call(this,e)}return m()(n)}(y),E=function(e){s()(n,e);var t=_(n);function n(e){return p()(this,n),t.call(this,e)}return m()(n)}(y),b=function(e){s()(n,e);var t=_(n);function n(e){return p()(this,n),t.call(this,e)}return m()(n)}(y),D=n(2),A=Object(g.a)("sdk.variables");function I(){}I.prototype.initDB=function(){var e,t={},n=this;t.init=function(r){if(this.db_name=r.db_name,this.db_version=r.db_version,this.db_store_name=r.db_store_name,indexedDB){try{e=indexedDB.open(this.db_name,this.db_version)}catch(e){return a.a.error("Error opening IndexedDB",e),void(n.indexDbObject=null)}e.onerror=function(e){n.indexDbObject=null},e.onupgradeneeded=function(e){this.db=e.target.result,this.db.createObjectStore(t.db_store_name)},e.onsuccess=function(e){t.db=e.target.result,n.openIndexFlag=!0,n.indexDbObject.select("delay")}}else n.indexDbObject=null},t.put=function(e,n){try{var r=t.db.transaction(t.db_store_name,"readwrite").objectStore(t.db_store_name).put(e,n);r.onsuccess=function(){},r.onerror=function(e){a.a.error("Set Delay failed!",e)}}catch(e){a.a.error("IndexDb put Failed!",e)}},t.delete=function(n){(e=t.db.transaction(t.db_store_name,"readwrite").objectStore(t.db_store_name).delete(n)).onsuccess=function(){A("Delete the key:"+n)}},t.select=function(e){try{var r=t.db.transaction(t.db_store_name,"readwrite").objectStore(t.db_store_name);if(e)var o=r.get(e);else o=r.getAll();o.onsuccess=function(){n.audioDelay=o.result},o.onerror=function(){n.audioDelay=0}}catch(e){a.a.error("IndexDb Select Failed",e)}},t.clear=function(){t.db.transaction(t.db_store_name,"readwrite").objectStore(t.db_store_name).clear().onsuccess=function(){A("Clear the IndexDb Successfully")}},t.close=function(){t.db&&t.db.close()},this.indexDbObject=t,this.indexDbObject.init({db_name:"AEC",db_version:1,db_store_name:"delay"})},I.prototype.Notify_APPUI_SAFE=function(){this._Notify_APPUI&&(A("Notify_APPUI_SAFE",arguments),this._Notify_APPUI.apply(this,arguments))},I.prototype.Notify_APPUI=function(){this._Notify_APPUI&&(A("Notify_APPUI",arguments),this._Notify_APPUI.apply(this,arguments))},I.prototype.queueMessageToRwg=function(e,t){this.rwgMessageList.push({jsEvent:e,message:t})},I.prototype.clearMessageToRwg=function(){var e=this;this.rwgConnectSuccess=!0,this.rwgMessageList.length>0&&(this.rwgAgent||this._Notify_APPUI)&&(this.rwgMessageList.forEach((function(t){var n=t.jsEvent,r=t.message;e.sendMessageToRwg(n,r,!1,!1)})),this.rwgMessageList=[])},I.prototype.destroyQueueMessageToRwg=function(){this.rwgConnectSuccess=!1,this.rwgMessageList=[]},I.prototype.sendMessageToRwg=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(this.rwgConnectSuccess&&(this.rwgAgent||this._Notify_APPUI)||!n){this.rwgConnectSuccess&&r&&this.clearMessageToRwg();try{this.rwgAgent?this.rwgAgent.sendMessageToRwg(t):this.Notify_APPUI_SAFE(e,t)}catch(e){a.a.error("Error sending message to RWG",e)}}else this.queueMessageToRwg(e,t)},I.prototype.reinit=function(){this.SPECIAL_ID=0,this._Notify_APPUI=null,this.localAudioDecMGR=null,this.localVideoDecMGR=null,this.localAudioEncMGR=null,this.localVideoEncMGR=null,this.localSharingDecMGR=null,this.localMouseDecMGR=null,this.localSharingEncMGR=null,this.localAudioPara=null,this.localVideoPara=null,this.localSharingPara=null,this.Audio_WebSocket_Ip_Address=null,this.Audio_Web_Transport_Ip_Address=null,this.Video_WebSocket_Ip_Address=null,this.Video_Web_Transport_Ip_Address=null,this.Sharing_WebSocket_Ip_Address=null,this.mediaSDKHandle=null,this.audio_pcm_queue=new r.a,this.int16Array=null,this.isInitialFailed=!1,this.isAudioEncodeWASMOK=!1,this.isAudioDecodeWASMOK=!1,this.isVideoEncodeWASMOK=!1,this.isVideoDecodeWASMOK=!1,this.isSharingDecodeWASMOK=!1,this.isSharingEncodeWASMOK=!1,this.audioEncWorkerPath="",this.audioDecWorkerPath="",this.videoDecWorkerPath="",this.videoEncWorkerPath="",this.sharingDecWorkerPath="",this.sharingEncWorkerPath="",this.isAudioEncodePostStart=!1,this.isAudioDecodePostStart=!1,this.isVideoDecodePostStart=!1,this.isVideoEncodePostStart=!1,this.isSharingDecodePostStart=!1,this.isSharingEncodePostStart=!1,this.isAudioEncodeThreadStart=!1,this.isAudioDecodeThreadStart=!1,this.isVideoDecodeThreadStart=!1,this.isSharingDecodeThreadStart=!1,this.isVideoEncodeThreadStart=!1,this.isSharingEncodeThreadStart=!1,this.isAudioPlayWork=!1,this.isVideoPlayWork=!1,this.isSharingPlayWork=!1,this.shareBufferSampleNumb=30,this.audioWasmInfo=null,this.audioWasm=null,this.initialSuccessNumb=0,this.TotalWaitEvent=0,this.audioPostInterval=null,this.sharedBuffer=null,this.decoderinworklet=null,this.decoderinworkletOP=null,this.chromeWideAEC=null,this.shareSystemAudio=!1,this.indexDbObject=null,this.audioDelay=0,this.openIndexFlag=!1,this.audioBufferSize=o.g.browser.isFirefox?30:15,this.monitorEncodeVideo=null,this.monitorDecodeVideo=null,this.monitorEncodeSharing=null,this.monitorDecodeSharing=null,this.monitorEncodeAudio=null,this.monitorDecodeAudio=null,this.monitorVideoCapture=null,this.monitorVideoReadyCaptureWidth=0,this.monitorVideoReadyCaptureHeight=0,this.monitorIntervalHandle=null,this.monitorVideoUserID=null,this.monitorSharingUserID=null,this.monitorSharingEncodeAPPInfo=null,this.monitorVideoDecodeAPPInfo=null,this.monitorVideoEncodeAPPInfo=null,this.monitorCid=null,this.e2eencrypt=!1,this.AudioNode=null,this.SharingAudioNode=null,this.CurrentSSRC=0,this.CurrentSSRCTime=0,this.audioPlayTime=0,this.videoDecResponseText=null,this.videoEncResponseText=null,this.sharingDecodeResponse=null,this.sharingEncodeResponse=null,this.sharingDecInitInstance=new S(D.g.SHARING_DECODE),this.sharingEncInitInstance=new S(D.g.SHARING_ENCODE),this.videoDecInitInstance=new E(D.g.VIDEO_DECODE),this.videoInitInstance=new E(D.g.VIDEO_ENCODE),this.audioDecInitInstance=new b(D.g.AUDIO_DECODE),this.audioEncodeInitInstance=new b(D.g.AUDIO_ENCODE),this.audioDecodeResponse=null,this.audioEncodeResponse=null,this.ivObj={},this.userNodeList=[],this.rwgAgent=null,this.ComputerAudioStatus=D.a.ComputerAudio_Null,this.DesktopAudioStatus=D.a.DesktopAudio_Null,this.initDB(),this.resourceManager=null,this.vbarraybuffer=null,this.vbbin=null,this.vbjson=null,this.tfjsurl=null,this.afnbin=null,this.afnjson=null,this.basebin=null,this.basejson=null,this.interpretationMessage=new r.a,this.workletWasmInitSuccess=!1,this.videoEncodeInitSuccess=null,this.vbPreloadSuccess=null,this.enableAduioBridge=!1,this.audioMode=-1,this.isPreviewMode={audioEncode:!1,audioDecode:!1,videoEncode:!1,videoDecode:!1},this.rwgConnectSuccess=!1,this.rwgMessageList=[],this.localSsrc=0};var w=new I;t.a=w},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"qd",(function(){return a})),n.d(t,"ad",(function(){return o})),n.d(t,"nd",(function(){return i})),n.d(t,"a",(function(){return s})),n.d(t,"pd",(function(){return c})),n.d(t,"Id",(function(){return u})),n.d(t,"lc",(function(){return d})),n.d(t,"W",(function(){return f})),n.d(t,"ab",(function(){return l})),n.d(t,"T",(function(){return p})),n.d(t,"Z",(function(){return h})),n.d(t,"U",(function(){return m})),n.d(t,"bc",(function(){return g})),n.d(t,"dc",(function(){return _})),n.d(t,"Eb",(function(){return v})),n.d(t,"S",(function(){return y})),n.d(t,"Te",(function(){return S})),n.d(t,"Xb",(function(){return E})),n.d(t,"Tb",(function(){return b})),n.d(t,"fd",(function(){return D})),n.d(t,"rd",(function(){return A})),n.d(t,"wd",(function(){return I})),n.d(t,"cd",(function(){return w})),n.d(t,"Qd",(function(){return M})),n.d(t,"P",(function(){return C})),n.d(t,"bd",(function(){return O})),n.d(t,"gd",(function(){return P})),n.d(t,"od",(function(){return k})),n.d(t,"sd",(function(){return x})),n.d(t,"rc",(function(){return R})),n.d(t,"Bc",(function(){return N})),n.d(t,"bb",(function(){return T})),n.d(t,"V",(function(){return V})),n.d(t,"db",(function(){return L})),n.d(t,"Ac",(function(){return G})),n.d(t,"Zd",(function(){return W})),n.d(t,"Rd",(function(){return U})),n.d(t,"sc",(function(){return F})),n.d(t,"Md",(function(){return H})),n.d(t,"hf",(function(){return K})),n.d(t,"Y",(function(){return B})),n.d(t,"Jc",(function(){return j})),n.d(t,"Yd",(function(){return Q})),n.d(t,"Nd",(function(){return q})),n.d(t,"jc",(function(){return Y})),n.d(t,"hd",(function(){return J})),n.d(t,"Fc",(function(){return z})),n.d(t,"i",(function(){return X})),n.d(t,"A",(function(){return Z})),n.d(t,"q",(function(){return $})),n.d(t,"p",(function(){return ee})),n.d(t,"o",(function(){return te})),n.d(t,"pe",(function(){return ne})),n.d(t,"Ld",(function(){return re})),n.d(t,"Od",(function(){return ae})),n.d(t,"Gb",(function(){return oe})),n.d(t,"jd",(function(){return ie})),n.d(t,"me",(function(){return se})),n.d(t,"ne",(function(){return ce})),n.d(t,"Vb",(function(){return ue})),n.d(t,"Zb",(function(){return de})),n.d(t,"Hc",(function(){return fe})),n.d(t,"ec",(function(){return le})),n.d(t,"Se",(function(){return pe})),n.d(t,"ae",(function(){return he})),n.d(t,"Pd",(function(){return me})),n.d(t,"Kc",(function(){return ge})),n.d(t,"Yc",(function(){return _e})),n.d(t,"N",(function(){return ve})),n.d(t,"M",(function(){return ye})),n.d(t,"Cb",(function(){return Se})),n.d(t,"Ab",(function(){return Ee})),n.d(t,"yd",(function(){return be})),n.d(t,"ld",(function(){return De})),n.d(t,"Sd",(function(){return Ae})),n.d(t,"vd",(function(){return Ie})),n.d(t,"kd",(function(){return we})),n.d(t,"de",(function(){return Me})),n.d(t,"ce",(function(){return Ce})),n.d(t,"ee",(function(){return Oe})),n.d(t,"Db",(function(){return Pe})),n.d(t,"xd",(function(){return ke})),n.d(t,"X",(function(){return xe})),n.d(t,"oc",(function(){return Re})),n.d(t,"nc",(function(){return Ne})),n.d(t,"O",(function(){return Te})),n.d(t,"pc",(function(){return Ve})),n.d(t,"h",(function(){return Le})),n.d(t,"g",(function(){return Ge})),n.d(t,"Jb",(function(){return We})),n.d(t,"vc",(function(){return Ue})),n.d(t,"uc",(function(){return Fe})),n.d(t,"Ue",(function(){return He})),n.d(t,"m",(function(){return Ke})),n.d(t,"Gc",(function(){return Be})),n.d(t,"md",(function(){return je})),n.d(t,"fc",(function(){return Qe})),n.d(t,"E",(function(){return qe})),n.d(t,"C",(function(){return Ye})),n.d(t,"G",(function(){return Je})),n.d(t,"J",(function(){return ze})),n.d(t,"Ae",(function(){return Xe})),n.d(t,"ye",(function(){return Ze})),n.d(t,"Ce",(function(){return $e})),n.d(t,"Ge",(function(){return et})),n.d(t,"Ee",(function(){return tt})),n.d(t,"Bd",(function(){return nt})),n.d(t,"l",(function(){return rt})),n.d(t,"Dd",(function(){return at})),n.d(t,"Fd",(function(){return ot})),n.d(t,"zd",(function(){return it})),n.d(t,"sb",(function(){return st})),n.d(t,"Ie",(function(){return ct})),n.d(t,"we",(function(){return ut})),n.d(t,"hc",(function(){return dt})),n.d(t,"Pc",(function(){return ft})),n.d(t,"Ye",(function(){return lt})),n.d(t,"We",(function(){return pt})),n.d(t,"Xe",(function(){return ht})),n.d(t,"K",(function(){return mt})),n.d(t,"Je",(function(){return gt})),n.d(t,"zb",(function(){return _t})),n.d(t,"e",(function(){return vt})),n.d(t,"Pe",(function(){return yt})),n.d(t,"Mc",(function(){return St})),n.d(t,"ic",(function(){return Et})),n.d(t,"Oc",(function(){return bt})),n.d(t,"oe",(function(){return Dt})),n.d(t,"le",(function(){return At})),n.d(t,"ie",(function(){return It})),n.d(t,"n",(function(){return wt})),n.d(t,"Hd",(function(){return Mt})),n.d(t,"Ke",(function(){return Ct})),n.d(t,"r",(function(){return Ot})),n.d(t,"s",(function(){return Pt})),n.d(t,"se",(function(){return kt})),n.d(t,"re",(function(){return xt})),n.d(t,"Gd",(function(){return Rt})),n.d(t,"Zc",(function(){return Nt})),n.d(t,"Uc",(function(){return Tt})),n.d(t,"c",(function(){return Vt})),n.d(t,"pb",(function(){return Lt})),n.d(t,"Kb",(function(){return Gt})),n.d(t,"cf",(function(){return Wt})),n.d(t,"D",(function(){return Ut})),n.d(t,"B",(function(){return Ft})),n.d(t,"F",(function(){return Ht})),n.d(t,"I",(function(){return Kt})),n.d(t,"H",(function(){return Bt})),n.d(t,"ze",(function(){return jt})),n.d(t,"xe",(function(){return Qt})),n.d(t,"Be",(function(){return qt})),n.d(t,"Fe",(function(){return Yt})),n.d(t,"De",(function(){return Jt})),n.d(t,"Ad",(function(){return zt})),n.d(t,"L",(function(){return Xt})),n.d(t,"Ed",(function(){return Zt})),n.d(t,"Cd",(function(){return $t})),n.d(t,"He",(function(){return en})),n.d(t,"kc",(function(){return tn})),n.d(t,"Qe",(function(){return nn})),n.d(t,"Sb",(function(){return rn})),n.d(t,"Qb",(function(){return an})),n.d(t,"Rb",(function(){return on})),n.d(t,"Xd",(function(){return sn})),n.d(t,"qb",(function(){return cn})),n.d(t,"Wc",(function(){return un})),n.d(t,"Vc",(function(){return dn})),n.d(t,"ke",(function(){return fn})),n.d(t,"hb",(function(){return ln})),n.d(t,"id",(function(){return pn})),n.d(t,"ud",(function(){return hn})),n.d(t,"ed",(function(){return mn})),n.d(t,"R",(function(){return gn})),n.d(t,"xc",(function(){return _n})),n.d(t,"gc",(function(){return vn})),n.d(t,"lb",(function(){return yn})),n.d(t,"tb",(function(){return Sn})),n.d(t,"cb",(function(){return En})),n.d(t,"Nc",(function(){return bn})),n.d(t,"zc",(function(){return Dn})),n.d(t,"Ec",(function(){return An})),n.d(t,"d",(function(){return In})),n.d(t,"Qc",(function(){return wn})),n.d(t,"Hb",(function(){return Mn})),n.d(t,"Ub",(function(){return Cn})),n.d(t,"Wb",(function(){return On})),n.d(t,"Yb",(function(){return Pn})),n.d(t,"ac",(function(){return kn})),n.d(t,"Lb",(function(){return xn})),n.d(t,"Mb",(function(){return Rn})),n.d(t,"Le",(function(){return Nn})),n.d(t,"Pb",(function(){return Tn})),n.d(t,"Nb",(function(){return Vn})),n.d(t,"Ob",(function(){return Ln})),n.d(t,"Vd",(function(){return Gn})),n.d(t,"y",(function(){return Wn})),n.d(t,"ve",(function(){return Un})),n.d(t,"z",(function(){return Fn})),n.d(t,"Wd",(function(){return Hn})),n.d(t,"Td",(function(){return Kn})),n.d(t,"td",(function(){return Bn})),n.d(t,"dd",(function(){return jn})),n.d(t,"Q",(function(){return Qn})),n.d(t,"yc",(function(){return qn})),n.d(t,"be",(function(){return Yn})),n.d(t,"Ud",(function(){return Jn})),n.d(t,"ub",(function(){return zn})),n.d(t,"wb",(function(){return Xn})),n.d(t,"vb",(function(){return Zn})),n.d(t,"v",(function(){return $n})),n.d(t,"xb",(function(){return er})),n.d(t,"j",(function(){return tr})),n.d(t,"f",(function(){return nr})),n.d(t,"Oe",(function(){return rr})),n.d(t,"Rc",(function(){return ar})),n.d(t,"Ne",(function(){return or})),n.d(t,"Me",(function(){return ir})),n.d(t,"Re",(function(){return sr})),n.d(t,"cc",(function(){return cr})),n.d(t,"ue",(function(){return ur})),n.d(t,"qc",(function(){return dr})),n.d(t,"x",(function(){return fr})),n.d(t,"w",(function(){return lr})),n.d(t,"u",(function(){return pr})),n.d(t,"Xc",(function(){return hr})),n.d(t,"je",(function(){return mr})),n.d(t,"k",(function(){return gr})),n.d(t,"ff",(function(){return _r})),n.d(t,"gf",(function(){return vr})),n.d(t,"df",(function(){return yr})),n.d(t,"ef",(function(){return Sr})),n.d(t,"Fb",(function(){return Er})),n.d(t,"Ze",(function(){return br})),n.d(t,"af",(function(){return Dr})),n.d(t,"bf",(function(){return Ar})),n.d(t,"wc",(function(){return Ir})),n.d(t,"ib",(function(){return wr})),n.d(t,"mb",(function(){return Mr})),n.d(t,"Sc",(function(){return Cr})),n.d(t,"Tc",(function(){return Or})),n.d(t,"ge",(function(){return Pr})),n.d(t,"he",(function(){return kr})),n.d(t,"Lc",(function(){return xr})),n.d(t,"Jd",(function(){return Rr})),n.d(t,"Kd",(function(){return Nr})),n.d(t,"Ib",(function(){return Tr})),n.d(t,"gb",(function(){return Vr})),n.d(t,"fb",(function(){return Lr})),n.d(t,"ob",(function(){return Gr})),n.d(t,"eb",(function(){return Wr})),n.d(t,"nb",(function(){return Ur})),n.d(t,"te",(function(){return Fr})),n.d(t,"Ic",(function(){return Hr})),n.d(t,"rb",(function(){return Kr})),n.d(t,"Cc",(function(){return Br})),n.d(t,"Dc",(function(){return jr})),n.d(t,"Ve",(function(){return Qr})),n.d(t,"t",(function(){return qr})),n.d(t,"qe",(function(){return Yr})),n.d(t,"fe",(function(){return Jr})),n.d(t,"mc",(function(){return zr})),n.d(t,"if",(function(){return Xr})),n.d(t,"kb",(function(){return Zr})),n.d(t,"jb",(function(){return $r})),n.d(t,"Bb",(function(){return ea})),n.d(t,"tc",(function(){return ta})),n.d(t,"yb",(function(){return na}));var r=1,a=2,o=3,i=4,s=5,c=6,u=7,d=8,f=9,l=10,p=11,h=12,m=13,g=15,_=16,v=17,y=18,S=19,E=21,b=22,D=23,A=24,I=25,w=26,M=27,C=28,O=30,P=30.1,k=31,x=31.1,R=32,N=33,T=34,V=36,L=40,G=41,W=43,U=44,F=45,H=46,K=48,B=49,j=50,Q=51,q=52,Y=53,J=54,z=55,X=57,Z=58,$=59,ee=60,te=61,ne=62,re=63,ae=64,oe=65,ie=66,se=70,ce=71,ue=72,de=73,fe=74,le=75,pe=77,he=80,me=81,ge=82,_e=83,ve=84,ye=85,Se=86,Ee=87,be=90,De=91,Ae=92,Ie=93,we=94,Me=96,Ce=97,Oe=98,Pe=99,ke=101,xe=100,Re=110,Ne=111,Te=112,Ve=113,Le=114,Ge=115,We=116,Ue=117,Fe=118,He=120,Ke=121,Be=122,je=123,Qe=124,qe=1,Ye=2,Je=3,ze=4,Xe=7,Ze=8,$e=9,et=10,tt=11,nt=12,rt=14,at=15,ot=16,it=17,st=18,ct=19,ut=20,dt=21,ft=3021,lt=22,pt=23,ht=24,mt=26,gt=27,_t=30,vt=31,yt=35,St=36,Et=37,bt=38,Dt=39,At=40,It=41,wt=42,Mt=46,Ct=47,Ot=48,Pt=49,kt=50,xt=51,Rt=52,Nt=53,Tt=54,Vt=56,Lt=57,Gt=58,Wt=60,Ut=-1,Ft=-2,Ht=-3,Kt=-4,Bt=-5,jt=-7,Qt=-8,qt=-9,Yt=-10,Jt=-11,zt=-12,Xt=-13,Zt=-14,$t=-15,en=-16,tn=-26,nn=-27,rn=1.1,an=1.2,on=1.3,sn=2,cn=3,un=6,dn=6.1,fn=7,ln=8,pn=9,hn=10,mn=11,gn=12,_n=13,vn=14,yn=15,Sn=16,En=17,bn=18,Dn=19,An=20,In=21,wn=23,Mn=24,Cn=24,On=25,Pn=26,kn=27,xn=28,Rn=29,Nn=30,Tn=-1.1,Vn=-1.2,Ln=-1.3,Gn=-2,Wn=-3,Un=-4,Fn=-6,Hn=-8,Kn=-9,Bn=-10,jn=-11,Qn=-12,qn=-14,Yn=-15,Jn=-16,zn=-17,Xn=-18,Zn=-20,$n=-21,er=-22,tr=-23,nr=-24,rr=-28,ar=-27,or=-29,ir=-31,sr=-32,cr=-33,ur=-34,dr=-35,fr=0,lr=1,pr=2,hr="SHARING_PARAM_INFO_FROM_SOCKET",mr="VIDEO_DATA_FROM_WORKER",gr="AUDIO_DATA_FROM_WORKER",_r=24321,vr=24322,yr=24322,Sr=24323,Er=24322,br=4300,Dr=4299,Ar=7939,Ir={ZOOM_CONNECTION_VIDEO_OFFER_RESPONSE_EVT:"ZOOM_CONNECTION_VIDEO_OFFER_RESPONSE_EVT",ZOOM_CONNECTION_AUDIO_OFFER_RESPONSE_EVT:"ZOOM_CONNECTION_AUDIO_OFFER_RESPONSE_EVT",END_MEDIA:"END_MEDIA",DESTROY:"DESTROY",DC_COMING_MESSAGE:"DC_COMING_MESSAGE",AUDIO_BRIDGE_WS_TOKEN:"AUDIO_BRIDGE_WS_TOKEN"},wr=67,Mr=68,Cr=69,Or=70,Pr=71,kr=72,xr=73,Rr=75,Nr=76,Tr=78,Vr=105,Lr=106,Gr=107,Wr=108,Ur=109,Fr=110,Hr=1,Kr=0,Br=108,jr=104,Qr=120,qr="AUDIO_QOS_DATA",Yr="VIDEO_QOS_DATA",Jr="VIDEOSHARE_QOS_DATA",zr="NETWORK_QUALITY_CHANGE",Xr={VIDEO_ENCODE:"0",VIDEO_DECODE:"1",AUDIO_ENCODE:"2",AUDIO_DECODE:"3",SHARING_ENCODE:"4",SHARING_DECODE:"5"},Zr=66.5,$r=66.6,ea="ENABLE_REUSE_STREAM",ta="PRESET_MEDIA_CONSTRAINTS",na="DESTORY_REUSE_STREAM"},function(e,t,n){"use strict";n.d(t,"h",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"f",(function(){return i})),n.d(t,"i",(function(){return s})),n.d(t,"g",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"a",(function(){return f}));var r={ZOOM_CONNECTION_COMMAND:0,ZOOM_CONNECTION_AUDIO:1,ZOOM_CONNECTION_VIDEO:2,ZOOM_CONNECTION_SHARING_JPEG:3,ZOOM_CONNECTION_SHARING_VIDEO:4,ZOOM_CONNECTION_MEDIA_LOG:5,ZOOM_CONNECTION_SHARING_REMOTE_CONTROL:6,ZOOM_CONNECTION_UNKNOW:7},a={encode:1,decode:2},o={AUDIO:1,SHARING:2,VIDEO:3},i={UNKNOWN:0,WIN:1,MAC:2,PAD:3,MOBILE:4,CALL_IN:5,LINUX:6,WEB:7,CHROME:8},s={0:"27D10C2BC0312F11BE79BF9AA0668220",1:"D5AC365D95ACF72EE1E8D0FED594C0CD",2:"AEF36FC5C22CE7AAF5DC05913633EDF7",3:"BD3DF97B715748F6B6A5F59271A2D1A0",4:"D0AEDC804599C31391A946904C74595F",5:"65DEAF0AA73F220ED401B90CFFCDFF23"},c={VIDEO_ENCODE:"0",VIDEO_DECODE:"1",AUDIO_ENCODE:"2",AUDIO_DECODE:"3",SHARING_ENCODE:"4",SHARING_DECODE:"5"},u={SET_USER_NODE_LIST:"SET_USER_NODE_LIST"},d={CLOSE:"CLOSE",CLOSE_SUCCESS:"CLOSE_SUCCESS",CLOSE_FAIL:"CLOSE_FAIL",IS_CLOSED:"IS_CLOSED",START_SHARING_IE:"START_SHARING_IE",START_SHARING_IE_CALLBACK:"START_SHARING_IE_CALLBACK",SHARING_PARAM_DATA_IE_CALLBACK:"SHARING_PARAM_DATA_IE_CALLBACK",SHARING_MORE_INFO_DATA_IE_CALLBACK:"SHARING_MORE_INFO_DATA_IE_CALLBACK",SHARING_BINARY_CURSOR_DATA_AND_POS_INDICATION_TYPE:"SHARING_BINARY_CURSOR_DATA_AND_POS_INDICATION_TYPE",SHARING_BINARY_CONTENT_DATA_AND_POS_INDICATION_TYPE:"SHARING_BINARY_CONTENT_DATA_AND_POS_INDICATION_TYPE"},f={ComputerAudio_Null:0,ComputerAudio_Connecting:1,ComputerAudio_Connected:2,DesktopAudio_Null:0,DesktopAudio_Connecting:1,DesktopAudio_Connected:2}},function(e,t,n){var r=n(45)();e.exports=r;try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){"use strict";var r=n(1),a=n(0),o=n(8),i={MWCGLF:"WebGL context failed to be restored",VCFF:"Captured video format is not supported",SHHF:"Initialization of sharing decode WASM failed",SDSF:"Sharing decode WebSocket failed to connect after 10 attempts",SESF:"Initialization of sharing encode WASM failed",SEHF:"Sharing encode WebSocket failed to connect after 10 attempts",ADHF:"Initialization of audio decode WASM failed",ADSF:"Audio decode WebSocket failed to connect after 10 attempts",AEHF:"Initialization of audio encode WASM failed",AESF:"Audio encode WebSocket failed to connect after 10 attempts",VDHF:"Initialization of video decode WASM failed",VDSF:"Video decode WebSocket failed to connect after 10 attempts",VEHF:"Initialization of video encode WASM failed",VESF:"Video encode WebSocket failed to connect after 10 attempts",DCERROR:"WebRTC DataChannel received error",INITVDCERR:"An error occurred when initializing video WebRTC DataChannel",INITADCERR:"An error occurred when initializing audio WebRTC DataChannel",VBFF:"An error occurred when trying to obtain the virtual background file"},s=function(){function e(){this.base_time=null,this.monitor="",this.last_get_monitor_time=0,this.checkIsNecessaryLogMap=new Map,this.highfrequencyerror=new Map}return e.prototype={init:function(){this.base_time=(new Date).getTime(),this.checkIsNecessaryLogMap=new Map},add_monitor:function(e,t){if(e)try{if(i[e]){var n=i[e];t&&(n="".concat(n,". Additional information: ").concat(t)),o.a.error(n)}var r=!1;"F"!=e[e.length-1]&&"f"!=e[e.length-1]||(r=!0);var a=(new Date).getTime()-this.base_time;this.monitor?this.monitor=this.monitor+e+"("+Math.ceil(a)+")":this.monitor=e+"("+Math.ceil(a)+")",this.monitor.length>2e3&&(r=!0),r&&this.send_instant_monitor()}catch(e){o.a.error("Error when adding data to the monitor log",e)}},get_monitor:function(){var e=this.monitor,t=(new Date).getTime();return null!=e&&(e.length>80||t-this.last_get_monitor_time>180)?(this.last_get_monitor_time=t,this.monitor=null,"WCL_M, "+e):""},get_instant_monitor:function(){var e=this.monitor;return this.monitor=null,"WCL_M, "+e},send_instant_monitor:function(){var e=this.get_instant_monitor();e&&a.a.sendMessageToRwg(r.gc,{evt:4167,seq:1,body:{data:e}})},add_monitor2:function(e){e&&(this.monitor?this.monitor=this.monitor+e+"()":this.monitor=e+"()")},add_monitor3:function(e){e&&(this.highfrequencyerror[e]?this.highfrequencyerror[e]+=1:this.highfrequencyerror[e]=1,Object(o.b)(this.highfrequencyerror[e])&&this.add_monitor(e,"Occurred ".concat(this.highfrequencyerror[e]," times")))},checkIsNecessaryExceptionLogAndReturnRepeatTimes:function(e){var t=this,n=!0,r=0;try{return this.checkIsNecessaryLogMap.get(e)&&this.checkIsNecessaryLogMap.get(e)%100!=0&&(n=!1),{isNecessary:n,repeatNumber:void 0===(r=this.checkIsNecessaryLogMap.get(e))?0:r}}catch(e){return{isNecessary:!0,repeatNumber:0}}finally{var a=this.checkIsNecessaryLogMap.get(e)||0;if(this.checkIsNecessaryLogMap.set(e,a+1),this.checkIsNecessaryLogMap.size>200){var o=Array.from(this.checkIsNecessaryLogMap.keys()).slice(0,20);console.log("delete log cache keys",o),o.forEach((function(e){return t.checkIsNecessaryLogMap.delete(e)}))}}}},new e}();t.a=s},function(e,t,n){"use strict";n.r(t),n.d(t,"setUserNodeListToWorker",(function(){return G})),n.d(t,"UpdateAudioPlayStatus",(function(){return W})),n.d(t,"UpdateVideoPlayStatus",(function(){return U})),n.d(t,"UpdateSharingPlayStatus",(function(){return F})),n.d(t,"preserveMessageController",(function(){return K})),n.d(t,"previewController",(function(){return B})),n.d(t,"initVideoEncode",(function(){return j})),n.d(t,"initVideoDecode",(function(){return q})),n.d(t,"initAudioEncode",(function(){return J})),n.d(t,"initAudioDecode",(function(){return X})),n.d(t,"initSharingDecode",(function(){return $})),n.d(t,"initSharingEncode",(function(){return te})),n.d(t,"Sharing_Decode_Post_message",(function(){return re})),n.d(t,"Sharing_Encode_Post_message",(function(){return oe})),n.d(t,"addAudioMonitorLog",(function(){return ge})),n.d(t,"setSharingEngineInitProperties",(function(){return Ie})),n.d(t,"setAudioEngineInitProperties",(function(){return we})),n.d(t,"setVideoEngineInitProperties",(function(){return Me})),n.d(t,"Set_Audio_WebSocket_Ip_Address",(function(){return Ce})),n.d(t,"Set_Audio_Web_Transport_Ip_Address",(function(){return Oe})),n.d(t,"Set_Video_WebSocket_Ip_Address",(function(){return Pe})),n.d(t,"Set_Video_Web_Transport_Ip_Address",(function(){return ke})),n.d(t,"JsAudioEngine_UnInit",(function(){return xe})),n.d(t,"JsVideoEngine_UnInit",(function(){return Re})),n.d(t,"JsSharingEngine_UnInit",(function(){return Ne})),n.d(t,"Video_Encode_Frame",(function(){return Te})),n.d(t,"Sharing_Encode_Frame",(function(){return Ve})),n.d(t,"Put_Video_Frame_Buffer",(function(){return Ge})),n.d(t,"Clear_Decoded_Sharing_Frame",(function(){return We})),n.d(t,"Add_Video_Decode_Thread",(function(){return He})),n.d(t,"Add_Audio_Decode_Thread",(function(){return ze})),n.d(t,"Get_SSRC_Latest_Time",(function(){return Ze})),n.d(t,"Get_Video_SSRC_Latest_Time",(function(){return $e})),n.d(t,"Meeting_Fail_Over",(function(){return et})),n.d(t,"Modify_Audio_SampleRate",(function(){return ot})),n.d(t,"Notify_Audio_Thread_Status",(function(){return it})),n.d(t,"Notify_Audio_Thread_AEC_Status",(function(){return st})),n.d(t,"Notify_Audio_Thread_Msg_Channel",(function(){return ct})),n.d(t,"Notify_Video_Thread_Msg_Channel",(function(){return ut})),n.d(t,"Notify_Video_Sharing_Msg_Channel",(function(){return dt})),n.d(t,"Notify_Audio_Thread_Msg_Channel2",(function(){return ft})),n.d(t,"Notify_Audio_Thread_Msg_Channel3",(function(){return lt})),n.d(t,"Notify_Audio_Video_Thread_Msg_Channel",(function(){return pt})),n.d(t,"Notify_Video_Encode_Thread",(function(){return ht})),n.d(t,"Notify_Video_Encode_Thread_Transferable_Data",(function(){return mt})),n.d(t,"Notify_Video_Decode_Thread",(function(){return gt})),n.d(t,"Notify_Sharing_Video_Encode_Thread_Transferable_Data",(function(){return _t})),n.d(t,"Notify_Sharing_Encode_Thread_Transferable_Data",(function(){return vt})),n.d(t,"Notify_Sharing_Video_Decode_Thread",(function(){return yt})),n.d(t,"Notify_Sharing_Decode_Thread",(function(){return St})),n.d(t,"Notify_Audio_Thread_CurrentSSRC",(function(){return Et})),n.d(t,"Notify_Audio_Encode_Thread",(function(){return bt})),n.d(t,"Notify_Audio_Decode_Thread",(function(){return Dt})),n.d(t,"Notify_Audio_Thread_Interpretation_Enable",(function(){return At})),n.d(t,"Notify_Audio_Thread_CC_Set_Lang",(function(){return It})),n.d(t,"Notify_Audio_Thread_Interpretation_Set_Lang",(function(){return wt})),n.d(t,"Notify_Audio_Thread_Interpretation_Mute",(function(){return Mt})),n.d(t,"Notify_Audio_Thread_Interpretation_Set_Interpreter",(function(){return Ct})),n.d(t,"Reset_Aec",(function(){return Ot})),n.d(t,"Set_Aec_Delay",(function(){return Pt})),n.d(t,"Start_Monitor",(function(){return Rt})),n.d(t,"Send_Render_Monitor_Log",(function(){return Nt})),n.d(t,"Stop_Monitor",(function(){return Tt})),n.d(t,"Update_Video_Encrpt",(function(){return Vt})),n.d(t,"Update_Sharing_Encrpt",(function(){return Lt})),n.d(t,"Update_Sharing_Video_Encode_Status",(function(){return Gt})),n.d(t,"Update_Sharing_Encode_Status",(function(){return Wt})),n.d(t,"Notify_Sharing_Video_Encode_Thread",(function(){return Ut})),n.d(t,"Notify_Sharing_Encode_Thread",(function(){return Ft})),n.d(t,"Update_Audio_Encrpt",(function(){return Ht})),n.d(t,"disableSocketReconnect",(function(){return Kt})),n.d(t,"closeAllMedia",(function(){return Bt})),n.d(t,"destroyAllWorkers",(function(){return jt})),n.d(t,"pushMessageToWorker",(function(){return Jt})),n.d(t,"isVideoEncodeHandleReady",(function(){return Xt})),n.d(t,"transportSettingCanvas",(function(){return Zt})),n.d(t,"initResourceManager",(function(){return $t})),n.d(t,"prepareVBfile",(function(){return tn})),n.d(t,"transportImageBitMap",(function(){return nn})),n.d(t,"transportBgImageBitMap",(function(){return rn})),n.d(t,"transportVBBgImageBitMap",(function(){return an})),n.d(t,"transportMaskImageBitMap",(function(){return on})),n.d(t,"MirrorSendVideo",(function(){return sn})),n.d(t,"isSharingNotClearChromeVersion",(function(){return cn})),n.d(t,"MEDIA_INIT_SUCCESS_CALLBACK_METADATA",(function(){return un}));var r,a=n(16),o=n.n(a),i=n(35),s=n.n(i),c=n(15),u=n.n(c),d=n(19),f=n.n(d),l=n(7),p=n.n(l),h=n(3),m=n.n(h),g=n(1),_=n(9),v=n(18),y=n(6),S=n(13),E=n(8),b=n(10),D=n(4),A=n(2),I=n(0),w=["name","messageParams","direction"];function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=Object(S.a)("sdk.engine"),P=y.g.isSupportVideoShareSend()&&y.g.isSupportVideoShareReceive();function k(e,t){return x.apply(this,arguments)}function x(){return(x=p()(m.a.mark((function e(t,n){var r,a,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next=e.t0===A.g.VIDEO_ENCODE?3:e.t0===A.g.VIDEO_DECODE?5:e.t0===A.g.AUDIO_ENCODE?7:e.t0===A.g.AUDIO_DECODE?9:e.t0===A.g.SHARING_DECODE?11:e.t0===A.g.SHARING_ENCODE?13:15;break;case 3:return r=I.a.videoEncResponseText,e.abrupt("break",15);case 5:return r=I.a.videoDecResponseText,e.abrupt("break",15);case 7:return r=I.a.audioEncodeResponse,e.abrupt("break",15);case 9:return r=I.a.audioDecodeResponse,e.abrupt("break",15);case 11:return r=I.a.sharingDecodeResponse,e.abrupt("break",15);case 13:return r=I.a.sharingEncodeResponse,e.abrupt("break",15);case 15:if(r){e.next=19;break}return e.next=18,N(n.workerJsFileUrl,n.integrityHelper);case 18:r=e.sent;case 19:return a="wasmUrl = '"+n.workerWasmFileUrl+"';","self.__wasmCodeDataEndFlag = 1;",o=/self\.__wasmCodeDataEndFlag\s*=\s*1[;|,]/,e.abrupt("return",r.replace(o,a+"self.__wasmCodeDataEndFlag = 1;"));case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return(R=p()(m.a.mark((function e(t,n,r,a,o){var i,s,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o||!o.isDestroy){e.next=3;break}return D.a.add_monitor("ZIDX",a),e.abrupt("return",O("WorkerType:".concat(a,";The relative SDK instance is destroy, don't start relative worker, avoid multiple same workers. ")));case 3:if(i={},A.i[a]&&Object.assign(i,{name:A.i[a]}),!1,a==A.g.AUDIO_ENCODE?window.AEW&&(s=window.AEW):a==A.g.AUDIO_DECODE&&window.ADW&&(s=window.ADW),s){e.next=23;break}return e.t0=window.URL,e.t1=Blob,e.next=12,k(a,t);case 12:e.t2=e.sent,e.t3=[e.t2],e.t4=new e.t1(e.t3),c=e.t0.createObjectURL.call(e.t0,e.t4),(s=new Worker(c,i)).addEventListener("error",(function(e){E.a.error("Uncaught exception in worker of type ".concat(a),e)})),s.addEventListener("unhandledrejection",(function(e){E.a.error("Unhandled Promise rejection in worker of type ".concat(a,": ").concat(e.reason))})),a===A.g.VIDEO_ENCODE&&s.postMessage({command:"WORKER_BOLB_URL",blobUrl:c}),I.a.mediaSDKHandle.is32bitbrowser&&(a==A.g.AUDIO_ENCODE?window.AEW=s:a==A.g.AUDIO_DECODE&&(window.ADW=s)),e.next=24;break;case 23:a==A.g.AUDIO_ENCODE?window.AEWF=!0:a==A.g.AUDIO_DECODE&&(window.ADWF=!0);case 24:n&&n.call(r,s);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,t){var n=null;return t&&(n=t.getIntegrity()),y.g.download(e,n)}function T(e,t,n,r,a){var o=this;return new Promise((function(i,s){!function(e,t,n,r,a){R.apply(this,arguments)}(e,(function(e){var a=I.a.SPECIAL_ID;t&&(D.a.add_monitor("WAM"+r),t.Add(a,e)),e.onmessage=function(e){n(e)},i()}),o,r,a)}))}function V(e,t){var n=t.data;[L].forEach((function(t){try{t.call(null,e,n)}catch(e){E.a.error("Error from allWorkersListener_AES_IV",e)}}))}function L(e,t){-1!==[A.g.AUDIO_ENCODE,A.g.VIDEO_ENCODE,A.g.SHARING_ENCODE].indexOf(e)&&t.status===g.c&&(O("allWorkersListener_AES_IV",e,t),I.a.Notify_APPUI_SAFE(g.d,{workerType:e,iv:y.g.buffer2stringSplitByComma(t.data)}))}function G(e){var t=I.a.userNodeList||[],n=e.concat(t);I.a.userNodeList=y.g.removeDuplicates(n,(function(e,t){return e.userid!==t.userid})),[A.g.AUDIO_ENCODE,A.g.AUDIO_DECODE,A.g.VIDEO_ENCODE,A.g.VIDEO_DECODE,A.g.SHARING_ENCODE,A.g.SHARING_DECODE].forEach(function(){var e=p()(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next=e.t0===A.g.AUDIO_ENCODE?3:e.t0===A.g.AUDIO_DECODE?5:e.t0===A.g.VIDEO_ENCODE?7:e.t0===A.g.VIDEO_DECODE?9:e.t0===A.g.SHARING_ENCODE?11:e.t0===A.g.SHARING_DECODE?13:15;break;case 3:return n=I.a.audioEncodeInitInstance,e.abrupt("break",15);case 5:return n=I.a.audioDecInitInstance,e.abrupt("break",15);case 7:return n=I.a.videoInitInstance,e.abrupt("break",15);case 9:return n=I.a.videoDecInitInstance,e.abrupt("break",15);case 11:return n=I.a.sharingEncInitInstance,e.abrupt("break",15);case 13:return n=I.a.sharingDecInitInstance,e.abrupt("break",15);case 15:return e.prev=15,e.next=18,n.waitforInitSuccess();case 18:O("setUserNodeListToWorker init success",t),Jt(t,{userNodeList:I.a.userNodeList},A.d.SET_USER_NODE_LIST,!1,!0),e.next=25;break;case 22:e.prev=22,e.t1=e.catch(15),E.a.error("Error when sending user node list to worker",e.t1);case 25:case"end":return e.stop()}}),e,null,[[15,22]])})));return function(t){return e.apply(this,arguments)}}())}function W(e){I.a.isAudioPlayWork=e}function U(e){I.a.isVideoPlayWork=e,Jt(A.g.VIDEO_DECODE,{isVideoPlayWork:e},"VideoPlayStatus",!1,!0)}function F(e){I.a.isSharingPlayWork=e}var H,K=(H={SDK_TO_WORKER:"SDK_TO_WORKER",SDK_TO_WORKER_WAIT_OK:"SDK_TO_WORKER_WAIT_OK",SDK_TO_APP:"SDK_TO_APP",SDK_TO_SDK:"SDK_TO_SDK"},{nameMap:{INIT_VIDEO_ENCODE_SUCCESS:"INIT_VIDEO_ENCODE_SUCCESS",INIT_VIDEO_DECODE_SUCCESS:"INIT_VIDEO_DECODE_SUCCESS",CREATE_VIDEO_ENCODE_HANDLE_SUCCESS:"CREATE_VIDEO_ENCODE_HANDLE_SUCCESS",CREATE_VIDEO_DECODE_HANDLE_SUCCESS:"CREATE_VIDEO_DECODE_HANDLE_SUCCESS",CREATE_AUDIO_ENCODE_HANDLE_SUCCESS:"CREATE_AUDIO_ENCODE_HANDLE_SUCCESS",CREATE_AUDIO_DECODE_HANDLE_SUCCESS:"CREATE_AUDIO_DECODE_HANDLE_SUCCESS"},map:new Map,direction:H,clear:function(){this.map.clear()},subscribeMessage:function(e){var t=this.map.get(e);t&&(t.forEach((function(e){var t=e.direction,n=e.messageParams,r=e.handler;if(t===H.SDK_TO_APP)I.a.Notify_APPUI.apply(I.a,f()(n));else if(t===H.SDK_TO_WORKER_WAIT_OK)Jt.apply(void 0,f()(n));else if(t===H.SDK_TO_WORKER){var a=u()(n,2),o=a[0],i=a[1],s=Qt(o);s&&s.postMessage(i)}else t===H.SDK_TO_SDK&&r&&r(n)})),this.map.delete(e))},enqueueMessage:function(e){var t=e.name,n=e.messageParams,r=e.direction,a=s()(e,w);this.map.has(t)||this.map.set(t,[]),this.map.get(t).push(C({direction:r,messageParams:n||[]},a))}}),B={resetAudioEncode:function(e){!e&&I.a.isPreviewMode.audioEncode&&(I.a.isAudioEncodePostStart=!1),I.a.isPreviewMode.audioEncode=!!e},resetAudioDecode:function(e){!e&&I.a.isPreviewMode.audioDecode&&(I.a.isAudioDecodePostStart=!1),I.a.isPreviewMode.audioDecode=!!e},resetVideoEncode:function(e){!e&&I.a.isPreviewMode.videoEncode&&(I.a.isVideoEncodePostStart=!1),I.a.isPreviewMode.videoEncode=!!e},resetVideoDecode:function(e){!e&&I.a.isPreviewMode.videoDecode&&(I.a.isVideoDecodePostStart=!1),I.a.isPreviewMode.videoDecode=!!e}};function j(e,t){return Q.apply(this,arguments)}function Q(){return(Q=p()(m.a.mark((function e(t,n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I.a.localVideoEncMGR||(I.a.localVideoEncMGR=new v.d),I.a.videoEncWorkerPath=t.workerJsFileUrl,e.next=4,N(t.workerJsFileUrl,t.integrityHelper);case 4:return r=e.sent,I.a.videoEncResponseText=r,e.next=8,Qe(0,null,n,t);case 8:return K.subscribeMessage(K.nameMap.CREATE_VIDEO_ENCODE_HANDLE_SUCCESS),e.next=11,Be();case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e,t){return Y.apply(this,arguments)}function Y(){return(Y=p()(m.a.mark((function e(t,n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I.a.localVideoDecMGR||(I.a.localVideoDecMGR=new v.d),I.a.videoDecWorkerPath=t.workerJsFileUrl,e.next=4,N(t.workerJsFileUrl,t.integrityHelper);case 4:return r=e.sent,I.a.videoDecResponseText=r,e.next=8,He(0,null,n,t);case 8:return K.subscribeMessage(K.nameMap.CREATE_VIDEO_DECODE_HANDLE_SUCCESS),e.next=11,Ue();case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e,t){return z.apply(this,arguments)}function z(){return(z=p()(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De();case 2:return I.a.localAudioEncMGR||(I.a.localAudioEncMGR=new v.a),I.a.audioEncWorkerPath=t.workerJsFileUrl,e.next=6,N(t.workerJsFileUrl,t.integrityHelper);case 6:return I.a.audioEncodeResponse=e.sent,e.next=9,rt(0,n,t);case 9:return K.subscribeMessage(K.nameMap.CREATE_AUDIO_ENCODE_HANDLE_SUCCESS),e.next=12,tt();case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e,t){return Z.apply(this,arguments)}function Z(){return(Z=p()(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De();case 2:return I.a.localAudioDecMGR||(I.a.localAudioDecMGR=new v.a),I.a.audioDecWorkerPath=t.workerJsFileUrl,e.next=6,N(t.workerJsFileUrl,t.integrityHelper);case 6:return I.a.audioDecodeResponse=e.sent,"string"==typeof I.a.audioDecodeResponse?D.a.add_monitor("DAFL"+I.a.audioDecodeResponse.length):D.a.add_monitor("DAFF"),e.next=10,ze(0,null,n,t);case 10:return K.subscribeMessage(K.nameMap.CREATE_AUDIO_DECODE_HANDLE_SUCCESS),D.a.add_monitor("ADTS"),e.next=14,Ye();case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e,t){return ee.apply(this,arguments)}function ee(){return(ee=p()(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I.a.localSharingDecMGR||(I.a.localSharingDecMGR=new v.b),I.a.localMouseDecMGR||(I.a.localMouseDecMGR=new v.b),I.a.sharingDecWorkerPath=t.workerJsFileUrl,e.next=5,N(t.workerJsFileUrl,t.integrityHelper);case 5:return I.a.sharingDecodeResponse=e.sent,e.next=8,Ee(n,t);case 8:return e.next=10,re();case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e,t){return ne.apply(this,arguments)}function ne(){return(ne=p()(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I.a.localSharingEncMGR||(I.a.localSharingEncMGR=new v.b),I.a.sharingEncWorkerPath=t.workerJsFileUrl,e.next=4,N(t.workerJsFileUrl,t.integrityHelper);case 4:return I.a.sharingEncodeResponse=e.sent,e.next=7,ye(n,t);case 7:return e.next=9,oe();case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(){return ae.apply(this,arguments)}function ae(){return(ae=p()(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.sharingDecInitInstance.wasmSuccessPromise;case 2:(t=I.a.localSharingDecMGR.Get(I.a.SPECIAL_ID))&&!I.a.isSharingDecodePostStart&&(t.postMessage({command:"startMedia",websocket_ip_address:I.a.Sharing_WebSocket_Ip_Address,confId:I.a.localSharingPara.userid,confKey:"",logon:I.a.localSharingPara.logon,meetingid:I.a.localSharingPara.meetingid,meetingnumb:I.a.localSharingPara.meetingnumb,multiThreadNum:1,enableReplaceCanvasWhenContextLost:I.a.enableReplaceCanvasWhenContextLost}),I.a.isSharingDecodePostStart=!0);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(){return ie.apply(this,arguments)}function ie(){return(ie=p()(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.sharingEncInitInstance.wasmSuccessPromise;case 2:(t=I.a.localSharingEncMGR.Get(I.a.SPECIAL_ID))&&!I.a.isSharingEncodePostStart&&(1,D.a.add_monitor2("STN1"),n=null,I.a.ivObj&&(n=I.a.ivObj[A.g.SHARING_ENCODE],n=y.g.stringSplitByComma2Buffer(n)),t.postMessage({command:"startMedia",encode:!0,websocket_ip_address:I.a.Sharing_WebSocket_Ip_Address,confId:I.a.localSharingPara.userid,confKey:"",logon:I.a.localSharingPara.logon,isChromeOrEdge:y.g.browser.isChrome,meetingid:I.a.localSharingPara.meetingid,meetingnumb:I.a.localSharingPara.meetingnumb,multiThreadNum:1,iv:n,uplimit:I.a.uplimit}),I.a.isSharingEncodePostStart=!0);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(e){var t=e.data;I.a.SPECIAL_ID;try{!function(){if(t.status===g.zd)(function(e){try{var t=e.ssrcFromPDU;if(null==t)return!0;return(4294966272&I.a.localSharingPara.userid)!=(4294966272&t)}catch(e){return!0}})(t.data)&&Le(t.data);else if(t.status===g.Gd)b.a.publish(g.Xc,{body:{width:t.logicWidth,height:t.logicHeight,logicWidth:t.logicWidth,logicHeight:t.logicHeight}}),I.a.Notify_APPUI(g.Wc,{body:{width:t.logicWidth,height:t.logicHeight,logicWidth:t.logicWidth,logicHeight:t.logicHeight}});else if(t.status===g.Ib)I.a.Notify_APPUI(g.Hb,t.ssrc);else if(t.status===g.Zc)D.a.add_monitor2(t.data);else if(t.status===g.Sc)I.a.Notify_APPUI(g.Tc,{ssrc:t.ssrc});else if(t.status===g.Mc)!function(e,t,n,r,a,o,i,s,c,u,d,f,l){if(!I.a.isSharingPlayWork)return;var p={yuvdata:t,ntptime:n,ssrc:e,width:r,height:a,r_x:o,r_y:i,r_w:s,r_h:c,logic_w:u,logic_h:d,yuv_limited:f,isFromMainSession:l};I.a.mediaSDKHandle.SharingRenderObj.Put_Sharing_Data_From_Queue(p)}(t.sharing_ssrc,t.data,t.sharing_timestamp,t.sharing_width,t.sharing_height,t.rendering_x,t.rendering_y,t.rendering_w,t.rendering_h,t.logic_w,t.logic_h,t.yuv_limited,t.isFromMainSession);else if(t.status===g.ic)!function(e,t,n,r,a,o,i,s,c,u){if(!I.a.isSharingPlayWork)return;var d={buffer:t,ntptime:n,ssrc:e,width:r,height:a,r_x:o,r_y:i,mLogic_w:s,mLogic_h:c,sync_id:u};I.a.mediaSDKHandle.SharingRenderObj.Put_Mouse_Data_Into_Queue(d)}(t.mouse_ssrc,t.data,t.mouse_timestamp,t.mouse_width,t.mouse_height,t.mouse_x,t.mouse_y,t.mLogic_w,t.mLogic_h,t.sync_id);else if(t.status===g.Oc)I.a.Notify_APPUI(g.Nc,{ssrc:t.ssrc,size:t.size,fps:t.size});else if(t.status===g.fe){var n=C({encoding:!1},t.data);I.a.Notify_APPUI_SAFE(g.fe,n)}else if(t.status===g.Bd)D.a.add_monitor("SDWS"),I.a.isSharingDecodeWASMOK=!0,I.a.sharingDecInitInstance.setWasmSuccess();else if(t.status===g.Ad)D.a.add_monitor("SDWF"),I.a.sharingDecInitInstance.setWasmSuccess(!1);else if(t.status===g.Fd)D.a.add_monitor("SDHS"),I.a.sharingDecInitInstance.setHanderSuccess();else if(t.status===g.Ed)D.a.add_monitor("SHHF"),I.a.sharingDecInitInstance.setHanderSuccess(!1);else if(t.status===g.Dd)D.a.add_monitor("SDSS"),I.a.sharingDecInitInstance.setSocketSuccess();else if(t.status===g.Cd)D.a.add_monitor("SDSF"),I.a.sharingDecInitInstance.isSocketInitSuccess()&&I.a.Notify_APPUI_SAFE(g.ve,null),I.a.sharingDecInitInstance.setSocketSuccess(!1);else{if(t.status==g.hc)return void xt(t.data);if(t.status===g.zb){var r=I.a.localSharingDecMGR.map.get(I.a.SPECIAL_ID);pe(t.url,r)}else if(t.status==g.e)I.a.monitorSharingDecodeAPPInfo=t,xt(I.a.monitorSharingDecodeAPPInfo.data),I.a.monitorSharingDecodeAPPInfo=null;else if(t.status==g.Pe)D.a.add_monitor("SD"+t.data);else if(t.status==_.g)E.a.error("Error from sharing decode worker: ".concat(t.errorMessage),t.errorEvent);else if(t.status==g.kc)I.a.Notify_APPUI(g.Re,{canvasId:t.canvasId,replaceCanvas:!!t.replaceCanvas});else if(t.status==g.Pc)I.a.monitorDecodeSharing=t;else if(t.status==g.oe){var a=t.data;b.a.triggerSync(g.je,a)}else"SHARING_DECODE_PTR"==t.status?b.a.triggerSync("SHARING_DECODE_PTR",t):"WFMO"==t.status?le(A.g.SHARING_DECODE):V(A.g.SHARING_DECODE,e)}}()}catch(e){O.error(e)}}function ce(e){var t=e.data;I.a.SPECIAL_ID;try{!function(){if(t.status===g.zd)Le(t.data);else if(t.status===g.Uc)D.a.add_monitor("GIDF");else if(t.status===g.Bd)D.a.add_monitor("SEWS"),I.a.isSharingEncodeWASMOK=!0,I.a.sharingEncInitInstance.setWasmSuccess();else if(t.status===g.Ad)D.a.add_monitor("SEWF"),I.a.sharingEncInitInstance.setWasmSuccess(!1);else if(t.status===g.Fd)D.a.add_monitor("SEHS"),I.a.sharingEncInitInstance.setHanderSuccess();else if(t.status===g.Ed)D.a.add_monitor("SEHF"),I.a.sharingEncInitInstance.setHanderSuccess(!1);else if(t.status===g.Dd)D.a.add_monitor("SESS"),I.a.sharingEncInitInstance.setSocketSuccess();else if(t.status===g.Cd)D.a.add_monitor("SEWF"),I.a.sharingEncInitInstance.isSocketInitSuccess()&&I.a.Notify_APPUI_SAFE(g.ve,null),I.a.sharingEncInitInstance.setSocketSuccess(!1);else if(t.status==g.Lc)D.a.add_monitor2("SCFOK");else if(t.status==g.Jd)D.a.add_monitor("SCFF"+t.format);else if(t.status==g.we)I.a.mediaSDKHandle.isSupportVideoTrackReader?(I.a.mediaSDKHandle.canISendNextSharingFrame=!0,I.a.mediaSDKHandle.Process_Sharing()):I.a.mediaSDKHandle.Process_Sharing();else if(t.status==g.cf)I.a.mediaSDKHandle.Process_Sharing();else if(t.status===g.mb)I.a.Notify_APPUI(g.lb,{width:t.width,height:t.height});else{if(t.status==g.hc)return void xt(t.data);if(t.status==g.zb){var n=I.a.localSharingEncMGR.map.get(I.a.SPECIAL_ID);pe(t.url,n)}else if(t.status===g.fe){var r=C({encoding:!0},t.data);I.a.Notify_APPUI_SAFE(g.fe,r)}else t.status==g.e?(I.a.monitorSharingEncodeAPPInfo=t,xt(I.a.monitorSharingEncodeAPPInfo.data),I.a.monitorSharingEncodeAPPInfo=null):t.status==g.Pe?D.a.add_monitor("SE"+t.data):t.status==g.kc?I.a.Notify_APPUI(g.Re,{canvasId:t.canvasId,replaceCanvas:!!t.replaceCanvas}):t.status==_.g?E.a.error("Error from sharing encode worker: ".concat(t.errorMessage),t.errorEvent):t.status==g.Ve?I.a.Notify_APPUI(g.Le,{data:t.data}):"WFMO"==t.status?le(A.g.SHARING_ENCODE):V(A.g.SHARING_ENCODE,e)}}()}catch(e){O.error(e)}}function ue(e){var t=e.data,n=(I.a.SPECIAL_ID,!0);try{!function(){if(t.status===g.ie);else if("NewActiveSpeakerFirstframeCallback"===t.status)I.a.Notify_APPUI(g.nc,{ssrc:t.ssrc});else if(t.status===g.se)I.a.Notify_APPUI(g.qb,{width:t.width,height:t.height});else if(t.status===g.oe){var r=t.data;b.a.triggerSync(g.je,r)}else if(t.status===g.Xe){var a=I.a.mediaSDKHandle.videoDecodeFrameBackSABRingBufferConsumer;a&&a.consumeAll(I.a.mediaSDKHandle.bVideoDecodeFrameBackSABRingBufferConsumeCopyData)}else if(t.status===g.re)D.a.add_monitor2(t.data);else if(t.status==g.kc)D.a.add_monitor("MWGLF"),I.a.Notify_APPUI(g.Re,{canvasId:t.canvasId,replaceCanvas:!!t.replaceCanvas});else if(t.status==g.Qe)D.a.add_monitor("MWCGLF");else if(t.status===g.le){var o=t.data;b.a.triggerSync(g.je,o)}else if(0===t.status)Ge(t.video_ssrc,t.data,t.video_timestamp,t.video_width,t.video_height,t.rendering_x,t.rendering_y,t.rendering_w,t.rendering_h,t.rotation,t.yuv_limited);else if(t.status===g.Ae)D.a.add_monitor("VDWS"),I.a.isVideoDecodeWASMOK=!0,I.a.videoDecInitInstance.setWasmSuccess(),I.a.videoDecInitInstance.setSocketSuccess(),I.a.isPreviewMode.videoDecode&&I.a.Notify_APPUI_SAFE(g.vc);else if(t.status===g.sb){var i=t.size;y.g.isGoogleNestChrome()&&(i=i<=2?i:2),I.a.Notify_APPUI(g.ke,{ssrc:t.ssrc,size:i}),D.a.add_monitor("VDMS:"+i)}else if(t.status===g.ze)D.a.add_monitor("VDWF"),I.a.videoDecInitInstance.setWasmSuccess(!1);else if(t.status===g.ye)D.a.add_monitor("VDHS"),I.a.videoDecInitInstance.setHanderSuccess();else if(t.status===g.xe)D.a.add_monitor("VDHF"),I.a.videoDecInitInstance.setHanderSuccess(!1);else if(t.status===g.Ce)D.a.add_monitor("VDSS");else if(t.status===g.Be)D.a.add_monitor("VDSF"),I.a.videoDecInitInstance.isSocketInitSuccess()&&I.a.Notify_APPUI_SAFE(g.ve,null),I.a.videoDecInitInstance.setSocketSuccess(!1);else if(t.status===g.gb)D.a.add_monitor("VDWPS");else if(t.status===g.fb)D.a.add_monitor("VDWPCLOSE"),I.a.sendMessageToRwg(g.Ec,{evt:g.ef,body:{flag:2,type:A.h.ZOOM_CONNECTION_VIDEO}},!1);else if(t.status===g.eb)D.a.add_monitor("VDWSCLOSE");else if(t.status===g.ob)D.a.add_monitor("VDTTP:"+t.type);else if(t.status==g.hc)I.a.monitorDecodeVideo=t,xt(t.data),n=!1;else if(t.status==g.e)I.a.monitorVideoDecodeAPPInfo=t,I.a.sendMessageToRwg(g.gc,{evt:4167,seq:1,body:{data:I.a.monitorVideoDecodeAPPInfo.data}}),I.a.monitorVideoDecodeAPPInfo=null;else if(t.status==g.zb){var s=I.a.localVideoDecMGR.map.get(I.a.SPECIAL_ID);pe(t.url,s)}else if(t.status==g.Pe)D.a.add_monitor("VD"+t.data);else if(t.status==_.g)E.a.error("Error from video decode worker: ".concat(t.errorMessage),t.errorEvent);else if(t.status===g.kb)I.a.Notify_APPUI_SAFE(g.kb,t.data);else if(t.status===g.jb)I.a.Notify_APPUI_SAFE(g.jb,t.data);else if(t.status===g.qe){var c=C({encoding:!1},t.data);I.a.Notify_APPUI_SAFE(g.qe,c)}else t.status===g.Kb?D.a.add_monitor(t.data):"VIDEO_DECODE_PTR"===t.status?b.a.triggerSync("VIDEO_DECODE_PTR",t):"FIRST_VIDEO_FRAME"===t.status?I.a.Notify_APPUI_SAFE(g.Jb):t.status===g.mc?I.a.Notify_APPUI_SAFE(g.mc,{isUplink:t.isUplink,networkLevel:t.networkLevel,bwLevel:t.bwLevel}):"WFMO"==t.status?le(A.g.VIDEO_DECODE):V(A.g.VIDEO_DECODE,e)}()}catch(e){O.error(e)}n&&P&&se(e)}function de(e){var t=e.data,n=(I.a.SPECIAL_ID,!0);if(t!==g.Ye){try{!function(){if(t.status===g.ie);else if("VBPredictDone"===t.status)D.a.add_monitor("VBPOK"+t.predictCostTime),I.a.isPreviewMode.videoEncode&&K.enqueueMessage({name:K.nameMap.INIT_VIDEO_ENCODE_SUCCESS,messageParams:[g.ee,null],direction:K.direction.SDK_TO_APP}),I.a.Notify_APPUI(g.ee,null);else if("VBPredictAbout3s"===t.status)D.a.add_monitor("VBP3S"),I.a.Notify_APPUI(g.de,null);else if("VBPredictAbout10s"===t.status)D.a.add_monitor("VBP10S"),I.a.Notify_APPUI(g.ce,null);else if(t.status===g.oe){var r=t.data;b.a.triggerSync(g.je,r)}else if(0===t.status);else if(t.status===g.Ge||t.status===g.Ae)D.a.add_monitor("VEWS"),I.a.isVideoEncodeWASMOK=!0,I.a.videoInitInstance.setWasmSuccess();else if(t.status===g.Fe)D.a.add_monitor("VEWF"),I.a.videoInitInstance.setWasmSuccess(!1);else if(t.status===g.Ee||g.ye===t.status)D.a.add_monitor("VEHS"),I.a.videoInitInstance.setHanderSuccess();else if(t.status===g.De||g.xe===t.status)D.a.add_monitor("VEHF"),I.a.videoInitInstance.setHanderSuccess(!1);else if(t.status===g.Ie||g.Ce===t.status)D.a.add_monitor("VESS"),I.a.videoInitInstance.setSocketSuccess();else if(t.status===g.He||t.status===g.Be)D.a.add_monitor("VESF"),I.a.videoInitInstance.isSocketInitSuccess()&&I.a.Notify_APPUI_SAFE(g.ve,null),I.a.videoInitInstance.setSocketSuccess(!1);else if(t.status===g.gb)D.a.add_monitor("VEWPS");else if(t.status===g.fb)D.a.add_monitor("VEWPCLOSE");else if(t.status===g.eb)D.a.add_monitor("VEWSCLOSE");else if(t.status===g.ob)D.a.add_monitor("VETTP:"+t.type);else if(t.status===g.nb)D.a.add_monitor("VEHORS:"+t.type);else if(t.status===g.we)I.a.mediaSDKHandle.Process_Video();else if(t.status===g.ib)I.a.Notify_APPUI(g.hb,{width:t.width,height:t.height});else if(t.status===g.ge)D.a.add_monitor("VCRC"+t.width),I.a.mediaSDKHandle.Change_Video_Capture_Resolution(t.width,t.height);else if(t.status==g.he)D.a.add_monitor2("VCFOK");else if(t.status==g.Kd)D.a.add_monitor("VCFF","format: ".concat(t.format));else{if(t.status==g.hc)return n=!1,void xt(t.data);if(t.status==g.e)I.a.monitorVideoEncodeAPPInfo=t,xt(I.a.monitorVideoEncodeAPPInfo.data),I.a.monitorVideoEncodeAPPInfo=null;else if(t.status==g.Pc)I.a.monitorEncodeSharing=t;else if(t.status===g.zb){var a=I.a.localVideoEncMGR.map.get(I.a.SPECIAL_ID);pe(t.url,a)}else if(t.status==g.Pe)D.a.add_monitor("VE"+t.data);else if(t.status==_.g)E.a.error("Error from video encode worker: ".concat(t.errorMessage),t.errorEvent);else if(t.status==g.Hd){var o=I.a.SPECIAL_ID;if(I.a.localVideoDecMGR)(i=I.a.localVideoDecMGR.map.get(o))&&i.postMessage({command:"encodedbuffer",wasmMemory:t.wasmMemory})}else if(t.status==g.Ke){var i,s=I.a.SPECIAL_ID;if(I.a.localVideoDecMGR)(i=I.a.localVideoDecMGR.map.get(s))&&i.postMessage({command:"encodedimagebitmapwasmptr",data:t.data,wasmMemory:t.wasmMemory});else I.a.isPreviewMode.videoEncode&&K.enqueueMessage({name:K.nameMap.INIT_VIDEO_DECODE_SUCCESS,messageParams:[A.g.VIDEO_DECODE,{command:"encodedimagebitmapwasmptr",data:t.data,wasmMemory:t.wasmMemory}],direction:K.direction.SDK_TO_WORKER})}else if(t.status===g.qe){var c=C({encoding:!0},t.data);I.a.Notify_APPUI_SAFE(g.qe,c)}else if(t.status===g.fe){var u=C({encoding:!0},t.data);I.a.Notify_APPUI_SAFE(g.fe,u)}else t.status==g.kc?I.a.Notify_APPUI(g.Re,{canvasId:t.canvasId,replaceCanvas:!!t.replaceCanvas}):"VIDEO_ENCODE_PTR"===t.status?b.a.triggerSync("VIDEO_ENCODE_PTR",t):t.status===g.Je?I.a.mediaSDKHandle.init_Notify_APPUI(!0,A.g.VIDEO_ENCODE):t.status==g.te?I.a.mediaSDKHandle.Change_Sharing_Capture_Resolution(t.mode):t.status===g.mc?I.a.Notify_APPUI_SAFE(g.mc,{isUplink:t.isUplink,networkLevel:t.networkLevel,bwLevel:t.bwLevel}):"WFMO"==t.status?le(A.g.VIDEO_ENCODE):V(A.g.VIDEO_ENCODE,e)}}()}catch(e){O.error(e)}n&&P&&ce(e)}else{var r=I.a.mediaSDKHandle.videoEncodeRingbufferConsumer;r&&r.consumeAll()}}function fe(e,t){return new WebAssembly.Memory({initial:e,maximum:t,shared:!0})}function le(e){var t,n,r=!1,a=y.g.isIphoneOrIpadBrowser()?4096:8192;(e==A.g.VIDEO_ENCODE?(n=I.a.localVideoEncMGR.map.get(0),window.VE?r=!0:(P&&(a=16384),window.VE=fe(1024,a)),t=window.VE):e==A.g.VIDEO_DECODE?(n=I.a.localVideoDecMGR.map.get(0),window.VD?r=!0:(P&&(a=16384),window.VD=fe(1024,a)),t=window.VD):e==A.g.SHARING_ENCODE?(n=I.a.localSharingEncMGR.map.get(0),window.SE?r=!0:window.SE=fe(1024,a),t=window.SE):e==A.g.SHARING_DECODE&&(n=I.a.localSharingDecMGR.map.get(0),window.SD?r=!0:window.SD=fe(1024,a),t=window.SD),r)&&new Uint8Array(t.buffer).fill(0);n.postMessage({command:"wasmMemory",data:t})}function pe(e,t){y.g.downloadBinary(e).then((function(e){t.postMessage({command:"DOWNLOAD_WASM_FROM_MAIN_THREAD_OK",data:e})})).catch((function(e){t.postMessage({command:"DOWNLOAD_WASM_FROM_MAIN_THREAD_FAILED",data:e.message})}))}var he,me,ge=(he={send:null,recv:null},me=null,{push:function(e){var t=e.log,n=e.isSend;t&&(-1===t.indexOf("SPEECHOUTPUT")&&-1===t.indexOf("SPEECHINPUT")||(n?he.send=t:he.recv=t,this._clearTImer(),me=setTimeout((function(){if(he.send||he.recv){var e=/(WCL_MCM_AUDIO)(.*?)(\d+)(.*?)(\{\[SPEECHOUTPUT\]\})(.*?)(\{\[NETWORK\]\})(.*?)(\{\[END\]\})/.exec(he.send||"")||[],t=/(WCL_MCM_AUDIO)(.*?)(\d+)(.*?)(\{\[SPEECHINPUT\]\})(.*?)(\{\[SEND\]\})(.*?)(\{\[DENOISE\]\})(.*?)(\{\[END\]\})/.exec(he.recv||"")||[],n="".concat(e[1]||t[1]).concat(e[2]||t[2]||"").concat(e[3]||t[3]).concat(e[4]||t[4]||""),r=(t[6]||",0,0,0,").trim(),a=(e[6]||",0,0,0,").trim();","===r[r.length-1]&&","===a[0]?r=r.slice(0,r.length-1):","!==r[r.length-1]&&","!==a[0]&&(r+=",");var o="{[SPEECH]}".concat(r).concat(a,"{[NETWORK]}").concat(e[8]||",0,0,0,","{[SEND]}").concat(t[8]||",0,0,","{[DENOISE]}").concat(t[10],"{[END]}"),i="".concat(n).concat(o);I.a.sendMessageToRwg(g.gc,{evt:4167,seq:1,body:{data:i}})}}),2e3)))},_clearTImer:function(){clearTimeout(me),me=null},clear:function(){he={send:null,recv:null},this._clearTImer()}});function _e(e){var t=e.data;I.a.SPECIAL_ID;try{!function(){if(0===t.status)t.time?I.a.AudioNode&&I.a.AudioNode.postData("data",{ssrc:I.a.CurrentSSRC,data:t.data,time:t.time}):I.a.AudioNode&&I.a.AudioNode.postData("data",{ssrc:I.a.CurrentSSRC,data:t.data,time:null});else if(t.status===g.J||t.status===g.E)D.a.add_monitor("ADWS"),I.a.isAudioDecodeWASMOK=!0,I.a.audioDecInitInstance.setWasmSuccess(),I.a.isPreviewMode.audioDecode&&I.a.Notify_APPUI_SAFE(g.uc);else if(t.status===g.D)D.a.add_monitor("ADWF"),I.a.audioDecInitInstance.setWasmSuccess(!1);else if(t.status===g.C)D.a.add_monitor("ADHS"),I.a.audioDecInitInstance.setHanderSuccess();else if(t.status===g.B)D.a.add_monitor("ADHF"),I.a.audioDecInitInstance.setHanderSuccess(!1);else if(t.status===g.G)D.a.add_monitor("ADSS"),I.a.audioDecInitInstance.setSocketSuccess();else if(t.status===g.F)D.a.add_monitor("ADSF"),I.a.audioDecInitInstance.isSocketInitSuccess()&&I.a.Notify_APPUI_SAFE(g.y,null),I.a.audioDecInitInstance.setSocketSuccess(!1);else if(t.status===g.gb)D.a.add_monitor("ADWPS");else if(t.status===g.fb)D.a.add_monitor("ADWPCLOSE"),I.a.sendMessageToRwg(g.Ec,{evt:g.ef,body:{flag:2,type:A.h.ZOOM_CONNECTION_AUDIO}},!1);else if(t.status===g.eb)D.a.add_monitor("ADWSCLOSE");else if(t.status===g.ob)D.a.add_monitor("ADTTP:"+t.type);else if(t.status==g.hc)I.a.monitorDecodeAudio=t;else if(t.status===g.zb){var n=I.a.localAudioDecMGR.map.get(I.a.SPECIAL_ID);pe(t.url,n)}else if(t.status==g.Pe)D.a.add_monitor("AD"+t.data);else if(t.status==_.g)E.a.error("Error from audio decode worker: ".concat(t.errorMessage),t.errorEvent);else if(t.status==g.pb)t.at&&I.a.CurrentSSRCTime!==t.at&&(I.a.CurrentSSRCTime=t.at,I.a.audioPlayTime=Date.now()),t.st&&I.a.mediaSDKHandle.SharingRenderObj&&I.a.mediaSDKHandle.SharingRenderObj.SetcATimeStamp(t.st);else if("multiCurrentTime"==t.status){if(I.a.localVideoDecMGR){var r=I.a.localVideoDecMGR.map.get(I.a.SPECIAL_ID);r&&r.postMessage({command:"audioDecodeTime",data:t.data,status:1})}}else if(t.status==g.n)b.a.triggerSync(g.k,t.data);else if(t.status===g.r)ge.push({log:t.data,isSend:!0});else if(t.status===g.t){var a=C({encoding:!1},t.data);I.a.Notify_APPUI_SAFE(g.t,a)}else"AUDIO_WASM_INFO"===t.status?I.a.audioWasmInfo=t.data:V(A.g.AUDIO_DECODE,e)}()}catch(e){O.error(e)}}function ve(e){if(I.a.localAudioDecMGR||I.a.isPreviewMode.audioEncode)try{!function(){var t=e.data;if(t.status===g.We){var n=I.a.mediaSDKHandle.audioEncodeRingBufferConsumer;n&&n.consumeAll(!0)}else if(0==t.status){var r=I.a.SPECIAL_ID,a=I.a.localAudioDecMGR.map.get(r);a&&a.postMessage({command:"EncodedAudioFrame",data:t.data},[t.data.buffer])}else if(t.status==g.n)b.a.triggerSync(g.k,t.data);else if(t.status===g.J||t.status===g.E)D.a.add_monitor("AEWS"),I.a.isAudioEncodeWASMOK=!0,I.a.audioEncodeInitInstance.setWasmSuccess();else if(t.status===g.I||t.status===g.D)D.a.add_monitor("AEWF"),I.a.audioEncodeInitInstance.setWasmSuccess(!1);else if(t.status===g.C)D.a.add_monitor("AEHS"),I.a.audioEncodeInitInstance.setHanderSuccess();else if(t.status===g.G)D.a.add_monitor("AESS"),I.a.audioEncodeInitInstance.setSocketSuccess();else if(t.status===g.F)D.a.add_monitor("AESF"),I.a.audioEncodeInitInstance.isSocketInitSuccess()&&I.a.Notify_APPUI_SAFE(g.y,null),I.a.audioEncodeInitInstance.setSocketSuccess(!1);else if(t.status===g.B)D.a.add_monitor("AEHF"),I.a.audioEncodeInitInstance.setHanderSuccess(!1);else if(t.status===g.H)I.a.Notify_APPUI_SAFE(g.H,null);else if(t.status===g.gb)D.a.add_monitor("AEWPS");else if(t.status===g.fb)D.a.add_monitor("AEWPCLOSE");else if(t.status===g.eb)D.a.add_monitor("AEWSCLOSE");else if(t.status===g.ob)D.a.add_monitor("AETTP:"+t.type);else if(t.status===g.L)I.a.Notify_APPUI&&I.a.Notify_APPUI(g.z,null);else if(t.status===g.l)I.a.indexDbObject.put(t.delay,"delay"),I.a.openIndexFlag&&I.a.indexDbObject.select("delay");else if(t.status===g.zb){var o=I.a.localAudioEncMGR.map.get(I.a.SPECIAL_ID);pe(t.url,o)}else if(t.status==g.Pe)D.a.add_monitor("AE"+t.data);else if(t.status==_.g)E.a.error("Error from audio encode worker: ".concat(t.errorMessage),t.errorEvent);else if(t.status==g.j);else if(t.status===g.r)ge.push({log:t.data,isSend:!1});else if(t.status===g.t){var i=C({encoding:!0},t.data);I.a.Notify_APPUI_SAFE(g.t,i)}else t.status===g.K?I.a.mediaSDKHandle.init_Notify_APPUI(!0,A.g.AUDIO_ENCODE):"AUDIO_WASM_INFO"===t.status?I.a.audioWasmInfo=t.data:V(A.g.AUDIO_ENCODE,e)}()}catch(e){O.error(e)}}function ye(e,t){return Se.apply(this,arguments)}function Se(){return(Se=p()(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.isDestroy){e.next=2;break}return e.abrupt("return",O("WorkerType:sharingEnc;The relative SDK instance is destroy, don't start relative worker, avoid multiple same workers. "));case 2:if(I.a.isSharingEncodeThreadStart){e.next=6;break}return I.a.isSharingEncodeThreadStart=!0,e.next=6,T(n,I.a.localSharingEncMGR,ce,A.g.SHARING_ENCODE,t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ee(e,t){return be.apply(this,arguments)}function be(){return(be=p()(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.isDestroy){e.next=2;break}return e.abrupt("return",O("WorkerType:sharingDec;The relative SDK instance is destroy, don't start relative worker, avoid multiple same workers. "));case 2:if(I.a.isSharingDecodeThreadStart){e.next=6;break}return I.a.isSharingDecodeThreadStart=!0,e.next=6,T(n,I.a.localSharingDecMGR,se,A.g.SHARING_DECODE,t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function De(){return Ae.apply(this,arguments)}function Ae(){return(Ae=p()(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=y.g.browser.isSafari&&y.g.getMacSafariMajorVersion()<16,I.a.sharedBuffer||!y.g.isSupportSharedArrayBuffer()||t||(O("LP2PSP"),n=1,y.g.browser.isFirefox&&(n=48),I.a.sharedBuffer={inputState:new SharedArrayBuffer(24),inputBuffer:new SharedArrayBuffer(640*n*4*4),sharingInputState:new SharedArrayBuffer(24),sharingInputBuffer:new SharedArrayBuffer(640*n*4*4),outputState:new SharedArrayBuffer(24),outputBuffer:new SharedArrayBuffer(640*n*4*4),rtpBuffer:new SharedArrayBuffer(120008)}),D.a.add_monitor("INITSAB"+!!I.a.sharedBuffer),I.a.decoderinworklet=I.a.decoderinworkletOP&&I.a.sharedBuffer;case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(e,t){var n;I.a.localSharingPara?Object.assign(I.a.localSharingPara,t):I.a.localSharingPara=t,n=e,I.a.Sharing_WebSocket_Ip_Address=n}function we(e,t){I.a.localAudioPara?Object.assign(I.a.localAudioPara,t):I.a.localAudioPara=t,Ce(e)}function Me(e,t){I.a.localVideoPara?Object.assign(I.a.localVideoPara,t):I.a.localVideoPara=t,Pe(e)}function Ce(e){I.a.Audio_WebSocket_Ip_Address=e}function Oe(e){I.a.Audio_Web_Transport_Ip_Address=e}function Pe(e){I.a.Video_WebSocket_Ip_Address=e}function ke(e){I.a.Video_Web_Transport_Ip_Address=e}function xe(){!function(e){if(e=I.a.SPECIAL_ID,I.a.localAudioEncMGR){var t=I.a.localAudioEncMGR.map.get(e);t&&(t.postMessage({command:"closeMedia"}),I.a.localAudioEncMGR.map.delete(e)),I.a.isAudioEncodePostStart=!1}}(I.a.SPECIAL_ID),function(e){if(e=I.a.SPECIAL_ID,I.a.localAudioDecMGR){var t=I.a.localAudioDecMGR.map.get(I.a.SPECIAL_ID);t&&(t.postMessage({command:"closeMedia"}),I.a.localAudioDecMGR.map.delete(e)),I.a.isAudioDecodePostStart=!1}}(I.a.SPECIAL_ID),I.a.localAudioDecMGR=null,I.a.localAudioEncMGR=null}function Re(){!function(e){if(e=I.a.SPECIAL_ID,I.a.localVideoDecMGR){var t=I.a.localVideoDecMGR.map.get(e);t&&(t.postMessage({command:"closeMedia"}),I.a.localVideoDecMGR.map.delete(e)),I.a.isVideoDecodePostStart=!1}}(I.a.SPECIAL_ID),I.a.localVideoDecMGR=null,I.a.localVideoEncMGR=null}function Ne(){!function(){var e=I.a.SPECIAL_ID;if(I.a.localSharingDecMGR){var t=I.a.localSharingDecMGR.Get(e);t&&(t.postMessage({command:"closeMedia"}),I.a.localSharingDecMGR=null),I.a.isSharingDecodeThreadStart=!1}}()}function Te(e,t,n,r,a){if(I.a.localVideoEncMGR){var o=I.a.localVideoEncMGR.map.get(e);if(o){var i={command:"encodeVideoFrame",data:t,stride:n,x:r,y:a};o.postMessage(i,[i.data.buffer])}}}function Ve(e,t,n,r,a,o){var i,s;(i=P?I.a.localVideoEncMGR.map.get(e):I.a.localSharingEncMGR.map.get(e))&&(t?(s={command:"encodeSharingFrame",data:t,width:a,height:o},i.postMessage(s,[s.data.buffer])):(s={command:"encodeSharingFrame"},i.postMessage(s)))}function Le(e){I.a.localSharingDecMGR&&("sharingPara"==e.type&&(D.a.add_monitor("SHPA"),b.a.publish(g.Xc,e.data),I.a.Notify_APPUI(g.Wc,e.data)),I.a.isSharingPlayWork&&I.a.localSharingDecMGR.PutData(e))}function Ge(e,t,n,r,a,o,i,s,c,u,d){if(I.a.isVideoPlayWork){var f={yuvdata:t,ntptime:n,ssrc:e,width:r,height:a,r_x:o,r_y:i,r_w:s,r_h:c,rotation:u,yuv_limited:d};f.ssrc=f.ssrc>>10<<10,I.a.mediaSDKHandle.VideoRenderObj.Put_Video_Data_Queue(f)}}function We(){return I.a.localSharingDecMGR?I.a.localSharingDecMGR.SharingQueueMGR.ClearQueue():I.a.localMouseDecMGR?I.a.localMouseDecMGR.SharingQueueMGR.ClearQueue():0}function Ue(){return Fe.apply(this,arguments)}function Fe(){return(Fe=p()(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I.a.isPreviewMode.videoDecode){e.next=2;break}return e.abrupt("return");case 2:if(I.a.localVideoDecMGR){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,I.a.videoDecInitInstance.wasmSuccessPromise;case 6:(t=I.a.localVideoDecMGR.map.get(I.a.SPECIAL_ID))&&!I.a.isVideoDecodePostStart&&(I.a.isVideoDecodePostStart=!0,n=C(C({command:"startMedia",websocket_ip_address:I.a.Video_WebSocket_Ip_Address+"&mode=5",confId:I.a.localVideoPara.confId,confKey:"",logon:I.a.localVideoPara.logon,mtu_size:0,meetingid:I.a.localVideoPara.meetingid,meetingnumb:I.a.localVideoPara.meetingnumb,videoencodethreadnumb:1,videodecodethreadnumb:I.a.localVideoPara.videodecodethreadnumb,isFirefox:I.a.localVideoPara.isFirefox,isSupportMultiThread:I.a.localVideoPara.isSupportMultiThread,isSupportVideoTrackReader:I.a.localVideoPara.isSupportVideoTrackReader,isSupportOffscreenCanvas:I.a.localVideoPara.isSupportOffscreenCanvas,isenablehw:I.a.localVideoPara.isenablehw,isEnableVideoDecodeHardWareThread:I.a.localVideoPara.isEnableVideoDecodeHardWareThread,qoson:I.a.localVideoPara.qoson,isEnableHardWareThread:I.a.localVideoPara.isEnableHardWareThread,isTeslaMode:I.a.localVideoPara.isTeslaMode,enableMultiDecodeVideoWithoutSAB:!!I.a.enableMultiDecodeVideoWithoutSAB,enableReplaceCanvasWhenContextLost:I.a.enableReplaceCanvasWhenContextLost},I.a.Video_Web_Transport_Ip_Address?{webtransportURL:I.a.Video_Web_Transport_Ip_Address+"&mode=1"}:{}),{},{enableAudioBridge:I.a.enableAudioBridge}),t.postMessage(n),I.a.isVideoDecodePostStart=!0);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function He(e,t,n,r){return Ke.apply(this,arguments)}function Ke(){return(Ke=p()(m.a.mark((function e(t,n,r,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r||!r.isDestroy){e.next=2;break}return e.abrupt("return",O("WorkerType:videoDec;The relative SDK instance is destroy, don't start relative worker, avoid multiple same workers. "));case 2:if(I.a.isVideoDecodeThreadStart){e.next=6;break}return I.a.isVideoDecodeThreadStart=!0,e.next=6,T(a,I.a.localVideoDecMGR,ue,A.g.VIDEO_DECODE,r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Be(){return je.apply(this,arguments)}function je(){return(je=p()(m.a.mark((function e(){var t,n,r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(I.a.localVideoEncMGR){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,I.a.videoInitInstance.wasmSuccessPromise;case 4:(t=I.a.localVideoEncMGR.map.get(I.a.SPECIAL_ID))&&!I.a.isVideoEncodePostStart&&(I.a.isVideoEncodePostStart=!0,n=0,n="firefox"===y.g.browserType.browser?1080:1070,I.a.mediaSDKHandle.mtu_size=n,r=null,I.a.ivObj&&(r=I.a.ivObj[A.g.VIDEO_ENCODE],r=y.g.stringSplitByComma2Buffer(r)),a=C(C({command:"startMedia",websocket_ip_address:I.a.Video_WebSocket_Ip_Address+"&mode=2",confId:I.a.localVideoPara.confId,confKey:"",logon:I.a.localVideoPara.logon,sendvideo:!0,isChromeOrEdge:y.g.browser.isChrome,mtu_size:n,meetingid:I.a.localVideoPara.meetingid,meetingnumb:I.a.localVideoPara.meetingnumb,videoencodethreadnumb:I.a.localVideoPara.videoencodethreadnumb,iv:r,videodecodethreadnumb:I.a.localVideoPara.videodecodethreadnumb,isSupportMultiThread:I.a.localVideoPara.isSupportMultiThread,qoson:I.a.localVideoPara.qoson,isSupportVirtualBackground:I.a.localVideoPara.isSupportVirtualBackground,uplimit:I.a.uplimit,isSupportWebCodecEnocde:I.a.localVideoPara.isSupportWebCodecEnocde,initWebCodecFlag:I.a.localVideoPara.initWebCodecFlag,is360penablehw:I.a.localVideoPara.is360penablehw,enable720p:I.a.localVideoPara.enable720p,enableReplaceCanvasWhenContextLost:I.a.enableReplaceCanvasWhenContextLost,isPreviewMode:I.a.isPreviewMode.videoEncode},I.a.Video_Web_Transport_Ip_Address?{webtransportURL:I.a.Video_Web_Transport_Ip_Address+"&mode=2"}:{}),{},{enableAudioBridge:I.a.enableAudioBridge,platformType:I.a.localVideoPara.platformType}),t.postMessage(a),I.a.tfjsurl&&t.postMessage({command:"DOWNLOAD_JSON_FROM_MAIN_THREAD_OK",data:I.a.tfjsurl,type:"js"}),I.a.vbbin&&I.a.vbjson&&t.postMessage({command:"DOWNLOAD_JSON_FROM_MAIN_THREAD_OK",data:{bin:I.a.vbbin,json:I.a.vbjson},index:0}),I.a.afnbin&&I.a.afnjson&&(t.postMessage({command:"DOWNLOAD_JSON_FROM_MAIN_THREAD_OK",data:{bin:I.a.afnbin,json:I.a.afnjson},index:1}),I.a.basebin&&I.a.basejson&&t.postMessage({command:"DOWNLOAD_JSON_FROM_MAIN_THREAD_OK",data:{bin:I.a.basebin,json:I.a.basejson},index:2})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qe(e,t,n,r){return qe.apply(this,arguments)}function qe(){return(qe=p()(m.a.mark((function e(t,n,r,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r||!r.isDestroy){e.next=2;break}return e.abrupt("return",O("WorkerType:videoEnc;The relative SDK instance is destroy, don't start relative worker, avoid multiple same workers. "));case 2:if(I.a.localVideoEncMGR){e.next=4;break}return e.abrupt("return");case 4:if(I.a.isVideoEncodeThreadStart){e.next=8;break}return I.a.isVideoEncodeThreadStart=!0,e.next=8,T(a,I.a.localVideoEncMGR,de,A.g.VIDEO_ENCODE,r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ye(){return Je.apply(this,arguments)}function Je(){return(Je=p()(m.a.mark((function e(){var t,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I.a.isPreviewMode.audioDecode){e.next=3;break}return D.a.add_monitor("ZISA"),e.abrupt("return");case 3:return t=I.a.localAudioDecMGR.map.get(I.a.SPECIAL_ID),window.ADWF&&t.postMessage({command:"RIWM"}),n=I.a.localVideoPara.videodecodethreadnumb>1,e.next=8,I.a.audioDecInitInstance.wasmSuccessPromise;case 8:if(t&&!I.a.isAudioDecodePostStart){if(I.a.isAudioDecodePostStart=!0,r=C({command:"startMedia",websocket_ip_address:I.a.Audio_WebSocket_Ip_Address+"&mode=5",sampleRate:I.a.localAudioPara.sampleRate,userid:I.a.localAudioPara.userid,logon:I.a.localAudioPara.logon,decode:1,meetingid:I.a.localAudioPara.meetingid,meetingnumb:I.a.localAudioPara.meetingnumb,videodecodethreadnumb:I.a.localAudioPara.videodecodethreadnumb,isSupportMultiThread:I.a.localAudioPara.isSupportMultiThread,qoson:I.a.localAudioPara.qoson,decoderInWorklet:I.a.decoderinworklet,multiView:n,shouldNotChangeSampleRate:y.g.browser.isFirefox||y.g.browser.isSafari},I.a.Audio_Web_Transport_Ip_Address?{webtransportURL:I.a.Audio_Web_Transport_Ip_Address+"&mode=1"}:{}),D.a.add_monitor("ADSM"),t.postMessage(r),I.a.sharedBuffer){O("post audioDec sab");try{t.postMessage({command:"sharedBuffer",data:I.a.sharedBuffer})}catch(e){t.postMessage({command:"sharedBuffer",data:I.a.sharedBuffer},[I.a.sharedBuffer])}}}else D.a.add_monitor("ADSME"+!!t+!!I.a.isAudioDecodePostStart);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ze(e,t,n,r){return Xe.apply(this,arguments)}function Xe(){return(Xe=p()(m.a.mark((function e(t,n,r,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D.a.add_monitor("AADT"),!r||!r.isDestroy){e.next=4;break}return D.a.add_monitor("ZID"),e.abrupt("return",O("WorkerType:audioDec;The relative SDK instance is destroy, don't start relative worker, avoid multiple same workers. "));case 4:if(I.a.isAudioDecodeThreadStart){e.next=8;break}return I.a.isAudioDecodeThreadStart=!0,e.next=8,T(a,I.a.localAudioDecMGR,_e,A.g.AUDIO_DECODE,r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ze(e){if(e>>=10,I.a.localAudioDecMGR){var t=I.a.localAudioDecMGR.GetSSRCTimeMap(e);return null===t?0:t}}function $e(e){return{currentSSRCTime:I.a.CurrentSSRCTime,audioPlayTime:I.a.audioPlayTime}}function et(e,t){var n=I.a.SPECIAL_ID,r=I.a.localVideoDecMGR.map.get(n);r.postMessage({command:"failover",websocket_ip_address:t}),(r=I.a.localAudioDecMGR.map.get(n)).postMessage({command:"failover",websocket_ip_address:e})}function tt(){return nt.apply(this,arguments)}function nt(){return(nt=p()(m.a.mark((function e(){var t,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=I.a.localAudioEncMGR.map.get(I.a.SPECIAL_ID),window.AEWF&&t.postMessage({command:"RIWM"}),e.next=4,I.a.audioEncodeInitInstance.wasmSuccessPromise;case 4:if(t&&!I.a.isAudioEncodePostStart&&(I.a.isAudioEncodePostStart=!0,n=null,I.a.ivObj&&(n=I.a.ivObj[A.g.AUDIO_ENCODE],n=y.g.stringSplitByComma2Buffer(n)),r=C({command:"startMedia",websocket_ip_address:I.a.Audio_WebSocket_Ip_Address+"&mode=2",sampleRate:I.a.localAudioPara.sampleRate,userid:I.a.localAudioPara.userid,encode:1,meetingid:I.a.localAudioPara.meetingid,meetingnumb:I.a.localAudioPara.meetingnumb,iv:n,qoson:I.a.localAudioPara.qoson,shouldNotChangeSampleRate:y.g.browser.isFirefox||y.g.browser.isSafari,isPreviewMode:I.a.isPreviewMode.audioEncode},I.a.Audio_Web_Transport_Ip_Address?{webtransportURL:I.a.Audio_Web_Transport_Ip_Address+"&mode=2"}:{}),t.postMessage(r),I.a.sharedBuffer)){O("post audioEnc sab");try{t.postMessage({command:"sharedBuffer",data:I.a.sharedBuffer})}catch(e){t.postMessage({command:"sharedBuffer",data:I.a.sharedBuffer},[I.a.sharedBuffer])}}case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rt(e,t,n){return at.apply(this,arguments)}function at(){return(at=p()(m.a.mark((function e(t,n,r){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!n.isDestroy){e.next=2;break}return e.abrupt("return",O("WorkerType:audioEnc;The relative SDK instance is destroy, don't start relative worker, avoid multiple same workers. "));case 2:if(I.a.isAudioEncodeThreadStart){e.next=6;break}return I.a.isAudioEncodeThreadStart=!0,e.next=6,T(r,I.a.localAudioEncMGR,ve,A.g.AUDIO_ENCODE,n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ot(e){for(var t,n=I.a.SPECIAL_ID,r=I.a.audio_pcm_queue.dequeue();r;)r=I.a.audio_pcm_queue.dequeue();I.a.localAudioEncMGR&&(t=I.a.localAudioEncMGR.map.get(n))&&I.a.isAudioEncodePostStart&&t.postMessage({command:"modifySampleRate",sampleRate:e}),I.a.localAudioDecMGR&&(t=I.a.localAudioDecMGR.map.get(n))&&I.a.isAudioDecodePostStart&&t.postMessage({command:"modifySampleRate",sampleRate:e})}function it(e,t,n){var r;(e=I.a.SPECIAL_ID,I.a.localAudioDecMGR)&&((r=I.a.localAudioDecMGR.map.get(e))&&r.postMessage({command:"mute",bOn:t,fakeLeave:n}));I.a.localAudioEncMGR&&((r=I.a.localAudioEncMGR.map.get(e))&&r.postMessage({command:"mute",bOn:t,fakeLeave:n}))}function st(e,t){var n;(e=I.a.SPECIAL_ID,I.a.localAudioDecMGR)&&((n=I.a.localAudioDecMGR.map.get(e))&&n.postMessage({command:"AecFlag",flag:t}));I.a.localAudioEncMGR&&((n=I.a.localAudioEncMGR.map.get(e))&&n.postMessage({command:"AecFlag",flag:t}))}function ct(e,t){var n,r=I.a.SPECIAL_ID;I.a.localAudioDecMGR&&((n=I.a.localAudioDecMGR.map.get(r))&&n.postMessage({command:"decodeAudioPort"},[e.port2]));I.a.localAudioEncMGR&&((n=I.a.localAudioEncMGR.map.get(r))&&n.postMessage({command:"encodeAudioPort"},[t.port1]))}function ut(e,t){var n=I.a.SPECIAL_ID;if(I.a.localVideoDecMGR){var r=I.a.localVideoDecMGR.map.get(n);r&&r.postMessage({command:"decodeVideoPort"},[e.port1])}if(I.a.localVideoEncMGR){var a=I.a.localVideoEncMGR.map.get(n);a&&a.postMessage({command:"encodeVideoPort"},[t.port2])}}function dt(e,t){var n=I.a.SPECIAL_ID;if(I.a.localVideoDecMGR){var r=I.a.localVideoDecMGR.map.get(n);r&&r.postMessage({command:"vsport"},[e.port1])}if(I.a.localVideoEncMGR){var a=I.a.localSharingDecMGR.map.get(n);a&&a.postMessage({command:"vsport"},[t.port2])}}function ft(e){var t=I.a.SPECIAL_ID;if(I.a.localAudioDecMGR){var n=I.a.localAudioDecMGR.map.get(t);n&&n.postMessage({command:"decodeAudioPort2"},[e.port2])}}function lt(e){var t=I.a.SPECIAL_ID;if(I.a.localAudioEncMGR){var n=I.a.localAudioEncMGR.map.get(t);n&&n.postMessage({command:"shareAudioDecodeAudioPort2"},[e.port2])}}function pt(e){var t=I.a.SPECIAL_ID;if(I.a.localVideoDecMGR){var n=I.a.localVideoDecMGR.map.get(t);n&&n.postMessage({command:"decodeVideoPortWithAudio",port:e.port1},[e.port1])}}function ht(e){var t=I.a.SPECIAL_ID;if(I.a.localVideoEncMGR){var n=I.a.localVideoEncMGR.map.get(t);n&&n.postMessage(e)}}function mt(e,t){var n=I.a.SPECIAL_ID;if(I.a.localVideoEncMGR){var r=I.a.localVideoEncMGR.map.get(n);r&&r.postMessage({command:e,data:t},[t])}}function gt(e){var t=I.a.SPECIAL_ID;if(I.a.localVideoDecMGR){var n=I.a.localVideoDecMGR.map.get(t);n&&n.postMessage(e)}}function _t(e,t){var n=I.a.SPECIAL_ID;if(I.a.localVideoEncMGR){var r=I.a.localVideoEncMGR.map.get(n);r&&r.postMessage({command:e,data:t},[t])}}function vt(e,t){var n=I.a.SPECIAL_ID;if(I.a.localSharingEncMGR){var r=I.a.localSharingEncMGR.map.get(n);r&&r.postMessage({command:e,data:t},[t])}}function yt(e){if(I.a.localVideoDecMGR){var t=I.a.localVideoDecMGR.map.get(I.a.SPECIAL_ID);t&&t.postMessage(e)}}function St(e){var t=I.a.SPECIAL_ID;if(I.a.localSharingDecMGR){var n=I.a.localSharingDecMGR.map.get(t);n&&n.postMessage(e)}}function Et(e){var t=I.a.SPECIAL_ID;if(I.a.localAudioDecMGR){var n=I.a.localAudioDecMGR.map.get(t);n&&n.postMessage({command:"updateCurrentSSRC",SSRC:e})}}function bt(e){var t=I.a.SPECIAL_ID;if(I.a.localAudioEncMGR){var n=I.a.localAudioEncMGR.map.get(t);n&&n.postMessage(e)}}function Dt(e){var t=I.a.SPECIAL_ID;if(I.a.localAudioDecMGR){var n=I.a.localAudioDecMGR.map.get(t);n&&n.postMessage(e)}}function At(e){var t={command:"interpretation_enable",enable:e};bt(t),I.a.decoderinworklet?I.a.workletWasmInitSuccess?I.a.AudioNode.postCMD("interpretation_enable",t):I.a.interpretationMessage.enqueue(t):Dt(t)}function It(e){bt({command:"cc_set_lang",lang:e})}function wt(e){var t={command:"interpretation_set_lang",lang:e};bt(t),I.a.decoderinworklet?I.a.workletWasmInitSuccess?I.a.AudioNode.postCMD("interpretation_set_lang",t):I.a.interpretationMessage.enqueue(t):Dt(t)}function Mt(e){var t={command:"interpretation_mute_origin",mute:e};bt(t),I.a.decoderinworklet?I.a.workletWasmInitSuccess?I.a.AudioNode.postCMD("interpretation_mute_origin",t):I.a.interpretationMessage.enqueue(t):Dt(t)}function Ct(e){var t={command:"interpretation_set_interpreter",interpreterList:e};bt(t),I.a.decoderinworklet?I.a.workletWasmInitSuccess?I.a.AudioNode.postCMD("interpretation_set_interpreter",t):I.a.interpretationMessage.enqueue(t):Dt(t)}function Ot(){var e=I.a.SPECIAL_ID;if(I.a.localAudioEncMGR){var t=I.a.localAudioEncMGR.map.get(e);t&&t.postMessage({command:"resetAec"})}}function Pt(){var e=I.a.SPECIAL_ID,t=20;if(I.a.audioDelay&&(t=I.a.audioDelay),I.a.localAudioEncMGR){var n=I.a.localAudioEncMGR.map.get(e);n&&n.postMessage({command:"SetAECDelay",delay:t})}}function kt(e){try{if(D.a&&e){var t=["ERR:",e.message,"f"].join(""),n=D.a.checkIsNecessaryExceptionLogAndReturnRepeatTimes(t);n.isNecessary?(O("error repeat ".concat(n.repeatNumber),t),D.a.add_monitor(t+"(repeat:".concat(n.repeatNumber,")"))):O("error but ignore",e.message)}}catch(e){O("_listenWindowErrorEvent error",e)}}function xt(e){I.a.sendMessageToRwg(g.gc,{evt:4167,seq:1,body:{data:e}})}function Rt(){D.a.init(),window.addEventListener("error",kt),function(){try{D.a.add_monitor(["BSAGT:",navigator.userAgent].join("")),D.a.add_monitor("BSLITEND:"+(y.g.isLittleEndian()?1:0)),window.navigator.hardwareConcurrency&&D.a.add_monitor("OSCPUS:"+window.navigator.hardwareConcurrency)}catch(e){}}(),I.a.monitorIntervalHandle=setInterval((function(){var e,t=D.a.get_monitor();(t&&xt(t),null!=I.a.monitorEncodeVideo||null!=I.a.monitorDecodeVideo||null!=I.a.monitorVideoCapture||null!=I.a.monitorEncodeSharing||null!=I.a.monitorDecodeSharing||null!=I.a.monitorSharingEncodeAPPInfo||null!=I.a.monitorVideoDecodeAPPInfo||null!=I.a.monitorVideoEncodeAPPInfo)&&(null!=I.a.monitorVideoCapture&&(e=function(e,t){if(t<=0)return e;for(var n=0;n<t;n++)e+=",";return e}(e="WCL_CAMERA,"+I.a.monitorVideoUserID+",0,,"+I.a.monitorVideoCapture+",,"+I.a.monitorVideoReadyCaptureWidth+","+I.a.monitorVideoReadyCaptureHeight,3),xt(e+=",{[END]}"),I.a.monitorVideoCapture=null),null!=I.a.monitorSharingEncodeAPPInfo&&(xt(I.a.monitorSharingEncodeAPPInfo.data),I.a.monitorSharingEncodeAPPInfo=null),null!=I.a.monitorVideoDecodeAPPInfo&&(xt(I.a.monitorVideoDecodeAPPInfo.data),I.a.monitorVideoDecodeAPPInfo=null),null!=I.a.monitorVideoEncodeAPPInfo&&(xt(I.a.monitorVideoEncodeAPPInfo.data),I.a.monitorVideoEncodeAPPInfo=null))}),1e4)}function Nt(e){D.a.add_monitor2(e)}function Tt(){window.removeEventListener("error",kt),clearInterval(I.a.monitorIntervalHandle),D.a.send_instant_monitor()}function Vt(e){var t=I.a.SPECIAL_ID;if(I.a.localVideoEncMGR){var n=I.a.localVideoEncMGR.map.get(t);n&&n.postMessage({command:"ENCRYPT",encrypt:e})}}function Lt(e){var t=I.a.SPECIAL_ID;if(I.a.localSharingEncMGR){var n=I.a.localSharingEncMGR.Get(t);n&&n.postMessage({command:"ENCRYPT",encrypt:e})}}function Gt(e){if(I.a.localVideoEncMGR){var t=I.a.localVideoEncMGR.map.get(I.a.SPECIAL_ID);t&&t.postMessage(e)}}function Wt(e){if(I.a.localSharingEncMGR){var t=I.a.localSharingEncMGR.map.get(I.a.SPECIAL_ID);t&&t.postMessage(e)}}function Ut(e){if(I.a.localVideoEncMGR){var t=I.a.localVideoEncMGR.map.get(I.a.SPECIAL_ID);t&&t.postMessage(e)}}function Ft(e){if(I.a.localSharingEncMGR){var t=I.a.localSharingEncMGR.map.get(I.a.SPECIAL_ID);t&&t.postMessage(e)}}function Ht(e){var t=I.a.SPECIAL_ID;if(I.a.localAudioEncMGR){var n=I.a.localAudioEncMGR.map.get(t);n&&n.postMessage({command:"ENCRYPT",encrypt:e})}}function Kt(){var e=I.a.SPECIAL_ID;[I.a.localAudioDecMGR,I.a.localAudioEncMGR,I.a.localVideoDecMGR,I.a.localVideoEncMGR,I.a.localSharingDecMGR,I.a.localSharingEncMGR].forEach((function(t){t&&t.map.get(e)&&t.map.get(e).postMessage({command:"SOCKET_RECONNECT",disable:!0})}))}function Bt(){var e=I.a.SPECIAL_ID;[I.a.localVideoDecMGR,I.a.localVideoEncMGR,I.a.localSharingDecMGR,I.a.localSharingEncMGR].forEach((function(t){t&&t.map.get(e)&&t.map.get(e).postMessage({command:"closeMedia"})}))}function jt(){var e=I.a.SPECIAL_ID,t=[I.a.localVideoDecMGR,I.a.localVideoEncMGR,I.a.localSharingDecMGR,I.a.localSharingEncMGR];t.forEach((function(t){t&&t.map.get(e)&&t.map.get(e).terminate()})),t=[I.a.localAudioDecMGR,I.a.localAudioEncMGR],I.a.mediaSDKHandle.is32bitbrowser?t.forEach((function(t){t&&t.map.get(e)&&t.map.get(e).postMessage({command:"closeMedia"})})):t.forEach((function(t){t&&t.map.get(e)&&t.map.get(e).terminate()}))}function Qt(e){var t;switch(e){case A.g.AUDIO_DECODE:t=I.a.localAudioDecMGR;break;case A.g.AUDIO_ENCODE:t=I.a.localAudioEncMGR;break;case A.g.VIDEO_DECODE:t=I.a.localVideoDecMGR;break;case A.g.VIDEO_ENCODE:t=I.a.localVideoEncMGR;break;case A.g.SHARING_DECODE:t=I.a.localSharingDecMGR;break;case A.g.SHARING_ENCODE:t=I.a.localSharingEncMGR}var n=I.a.SPECIAL_ID;return t&&t.map.get(n)?t.map.get(n):null}function qt(e){return Yt.apply(this,arguments)}function Yt(){return(Yt=p()(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next=e.t0===A.g.VIDEO_ENCODE?3:e.t0===A.g.VIDEO_DECODE?6:e.t0===A.g.AUDIO_ENCODE?9:e.t0===A.g.AUDIO_DECODE?12:e.t0===A.g.SHARING_ENCODE?15:e.t0===A.g.SHARING_DECODE?18:21;break;case 3:return e.next=5,I.a.videoInitInstance.initSuccessPromise;case 5:return e.abrupt("break",23);case 6:return e.next=8,I.a.videoDecInitInstance.initSuccessPromise;case 8:return e.abrupt("break",23);case 9:return e.next=11,I.a.audioEncodeInitInstance.initSuccessPromise;case 11:return e.abrupt("break",23);case 12:return e.next=14,I.a.audioDecInitInstance.initSuccessPromise;case 14:return e.abrupt("break",23);case 15:return e.next=17,I.a.sharingEncInitInstance.initSuccessPromise;case 17:return e.abrupt("break",23);case 18:return e.next=20,I.a.sharingDecInitInstance.initSuccessPromise;case 20:return e.abrupt("break",23);case 21:return E.a.error("No matched worker type: ".concat(t)),e.abrupt("break",23);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jt(e,t){return zt.apply(this,arguments)}function zt(){return(zt=p()(m.a.mark((function e(t,n){var r,a,o,i,s=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:"PUSH_MESSAGE_FROM_MAIN_TO_WORKER",a=s.length>3&&void 0!==s[3]&&s[3],!(o=s.length>4&&void 0!==s[4]&&s[4])){e.next=6;break}return e.next=6,qt(t);case 6:if(i=Qt(t)){e.next=17;break}if(o){e.next=13;break}return O("worker handle not ready, drop!",t,n,r),e.abrupt("return",!1);case 13:if(O.warn("worker handle not ready, waiting!",t,n,r),i=Qt(t)){e.next=17;break}return e.abrupt("return");case 17:return a?i.postMessage({command:r,data:n},[n]):i.postMessage({command:r,data:n}),e.abrupt("return",!0);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xt(){return null!==Qt(A.g.VIDEO_ENCODE)}function Zt(e,t,n){var r=I.a.SPECIAL_ID;if(I.a.localVideoEncMGR){var a=I.a.localVideoEncMGR.map.get(r);a&&(e?a.postMessage({command:t,canvas:e,rendercanvasID:n},[e]):a.postMessage({command:t,canvas:e,rendercanvasID:n}))}}function $t(e){var t;return t=new e({storeOptions:{nameSpaceId:"vbFile"}}),new Promise((function(e,n){t.on("ready",(function(){e(t)}))}))}function en(e,t,n){return window.crypto.subtle.decrypt({name:"AES-GCM",iv:n},t,e)}function tn(e,t){var n={};(I.a.resourceManager?Promise.resolve(I.a.resourceManager):$t(t)).then((function(t){I.a.resourceManager=t;for(var r,a,o=function(t){"bin"==e[t].type?I.a.resourceManager.getFile(e[t].path,{saveRootPath:e[t].path,downloadOptions:{xhrParams:{headers:n,url:e[t].path,encoding:"arraybuffer",method:"GET"}}}).getResult().then((function(n){D.a.add_monitor("VDBIN"),I.a.vbarraybuffer=n.data;try{e[t].path.indexOf("dual")>=0&&(r=n.data,a=new Uint8Array(r,0,12),o=new Uint8Array(r,12,32),window.crypto.subtle.importKey("raw",o,"AES-GCM",!0,["encrypt","decrypt"]).then((function(e){var t=a.length+o.length,n=new Uint32Array(r.slice(t,t+4))[0];t+=4;var i=r.slice(t,t+n);t+=n,n=new Uint32Array(r.slice(t,t+4))[0],t+=4;var s=new Uint8Array(r,t,n);t+=n,n=new Uint32Array(r.slice(t,t+4))[0],t+=4;var c=r.slice(t,t+n);t+=n,n=new Uint32Array(r.slice(t,t+4))[0],t+=4;var u=new Uint8Array(r,t,n);I.a.basebin=i,I.a.afnbin=c,en(u,e,a).then((function(e){I.a.afnjson=(new TextDecoder).decode(e);var t=I.a.SPECIAL_ID;if(I.a.localVideoEncMGR){var n=I.a.localVideoEncMGR.map.get(t);n&&I.a.afnbin&&I.a.afnjson&&n.postMessage({command:"DOWNLOAD_JSON_FROM_MAIN_THREAD_OK",data:{bin:I.a.afnbin,json:I.a.afnjson},index:1})}})),en(s,e,a).then((function(e){I.a.basejson=(new TextDecoder).decode(e);var t=I.a.SPECIAL_ID;if(I.a.localVideoEncMGR){var n=I.a.localVideoEncMGR.map.get(t);n&&I.a.basebin&&I.a.basejson&&n.postMessage({command:"DOWNLOAD_JSON_FROM_MAIN_THREAD_OK",data:{bin:I.a.basebin,json:I.a.basejson},index:2})}}))})))}catch(e){E.a.error("An error occurred when decrypting the virtual background file",e),D.a.add_monitor("VBDECRYPTF"),I.a.Notify_APPUI(g.ue,4)}var r,a,o})).catch((function(e){E.a.error("An error occurred when trying to obtain the virtual background file",e),D.a.add_monitor("VBFF"),I.a.Notify_APPUI(g.ue,4)})):"js"==e[t].type&&(D.a.add_monitor("VDTF"),I.a.tfjsurl=e[t].path,r=I.a.SPECIAL_ID,I.a.localVideoEncMGR&&(a=I.a.localVideoEncMGR.map.get(r))&&a.postMessage({command:"DOWNLOAD_JSON_FROM_MAIN_THREAD_OK",data:I.a.tfjsurl,type:"js"}))},i=0;i<e.length;i++)o(i)}))}function nn(e){var t=I.a.SPECIAL_ID;if(I.a.localVideoEncMGR){var n=I.a.localVideoEncMGR.map.get(t);n&&(e?n.postMessage({command:"imagebitmap",data:e},[e]):n.postMessage({command:"imagebitmap"}))}}function rn(e,t){var n=I.a.SPECIAL_ID;if(I.a.localVideoEncMGR){var r=I.a.localVideoEncMGR.map.get(n);r&&(e?r.postMessage({command:"maskandbgimagebitmap",imagename:t,data:e},[e]):r.postMessage({command:"maskandbgimagebitmap",imagename:t,data:e}))}}function an(e,t){var n=I.a.SPECIAL_ID;if(I.a.localVideoEncMGR){var r=I.a.localVideoEncMGR.map.get(n);r&&(e?r.postMessage({command:"vbbgimagebitmap",imagename:t,data:e},[e]):r.postMessage({command:"vbbgimagebitmap",imagename:t,data:e}))}}function on(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=I.a.SPECIAL_ID;if(I.a.localVideoEncMGR){var i=I.a.localVideoEncMGR.map.get(o);i&&(e?i.postMessage({command:"maskandbgimagebitmap",imagename:t,data:e,maskCoordinate:n,width:r,height:a},[e]):i.postMessage({command:"maskandbgimagebitmap",imagename:t,data:e,maskCoordinate:n,width:r,height:a}))}}function sn(e){var t=I.a.SPECIAL_ID;if(I.a.localVideoDecMGR){var n=I.a.localVideoDecMGR.map.get(t);n&&n.postMessage(e)}}function cn(){try{return y.g.browser.isChrome&&-1!==["85","86"].indexOf(y.g.getBrowserVersion())}catch(e){return O(e),!1}}var un=(r={},o()(r,A.g.VIDEO_ENCODE,{success:g.Sb,failed:g.Pb,callbackDataValue:A.c.encode}),o()(r,A.g.VIDEO_DECODE,{success:g.Sb,failed:g.Pb,callbackDataValue:A.c.decode}),o()(r,A.g.AUDIO_ENCODE,{success:g.Qb,failed:g.Nb,callbackDataValue:A.c.encode}),o()(r,A.g.AUDIO_DECODE,{success:g.Qb,failed:g.Nb,callbackDataValue:A.c.decode}),o()(r,A.g.SHARING_DECODE,{success:g.Rb,failed:g.Ob,callbackDataValue:A.c.decode}),o()(r,A.g.SHARING_ENCODE,{success:g.Rb,failed:g.Ob,callbackDataValue:A.c.encode}),r)},function(e,t,n){"use strict";var r,a,o=n(17),i=n.n(o),s=n(7),c=n.n(s),u=n(11),d=n.n(u),f=n(12),l=n.n(f),p=n(3),h=n.n(p),m=function(){};m.prototype={threads:(a=c()(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=c()(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(WebAssembly.validate(t)){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.abrupt("return",((new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),!0));case 6:return e.prev=6,e.t0=e.catch(2),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,null,[[2,6]])})));return function(t){return e.apply(this,arguments)}}()(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])));case 1:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),simd:(r=c()(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11])));case 1:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})};var g=new m,_=n(25),v=n(8),y=n(0);n.d(t,"e",(function(){return A})),n.d(t,"d",(function(){return x})),n.d(t,"b",(function(){return V})),n.d(t,"a",(function(){return $})),n.d(t,"c",(function(){return ee})),n.d(t,"f",(function(){return te}));var S={},E=function(){var e,t={},n=navigator.userAgent.toLowerCase();return(e=n.match(/rv:([\d.]+)\) like gecko/))||(e=n.match(/msie ([\d\.]+)/))?t.ie=e[1]:(e=n.match(/edge\/([\d\.]+)/))?t.edge=e[1]:(e=n.match(/firefox\/([\d\.]+)/))?t.firefox=e[1]:(e=n.match(/(?:opera|opr).([\d\.]+)/))?t.opera=e[1]:(e=n.match(/chrome\/([\d\.]+)/))?t.chrome=e[1]:(e=n.match(/version\/([\d\.]+).*safari/))&&(t.safari=e[1]),t},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:90,t=E();if(t.chrome){var n=parseInt(t.chrome);if(n>=e)return!0}return!1},D=function(e){var t=E();if(t.firefox&&parseInt(t.firefox)>=e)return!0;return!1};var A=new(function(){function e(){d()(this,e),this._isSupportMultiThread=!1,this._isSupportSIMD=!1,this.inProgressPromise={checkSupportMultiThread:null,checkSupportSIMD:null},this._isSupportWebtransport=!1,this._isSupportVirtualBackground=!1}var t,n;return l()(e,[{key:"checkIsSupportMultiThread",value:(n=c()(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.getIsSupportMultiThread()){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,!this.inProgressPromise.checkSupportMultiThread){e.next=8;break}return e.next=6,this.inProgressPromise.checkSupportMultiThread;case 6:e.next=14;break;case 8:return this.inProgressPromise.checkSupportMultiThread=g.threads(),e.t0=this,e.next=12,this.inProgressPromise.checkSupportMultiThread;case 12:e.t1=e.sent,e.t0._setIsSupportMultiThread.call(e.t0,e.t1);case 14:e.next=19;break;case 16:e.prev=16,e.t2=e.catch(2),this._setIsSupportMultiThread(!1);case 19:case"end":return e.stop()}}),e,this,[[2,16]])}))),function(){return n.apply(this,arguments)})},{key:"_setIsSupportMultiThread",value:function(e){this._isSupportMultiThread=e}},{key:"getIsSupportMultiThread",value:function(){return this._isSupportMultiThread}},{key:"checkIsSupportSIMD",value:(t=c()(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.getIsSupportSIMD()){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,!this.inProgressPromise.checkSupportSIMD){e.next=8;break}return e.next=6,this.inProgressPromise.checkSupportSIMD;case 6:e.next=14;break;case 8:return this.inProgressPromise.checkSupportSIMD=g.simd(),e.t0=this,e.next=12,this.inProgressPromise.checkSupportSIMD;case 12:e.t1=e.sent,e.t0._setIsSupportSIMD.call(e.t0,e.t1);case 14:e.next=19;break;case 16:e.prev=16,e.t2=e.catch(2),this._setIsSupportSIMD(!1);case 19:case"end":return e.stop()}}),e,this,[[2,16]])}))),function(){return t.apply(this,arguments)})},{key:"_setIsSupportSIMD",value:function(e){this._isSupportSIMD=e}},{key:"getIsSupportSIMD",value:function(){return this._isSupportSIMD}},{key:"getIsSupportWebtransport",value:function(){return b(97)&&"function"==typeof WebTransport&&this._isSupportWebtransport}},{key:"setIsSupportWebtransport",value:function(e){this._isSupportWebtransport=!!e}},{key:"getIsSupportVirtualBackground",value:function(){var e=b(91)||D(89);return navigator.hardwareConcurrency&&navigator.hardwareConcurrency>2&&e&&"function"==typeof OffscreenCanvas&&this._isSupportVirtualBackground}},{key:"setIsSupportVirtualBackground",value:function(e){this._isSupportVirtualBackground=!!e}},{key:"getIsRenderSelfVideoInEncodeWorker",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e&&!this.getIsSupportMultiThread()&&this.getIsSupportVirtualBackground()}}]),e}()),I={capacity:void 0,get capacityfor720(){return void 0!==this.capacity&&this.capacity},set capacityfor720(e){this.capacity=e}},w={capacitydeco:void 0,get capacitydecofor1080(){return void 0!==this.capacitydeco&&this.capacitydeco},set capacitydecofor1080(e){this.capacitydeco=e}};function M(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function C(){var e=window.navigator,t={browser:null,version:null};if("undefined"==typeof window||!window.navigator)return t.browser="Not a browser.",t;if(e.mozGetUserMedia)t.browser="firefox",t.version=M(e.userAgent,/Firefox\/(\d+)\./,1);else if(e.webkitGetUserMedia)t.browser="chrome",t.version=M(e.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(e.mediaDevices&&e.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=M(e.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!window.RTCPeerConnection||!e.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=M(e.userAgent,/AppleWebKit\/(\d+)\./,1)}return t}var O=C();function P(){var e=navigator.userAgent.match(/CrKey\/([\d.]+)/);if(e){var t=e[1].match(/[0-9]{0,2}[.][0-9]{0,2}/);return t?t[0]:-1}return-1}var k="function"==typeof OffscreenCanvas&&!!new OffscreenCanvas(1,1).getContext("webgl");function x(){return k}function R(){return-1!==navigator.userAgent.indexOf("CrKey")}function N(){return function(){try{var e=navigator.userAgent||navigator.vendor||window.opera;return!!/android/i.test(e)}catch(e){return!1}}()&&!R()}function T(){return"function"==typeof VideoTrackReader&&"function"==typeof VideoFrame}function V(e){return e?e>>10<<10:-1}var L,G,W,U,F,H,K,B,j,Q,q,Y,J,z,X,Z;t.g={isGoogleNestChrome:function(){return R()},isHighVersionGoolgeNestChrome:function(){return-1!==navigator.userAgent.indexOf("CrKey")&&P()>=1.54},isSupport2DCanvasDrawFrame:function(){return("function"==typeof MediaStreamTrackProcessor||T())&&!R()&&"chrome"==O.browser&&O.version>=90&&-1==navigator.appVersion.indexOf("Mac")},checkLocalP2PConnection:function(){return new Promise(function(){var e=c()(h.a.mark((function e(t,n){var r,a,o,i,s,c,u,d;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){e&&e.close()},r=function(e){return new Promise((function(t,n){e.onconnectionstatechange=function(n){"connected"===e.connectionState&&t(!0)}}))},o=null,i=null,s=document.createElement("canvas"),e.prev=5,s.width=200,s.height=200,s.getContext("2d"),d=s.captureStream(),"function"!=typeof RTCPeerConnection&&t(!1),o=new RTCPeerConnection,i=new RTCPeerConnection,o.onicecandidate=function(e){e.candidate&&i.addIceCandidate(new RTCIceCandidate(e.candidate))},i.onicecandidate=function(e){e.candidate&&o.addIceCandidate(new RTCIceCandidate(e.candidate))},Promise.all([r(o),r(i)]).then((function(){t(!0),a(o),a(i)})),"function"!=typeof o.addStream&&t(!1),e.next=19,o.addStream(d);case 19:return e.next=21,o.createOffer();case 21:return c=e.sent,e.next=24,o.setLocalDescription(c);case 24:return e.next=26,i.setRemoteDescription(c);case 26:return e.next=28,i.createAnswer();case 28:return u=e.sent,e.next=31,i.setLocalDescription(u);case 31:return e.next=33,o.setRemoteDescription(u);case 33:setTimeout((function(){t(!1),a(o),a(i)}),200),e.next=40;break;case 36:e.prev=36,e.t0=e.catch(5),v.a.error("Error when trying to check for local RTC peer connection",e.t0),t(!1);case 40:case"end":return e.stop()}}),e,null,[[5,36]])})));return function(t,n){return e.apply(this,arguments)}}())},getDocumentHandle:function(e){return document.getElementById(e)},browserType:O,browser:{isFirefox:"firefox"===O.browser,isChrome:"chrome"===O.browser,isSafari:"safari"===O.browser},isIphoneOrIpadSafari:function(){var e=navigator.userAgent,t=!!e.match(/iPad/i)||!!e.match(/iPhone/i)||!!e.match(/Macintosh/),n=!!e.match(/WebKit/i),r=!!e.match(/Mobile/i),a=isIPad();return t&&n&&(r||a)},isOpera65:function(){return function(){try{var e=navigator.userAgent.match(/OPR\/(\d+)\./);return!!(e&&Number(e[1])<66)}catch(e){return!1}}()},isAndroidBrowser:function(){return N()},isQuestBrowser:function(){return function(){try{return/oculusbrowser/i.test(navigator.userAgent)}catch(e){return!1}}()},isSelfPreviewRenderWithVideo:function(){return!A.getIsSupportMultiThread()&&!A.getIsSupportVirtualBackground()&&this.isSupportVideoFrameOrBitmapCapture()||this.isAndroidBrowser()&&!y.a.rwgAgent},isIphoneOrIpadBrowser:function(){try{return!!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)}catch(e){return!1}},isIpadOS:function(){return navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)},isChromeOS:function(){return function(){try{return!!/\bCrOS\b/.test(navigator.userAgent)}catch(e){return!1}}()},isWindowsChrome:function(){var e=navigator.userAgent;return/windows/i.test(e)},isTeslaMode:function(){return/TESLA/.test(navigator.userAgent)},isMac:function(){return navigator.platform.indexOf("Mac")>-1},isWindows:function(){return navigator.platform.indexOf("Win")>-1},isLinux:function(){return navigator.platform.indexOf("Linux")>-1&&!this.isChromeOS()},isSupportChromeWideAEC:function(){return(this.isMac()||this.isWindows()||this.isLinux())&&b(111)},isSupportOpenMicWhenShareAudio:function(){return this.isSupportChromeWideAEC()&&y.a.chromeWideAEC&&!y.a.shareSystemAudio},getAudioFeatureFlags:function(){return y.a.enableAudioBridge?4:12},isSupportShareMultiStream:function(){return!1},isSupportVideoLTR:function(){return!1},isSupportAudioBridgeAvsync:function(){return!0},getAudioContextConfigure:function(){var e={};return function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:90,n={},r=navigator.userAgent.toLowerCase();if((e=r.match(/rv:([\d.]+)\) like gecko/))||(e=r.match(/msie ([\d\.]+)/))?n.ie=e[1]:(e=r.match(/edge?\/([\d\.]+)/))?n.edg=e[1]:(e=r.match(/firefox\/([\d\.]+)/))?n.firefox=e[1]:(e=r.match(/(?:opera|opr).([\d\.]+)/))?n.opera=e[1]:(e=r.match(/chrome\/([\d\.]+)/))?n.chrome=e[1]:(e=r.match(/version\/([\d\.]+).*safari/))&&(n.safari=e[1]),n.chrome||n.edg||n.opera){var a=parseInt(n.chrome||n.edg||n.opera);if(a>=t)return!0}return!1}(74)&&(e={sampleRate:16e3,latencyHint:.02}),e},download:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(S[e])return S[e];var n=new Promise((function(n,r){var a={};t&&(a.integrity=t),fetch(e,a).then((function(e){n(e.text())})).catch((function(e){r(e)}))}));return S[e]=n,n},downloadBinary:function(e){if(S[e])return S[e];var t=new Promise((function(t,n){var r=new XMLHttpRequest;r.responseType="arraybuffer",r.addEventListener("load",(function(){t(this.response)}),r),r.onerror=function(e){n(e)},r.open("get",e,!0),r.send()}));return S[e]=t,t},readBlob:function(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(){t(r.result)},r.readAsText(e)}))},readBlobAsBuffer:function(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.readAsArrayBuffer(e)}))},lengthInUtf8Bytes:function(e){var t=encodeURIComponent(e).match(/%[89ABab]/g);return e.length+(t?t.length:0)},isLittleEndian:function(){var e=new ArrayBuffer(2),t=new Uint8Array(e),n=new Uint16Array(e);return t[0]=170,t[1]=187,48042===n[0]},sleep:function(e){return new Promise((function(t,n){setTimeout((function(){t(!0)}),e)}))},isSDKSupportMultiThread:(Z=c()(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.checkIsSupportMultiThread();case 2:return e.abrupt("return",A.getIsSupportMultiThread()&&navigator.userAgent&&(-1==navigator.userAgent.indexOf("CrKey")||P()>=1.54));case 3:case"end":return e.stop()}}),e)}))),function(){return Z.apply(this,arguments)}),isAMDGraphic:function(){try{return this.graphicName().includes("amd")}catch(e){return v.a.error("Error determining whether graphics card is AMD"),!1}},graphicName:(X=null,function(){try{if(X)return X;var e=new OffscreenCanvas(1,1).getContext("webgl");if(!e)return"";var t=e.getExtension("WEBGL_debug_renderer_info"),n=e.getParameter(t.UNMASKED_RENDERER_WEBGL);return X=n.toLowerCase()}catch(e){return v.a.error("Error determining whether graphics card is AMD",e),""}}),isGraphicShouldUseHardwareAccelerationDecode:function(){return!(!this.isAMDGraphic()||!this.isChromeOS())||!(this.isAMDGraphic()&&!this.isChromeOS())},VP9MachineDetect:function(){var e=navigator.mediaCapabilities.decodingInfo({type:"webrtc",video:{contentType:"video/vp9",bitrate:1e7,framerate:25,height:1920,width:1080}});return new Promise((function(t,n){e.then((function(e){e.supported||(v.a.error("Error: video/vp9 codec isn't supported in software or hardware"),t(!1)),t(e.powerEfficient)})).catch((function(e){v.a.error("Error when trying to determine support for VP9 codec",e),t(!1)}))}))},IsSupportVideoDecodeHardwareAcceleration:function(){return c()(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof VideoDecoder){e.next=19;break}return t=new Uint8Array([1,100,0,31,255,225,0,14,103,100,0,51,172,27,26,17,129,64,22,201,160,16,7,0,5,104,200,66,60,48,0,5,104,82,16,207,12,0,25,104,114,16,143,24,67,17,132,56,140,84,81,8,18,22,41,3,194,98,3,5,32,122,9,140,0,5,104,36,132,51,203,0,5,104,46,132,51,195,0,25,104,54,132,35,198,16,196,97,14,35,21,20,66,4,133,138,64,240,152,128,193,72,30,130,99,0,5,104,62,132,51,203]),n={codec:"avc1.640028",description:t,codedWidth:1280,codedHeight:720,hardwareAcceleration:"prefer-hardware"},e.prev=3,e.next=6,VideoDecoder.isConfigSupported(n);case 6:if(!e.sent.supported){e.next=11;break}return e.abrupt("return",!0);case 11:return e.abrupt("return",!1);case 12:e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(3),e.abrupt("return",!1);case 17:e.next=20;break;case 19:return e.abrupt("return",!1);case 20:case"end":return e.stop()}}),e,null,[[3,14]])})))()},IsSupportVideoEncodeHardwareAcceleration:function(){return c()(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof VideoEncoder){e.next=13;break}return t={codec:"avc1.640028",bitrate:15e5,width:1280,height:720,avc:{format:"annexb"},framerate:25,hardwareAcceleration:"no-preference",latencyMode:"realtime",bitrateMode:"constant",scalabilityMode:"L1T2"},e.next=5,VideoEncoder.isConfigSupported(t);case 5:if(!e.sent.supported){e.next=10;break}return e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 11:e.next=14;break;case 13:return e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e)})))()},AdapterWhiteListCheckForEncoder:function(){if(!x())return-1;var e=new OffscreenCanvas(1,1).getContext("webgl"),t=e.getExtension("WEBGL_debug_renderer_info"),n=e.getParameter(t.UNMASKED_VENDOR_WEBGL),r=e.getParameter(t.UNMASKED_RENDERER_WEBGL).toLowerCase(),a=n.includes("ARM"),o=(r.includes("amd"),r.includes("intel"));r.includes("hd graphics"),r.includes("nvidia"),r.includes("geforce");return o?0:a?-1:0},isChromeVersionHigherThan:b,isFirefoxVersionHigherThan:D,isSDKSupportSIMD:function(){return c()(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("object"===("undefined"==typeof WebAssembly?"undefined":i()(WebAssembly))){e.next=2;break}return e.abrupt("return",!1);case 2:if("chrome"!=O.browser){e.next=11;break}if(!(O.version>=84)){e.next=8;break}return e.next=6,A.checkIsSupportSIMD();case 6:e.next=9;break;case 8:return e.abrupt("return",!1);case 9:e.next=13;break;case 11:return e.next=13,A.checkIsSupportSIMD();case 13:return e.abrupt("return",A.getIsSupportSIMD());case 14:case"end":return e.stop()}}),e)})))()},buffer2stringSplitByComma:function(e){return new Uint8Array(e).join(",")},stringSplitByComma2Buffer:function(e){try{for(var t=e.split(",").map((function(e){return parseInt(e)})),n=new ArrayBuffer(t.length),r=new Uint8Array(n),a=0;a<t.length;a++)r[a]=t[a];return n}catch(e){return null}},removeDuplicates:function(e,t){var n=[];return e.forEach((function(e){for(var r=!1,a=0;a<n.length;a++)if(!t.call(null,n[a],e)){r=!0;break}r||n.push(e)})),n},getBrowserVersion:function(){return function(){var e=navigator.userAgent.toLowerCase();if(e.indexOf("firefox")>0)return e.match(/firefox\/[\d.]+/gi);if(e.indexOf("safari")>0&&e.indexOf("chrome")<0){var t,n="safari/unknow";return n=e.match(/safari\/[\d.]+/gi),t=e.match(/safari\/[\d.]+/gi),n&&(n=[n.toString().replace("version","safari")]),t&&(n=[t.toString().replace("version","safari")]),n}return e.indexOf("chrome")>0?e.match(/chrome\/[\d.]+/gi):"other"}()[0].match(/(\d+)/)[0]},getIOSMajorVersion:function(){if(/iP(hone|od|ad)/.test(navigator.platform)){var e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return parseInt(e[1],10)}return null},getMacSafariMajorVersion:function(){if(this.browser.isSafari){var e=navigator.userAgent.match(/Version\/([\d\.]+)/);return e[1]?parseFloat(e[1]):null}return null},isSupportImageCapture:function(){return"function"==typeof ImageCapture&&x()},isSupportOffscreenCanvas:function(){return x()},isSupport2dOffscreenCanvas:function(){return"function"==typeof OffscreenCanvas},isSupportVideoTrackReader:function(){return T()&&x()},isSupportMediaStreamTrackProcessor:function(){return"function"==typeof MediaStreamTrackProcessor&&x()},isSupportVideoFrameOrBitmapCapture:function(){return this.isSupportImageCapture()||this.isSupportVideoTrackReader()||this.isSupportMediaStreamTrackProcessor()},isSupportSharedArrayBuffer:function(){return"undefined"!=typeof SharedArrayBuffer},queryPTZPermisson:function(){return c()(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.permissions.query({name:"camera",panTiltZoom:!0});case 3:if("granted"!=e.sent.state){e.next=6;break}return e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 9:return e.prev=9,e.t0=e.catch(0),v.a.error("Error when querying pan-tilt-zoom permission",e.t0),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))()},isSupportCameraPan:function(){return!!navigator.mediaDevices.getSupportedConstraints().pan},isSupportCameraTilt:function(){return!!navigator.mediaDevices.getSupportedConstraints().tilt},isSupportCameraZoom:function(){return!!navigator.mediaDevices.getSupportedConstraints().zoom},isSupportPTZ:function(){var e=navigator.mediaDevices.getSupportedConstraints();return e.pan&&e.tilt&&e.zoom},get720pcapacity:function(){return I.capacityfor720},set720pcapacity:function(e){I.capacityfor720=e},getsub1080pcapacity:function(){return w.capacitydecofor1080},setsub1080pcapacity:function(e){w.capacitydecofor1080=e},checkAudioAutoPlay:function(){return new Promise((function(e,t){var n=new Blob([new Uint8Array([255,227,24,196,0,0,0,3,72,1,64,0,0,4,132,16,31,227,192,225,76,255,67,12,255,221,27,255,228,97,73,63,255,195,131,69,192,232,223,255,255,207,102,239,255,255,255,101,158,206,70,20,59,255,254,95,70,149,66,4,16,128,0,2,2,32,240,138,255,36,106,183,255,227,24,196,59,11,34,62,80,49,135,40,0,253,29,191,209,200,141,71,7,255,252,152,74,15,130,33,185,6,63,255,252,195,70,203,86,53,15,255,255,247,103,76,121,64,32,47,255,34,227,194,209,138,76,65,77,69,51,46,57,55,170,170,170,170,170,170,170,170,170,170,255,227,24,196,73,13,153,210,100,81,135,56,0,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170])],{type:"audio/mpeg"}),r=new Audio(URL.createObjectURL(n));r.addEventListener("canplaythrough",(function(){r.play().then((function(){e(!0)})).catch((function(e){v.a.error("Unable to auto play audio",e),t(e)}))})),r.load&&r.load()}))},isSupportVideoShare:function(){return!0},isSupportVideoShareSend:function(){var e,t=C();return"chrome"==t.browser&&(e=this.getBrowserVersion()),!!this.isSupportSharedArrayBuffer()&&!("chrome"!==t.browser||e&&e<=100||navigator.hardwareConcurrency<=2||this.isTeslaMode()||this.isAndroidBrowser()||this.isIphoneOrIpadBrowser()||this.isGoogleNestChrome())},isSupportVideoShareReceive:function(){return!0},watermark:(Y=new _.a,J=document.createElement("canvas"),z={enableWaterMark:!1,waterMarkText:"",watermarkOpacity:0,watermarkRepeated:!1,watermarkPosition:void 0},{getWaterMarkData:function(e){var t=e.width,n=e.height;if(!z.enableWaterMark)return null;var r=t<512||n<288?16:z.watermarkPosition,a=z.watermarkRepeated&&t>306&&n>202,o=function(e,t){if(e<640&&e){var n=640/e;e=640,t=Math.round(t*n)}return{width:e,height:t}}(t,n);return t=o.width,n=o.height,a?Y.Get_Repeated_WaterMarkRGBA({canvas:J,name:z.waterMarkText,width:o.width,height:o.height,opacity:z.watermarkOpacity,position:r,convertToDataUrl:!0}):Y.Get_WaterMarkRGBA({canvas:J,name:z.waterMarkText,width:o.width,height:o.height,opacity:z.watermarkOpacity,position:r,convertToDataUrl:!0})},updateWaterMarkInfo:function(e){Object.assign(z,e)}}),isSupportAudioDenoise:function(){var e,t=C();return"chrome"==t.browser&&(e=this.getBrowserVersion()),!!this.isSupportSharedArrayBuffer()&&!("chrome"!==t.browser||e&&e<=100||navigator.hardwareConcurrency<=2||this.isTeslaMode()||this.isAndroidBrowser()||this.isIphoneOrIpadBrowser()||this.isGoogleNestChrome())},videoToMediaStreamManager:(W=document.createElement("canvas"),U=W.getContext("2d"),F=640,H=360,K=navigator.hardwareConcurrency&&navigator.hardwareConcurrency<4?10:24,B=1e3/("chrome"===O.browser?K:10),j=null,Q=0,q=null,{_draw:function(){if(L){this.drawCanvas(W,U,F,H);var e=performance.now();if(Q){var t=e-Q;t>B?this._setFasterTimer():t<.8*B&&this._clearFastTimer()}Q=e}},_setFasterTimer:function(){var e=this;j||(j=setInterval((function(){L&&L.currentTime>0&&!L.paused&&!L.ended&&performance.now()-Q>=B/2&&e.drawCanvas(W,U,F,H)}),B))},_clearFastTimer:function(){Q=0,clearInterval(j),j=null},drawCanvas:function(e,t,n,r){e.width=n,e.height=r;var a=0,o=0;L.videoWidth/L.videoHeight>n/r?a=n/r*(o=L.videoHeight):o=r/n*(a=L.videoWidth),t.drawImage(L,(L.videoWidth-a)/2,(L.videoHeight-o)/2,a,o,0,0,n,r)},startCapture:function(e,t,n){return L=e,t&&n&&t/n==16/9&&(F=t,H=n),q&&L.removeEventListener("timeupdate",q),q=this._draw.bind(this),e.addEventListener("timeupdate",q),G=W.captureStream(K)},stopCapture:function(){q&&L.removeEventListener("timeupdate",q),this._clearFastTimer(),G&&(G.getVideoTracks().forEach((function(e){return e.stop()})),G=null),L=null},isSupported:function(){return"function"==typeof HTMLCanvasElement.prototype.captureStream}}),audioToMediaStreamMananger:function(){var e=null,t=new(window.AudioContext||window.webkitAudioContext),n=null,r=null,a=null;return{startCapture:function(o){if(a&&o===a)e=a;else{this.destroy(),a=e=o,r=t.createMediaElementSource(e);var i=t.createMediaStreamDestination();r.connect(i),n=i.stream}return"suspended"===t.state&&t.resume(),n},stopCapture:function(){t&&t.suspend(),e=null},destroy:function(){r&&r.disconnect(),n&&(n.getAudioTracks().forEach((function(e){return e.stop()})),n=null),a=null,r=null},isAudioFileStream:function(e){return e===n},isSupported:function(){return"undefined"!=typeof AudioContext&&"function"==typeof AudioContext.prototype.createMediaStreamDestination&&"function"==typeof AudioContext.prototype.createMediaElementSource}}}()};function $(){var e=this;this.promise=new Promise((function(t,n){e.reject=n,e.resolve=t}))}var ee=function(){function e(t,n){d()(this,e),this.scriptURL=t,this.lateLoadedAssetsHash=n}return l()(e,[{key:"getIntegrity",value:function(){var e=this.scriptURL.split("/").pop().split("?")[0].split("#")[0],t=this.lateLoadedAssetsHash[e];return t||null}}]),e}();function te(e,t){if(e===t)return!0;if(r(e)&&r(t)){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e)if(!te(e[n],t[n]))return!1;return!0}function r(e){return"object"===i()(e)&&null!=e}}},function(e,t){function n(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(a,o){var i=e.apply(t,r);function s(e){n(i,a,o,s,c,"next",e)}function c(e){n(i,a,o,s,c,"throw",e)}s(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){"use strict";n.d(t,"b",(function(){return c}));var r=n(11),a=n.n(r),o=n(12),i=n.n(o),s=function(){function e(){a()(this,e),this._highFrequencyLogs={}}return i()(e,[{key:"setInstance",value:function(e){this._instance=e}},{key:"getMessageFromErrorEvent",value:function(e,t){var n=e;return t instanceof ErrorEvent?(t.filename&&(n+=" File: ".concat(t.filename)),(t.lineno||t.colno)&&(n+=" Line: ".concat(t.lineno,":").concat(t.colno)),t.message&&(n+=" Message: ".concat(t.message)),t.stack&&(n+="\nStack: ".concat(t.stack))):t instanceof Error&&(t.fileName&&(n+=" File: ".concat(t.fileName)),(t.lineNumber||t.columnNumber)&&(n+=" Line: ".concat(t.lineNumber,":").concat(t.columnNumber)),t.message&&(n+=" Message: ".concat(t.message)),t.stack&&(n+=" Stack: ".concat(t.stack)),t.name&&(n+=" Name: ".concat(t.name))),n}},{key:"error",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e=this.getMessageFromErrorEvent(e,t),this._highFrequencyLogs[e]?this._highFrequencyLogs[e]+=1:this._highFrequencyLogs[e]=1;var n=c(this._highFrequencyLogs[e]);this._instance&&n&&this._instance.error(e)}}]),e}(),c=function(e){return 0==(e&e-1)},u=new s;t.a=u},function(e,t,n){"use strict";n.d(t,"l",(function(){return r})),n.d(t,"e",(function(){return a})),n.d(t,"y",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"g",(function(){return s})),n.d(t,"k",(function(){return c})),n.d(t,"A",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"v",(function(){return f})),n.d(t,"o",(function(){return l})),n.d(t,"n",(function(){return p})),n.d(t,"c",(function(){return h})),n.d(t,"b",(function(){return m})),n.d(t,"f",(function(){return g})),n.d(t,"t",(function(){return _})),n.d(t,"w",(function(){return v})),n.d(t,"s",(function(){return y})),n.d(t,"u",(function(){return S})),n.d(t,"p",(function(){return E})),n.d(t,"z",(function(){return b})),n.d(t,"i",(function(){return D})),n.d(t,"j",(function(){return A})),n.d(t,"q",(function(){return I})),n.d(t,"h",(function(){return w})),n.d(t,"r",(function(){return M})),n.d(t,"x",(function(){return C})),n.d(t,"m",(function(){return O}));var r="QosMonitoring",a=30,o=35,i=48,s=61,c=-26,u=-27,d=50,f=51,l=52,p=53,h=66.5,m=66.6,g=78,_=-1,v=0,y=1,S=2,E=3,b=!0,D=30,A=1,I=24,w=10,M=8294400,C={DESKTOP:0,MOBILE:1,ANDROID:2,IPHONE:3},O=0},function(e,t,n){"use strict";var r=n(21),a=n.n(r),o=function(){};o.prototype={publish:function(){return a.a.publish.apply(this,arguments)},publishSync:function(){return a.a.publishSync.apply(this,arguments)},trigger:function(){return this.publish.apply(this,arguments)},triggerSync:function(){return this.publishSync.apply(this,arguments)},emit:function(){return this.publish.apply(this,arguments)},subscribe:function(){return a.a.subscribe.apply(this,arguments)},on:function(){return this.subscribe.apply(this,arguments)},unsubscribe:function(){return a.a.unsubscribe.apply(this,arguments)},clearAllSubscriptions:function(){a.a.clearAllSubscriptions()}},t.a=new o},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(31);function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,r(a.key),a)}}e.exports=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){"use strict";var r=n(19),a=n.n(r),o=n(17),i="object"===("undefined"==typeof localStorage?"undefined":n.n(o)()(localStorage))&&localStorage.__islogdebug,s=function(e,t){function n(){var e=[];return e.push.apply(e,arguments),e}!0===t&&(i=!0);var r=function(){var t;i&&(t=console).log.apply(t,[e].concat(a()(n(arguments))))};return["log","info","warn","error"].forEach((function(t){r[t]=function(){var r;i&&(r=console)[t].apply(r,[e].concat(a()(n(arguments))))}})),r.isEnable=function(){return i},r};s.isEnable=function(){return i},t.a=s},function(e,t,n){"use strict";function r(){this.a=[],this.b=0,this.residue=null}r.prototype.getLength=function(){return this.a.length-this.b},r.prototype.isEmpty=function(){return 0==this.a.length},r.prototype.enqueue=function(e){this.a.push(e)},r.prototype.dequeue=function(){if(0!=this.a.length){var e=this.a[this.b];return 2*++this.b>=this.a.length&&(this.a=this.a.slice(this.b),this.b=0),e}return null},r.prototype.peek=function(){return 0<this.a.length?this.a[this.b]:void 0},r.prototype.clear=function(){this.a=[],this.b=0},t.a=r},function(e,t,n){var r=n(47),a=n(48),o=n(30),i=n(49);e.exports=function(e,t){return r(e)||a(e,t)||o(e,t)||i()},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(31);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function n(t){return e.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){"use strict";n.d(t,"e",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"b",(function(){return p}));var r=n(14);function a(){this.ssrcQueueMap=new Map,a.prototype.AddQueue=function(e){var t=new r.a;return this.ssrcQueueMap.set(e,t),t},a.prototype.DeleteQueue=function(e){this.ssrcQueueMap.delete(e)},a.prototype.GetQueue=function(e){return this.ssrcQueueMap.get(e)},a.prototype.GetQueueData=function(e){return this.ssrcQueueMap.get(e).dequeue()},a.prototype.PutQueueData=function(e,t){this.ssrcQueueMap.get(e).enqueue(t)},a.prototype.GetQueueLength=function(e){var t=this.ssrcQueueMap.get(e);return null!==t?t.getLength():0}}var o=function(){this.frames=0,this.ntp=new r.a};o.prototype={UpdateVideoInfo:function(e){this.frames++,this.ntp.getLength()>30&&this.ntp.dequeue(),this.ntp.enqueue(e)},GetVideoFpsInfo:function(){var e=this.ntp.getLength();if(!(e<5)){for(var t=0,n=0,r=0,a=0,o=0;o<e;o++){var i=this.ntp.dequeue();0==i&&0==r?n++:0!=i?(a=0,0==r&&(r=i),t=i):0!=r&&t!=r&&0==i&&a++}return 0==t||t==r?0:e-n-a-1!=0?(t-r)/(e-n-a-1):0}}};var i=function(){this.ssrcInfoMap=new Map};function s(){this.ssrcQueueMap=new Map,this.ssrcInfo=new i,s.prototype.AddQueue=function(e){var t=new r.a;return this.ssrcQueueMap.set(e,t),t},s.prototype.DeleteQueue=function(e){this.ssrcQueueMap.delete(e)},s.prototype.GetQueue=function(e){return this.ssrcQueueMap.get(e)},s.prototype.ClearQueue=function(){this.ssrcQueueMap.clear()},s.prototype.GetQueueData=function(e){return this.ssrcQueueMap.get(e).dequeue()},s.prototype.PutQueueData=function(e,t){this.ssrcQueueMap.get(e).enqueue(t)},s.prototype.GetQueueLength=function(e){var t=this.ssrcQueueMap.get(e);return t?t.getLength():0},s.prototype.UpdateInfo=function(e,t){this.ssrcInfo.UpdateSSRCInfo(e,t)},s.prototype.GetFpsInfo=function(e){return this.ssrcInfo.GetSSRCFpsInfo(e)}}i.prototype={UpdateSSRCInfo:function(e,t){var n=this.ssrcInfoMap.get(e);n||(n=new o,this.ssrcInfoMap.set(e,n)),n.UpdateVideoInfo(t)},GetSSRCFpsInfo:function(e){var t=this.ssrcInfoMap.get(e);return t?t.GetVideoFpsInfo():0}};var c=function(){function e(){this.map=new Map,this.AudioQueueMGR=new a,this.timemap=new Map}return e.prototype.Add=function(e,t){this.map.set(e,t),this.AudioQueueMGR.AddQueue(e)},e.prototype.Clear=function(){this.map.clear()},e.prototype.Keys=function(){return this.map.keys()},e.prototype.UpdateSSRCTimeMap=function(e){this.timemap=e},e.prototype.GetSSRCTimeMap=function(e){return this.timemap?this.timemap.get(e):null},e}();function u(){this.map=new Map,this.VideoQueueMGR=new s}u.prototype.Add=function(e,t){this.map.set(e,t)},u.prototype.Clear=function(){this.map.clear()},u.prototype.Keys=function(){return this.map.keys()};var d=function(){this.frames=0,this.ntp=new r.a};d.prototype={UpdateSharingInfo:function(e){this.frames++,this.ntp.getLength()>30&&this.ntp.dequeue(),this.ntp.enqueue(e)},GetSharingFpsInfo:function(){var e=this.ntp.getLength();if(!(e<5)){for(var t=0,n=0,r=0,a=0,o=0;o<e;o++){var i=this.ntp.dequeue();0==i&&0==r?n++:0!=i?(a=0,0==r&&(r=i),t=i):0!=r&&t!=r&&0==i&&a++}return 0==t||t==r?0:e-n-a-1!=0?(t-r)/(e-n-a-1):0}}};var f=function(){this.ssrcInfoMap=new Map};function l(){this.ssrcQueueMap=new Map,this.ssrcInfo=new f,l.prototype.AddQueue=function(e){var t=new r.a;return this.ssrcQueueMap.set(e,t),t},l.prototype.DeleteQueue=function(e){this.ssrcQueueMap.delete(e)},l.prototype.GetQueue=function(e){return this.ssrcQueueMap.get(e)},l.prototype.ClearQueue=function(){this.ssrcQueueMap.clear()},l.prototype.GetQueueData=function(e){return this.ssrcQueueMap.get(e).dequeue()},l.prototype.PutQueueData=function(e,t){this.ssrcQueueMap.get(e).enqueue(t)},l.prototype.GetQueueLength=function(e){var t=this.ssrcQueueMap.get(e);return t?t.getLength():0},l.prototype.UpdateInfo=function(e,t){this.ssrcInfo.UpdateSSRCInfo(e,t)},l.prototype.GetFpsInfo=function(e){return this.ssrcInfo.GetSSRCFpsInfo(e)}}function p(){this.map=new Map,this.sQueue=new r.a,this.SharingQueueMGR=new l}f.prototype={UpdateSSRCInfo:function(e,t){var n=this.ssrcInfoMap.get(e);n||(n=new d,this.ssrcInfoMap.set(e,n)),n.UpdateSharingInfo(t)},GetSSRCFpsInfo:function(e){var t=this.ssrcInfoMap.get(e);return t?t.GetSharingFpsInfo():0}},p.prototype.Clear=function(){this.map.clear()},p.prototype.Keys=function(){return this.map.keys()},p.prototype.Add=function(e,t){this.map.set(e,t)},p.prototype.Get=function(e){return this.map.get(e)},p.prototype.PutData=function(e){e&&this.sQueue&&this.sQueue.enqueue(e)},p.prototype.GetData=function(){if(this.sQueue)return this.sQueue.dequeue()},p.prototype.ClearBuffer=function(){this.sQueue&&(this.sQueue=new r.a)}},function(e,t,n){var r=n(41),a=n(42),o=n(30),i=n(43);e.exports=function(e){return r(e)||a(e)||o(e)||i()},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(22),a=n(27);e.exports=function(e){return"number"==typeof e||a(e)&&"[object Number]"==r(e)}},function(e,t,n){(function(e){!function(n,r){"use strict";var a={};n.PubSub=a;var o=n.define;!function(e){var t={},n=-1;function r(e){var t;for(t in e)if(e.hasOwnProperty(t))return!0;return!1}function a(e,t,n){try{e(t,n)}catch(e){setTimeout(function(e){return function(){throw e}}(e),0)}}function o(e,t,n){e(t,n)}function i(e,n,r,i){var s,c=t[n],u=i?o:a;if(t.hasOwnProperty(n))for(s in c)c.hasOwnProperty(s)&&u(c[s],e,r)}function s(e,n,a,o){var s=function(e,t,n){return function(){var r=String(e),a=r.lastIndexOf(".");for(i(e,e,t,n);-1!==a;)a=(r=r.substr(0,a)).lastIndexOf("."),i(e,r,t,n)}}(e,n,o);return!!function(e){for(var n=String(e),a=Boolean(t.hasOwnProperty(n)&&r(t[n])),o=n.lastIndexOf(".");!a&&-1!==o;)o=(n=n.substr(0,o)).lastIndexOf("."),a=Boolean(t.hasOwnProperty(n)&&r(t[n]));return a}(e)&&(!0===a?s():setTimeout(s,0),!0)}e.publish=function(t,n){return s(t,n,!1,e.immediateExceptions)},e.publishSync=function(t,n){return s(t,n,!0,e.immediateExceptions)},e.subscribe=function(e,r){if("function"!=typeof r)return!1;t.hasOwnProperty(e)||(t[e]={});var a="uid_"+String(++n);return t[e][a]=r,a},e.subscribeOnce=function(t,n){var r=e.subscribe(t,(function(){e.unsubscribe(r),n.apply(this,arguments)}));return e},e.clearAllSubscriptions=function(){t={}},e.clearSubscriptions=function(e){var n;for(n in t)t.hasOwnProperty(n)&&0===n.indexOf(e)&&delete t[n]},e.unsubscribe=function(n){var r,a,o,i="string"==typeof n&&(t.hasOwnProperty(n)||function(e){var n;for(n in t)if(t.hasOwnProperty(n)&&0===n.indexOf(e))return!0;return!1}(n)),s=!i&&"string"==typeof n,c="function"==typeof n,u=!1;if(!i){for(r in t)if(t.hasOwnProperty(r)){if(a=t[r],s&&a[n]){delete a[n],u=n;break}if(c)for(o in a)a.hasOwnProperty(o)&&a[o]===n&&(delete a[o],u=!0)}return u}e.clearSubscriptions(n)}}(a),"function"==typeof o&&o.amd?o((function(){return a})):(void 0!==e&&e.exports&&(t=e.exports=a),t.PubSub=a,e.exports=t=a)}("object"==typeof window&&window||this)}).call(this,n(52)(e))},function(e,t,n){var r=n(32),a=n(54),o=n(55),i=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?a(e):o(e)}},function(e,t,n){var r=n(56),a=n(24);e.exports=function(e,t,n){var o=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return a(n)&&(o="leading"in n?!!n.leading:o,i="trailing"in n?!!n.trailing:i),r(e,t,{leading:o,maxWait:t,trailing:i})}},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,n){"use strict";var r=n(11),a=n.n(r),o=n(12),i=n.n(o),s=function(){function e(){a()(this,e)}return i()(e,[{key:"_drawWatermarkWithShadow",value:function(e){var t=e.ctx,n=e.textPos,r=e.opacity,a=e.name;t.fillStyle="rgba(0, 0, 0, ".concat(r,")"),t.fillText(a,n.x,n.y),t.fillStyle="rgba(255, 255, 255, ".concat(r,")"),t.fillText(a,n.x+1,n.y+1)}},{key:"_getTransformInfo",value:function(e){var t,n=e.canvas,r=e.position;if(1===r)t={x:n.width/2,y:0,rateRadio:0,maxWidth:n.width};else if(2===r)t={x:n.width/2,y:n.height,rateRadio:0,maxWidth:n.width};else if(4===r)t={x:0,y:n.height/2,rateRadio:Math.PI/2,maxWidth:n.height};else if(8===r)t={x:n.width,y:n.height/2,rateRadio:-Math.PI/2,maxWidth:n.height};else{var a=-21*Math.PI/180;t={x:n.width/2,y:n.height/2,rateRadio:a,maxWidth:Math.min(n.width/Math.cos(a),-n.height/Math.sin(a))}}return t.maxWidth>100&&(t.maxWidth-=50),t}},{key:"_calcTextPos",value:function(e){var t=e.position,n=e.ctx,r=e.name,a=e.textWidth,o=this._getPaddingWidth({ctx:n,position:t,name:r});return 1===t?{x:-a.width/2,y:o}:2===t||4===t||8===t?{x:-a.width/2,y:-o}:{x:-a.width/2,y:n.measureText(r[0]).width/2}}},{key:"_getPaddingWidth",value:function(e){var t=e.ctx,n=e.position,r=e.name;return[1,2,4,8].includes(n)?32:t.measureText(r[0]).width}},{key:"_setBaseLine",value:function(e){var t=e.ctx,n=e.position;t.textBaseline=1===n?"top":2===n||4===n||8===n?"bottom":"middle"}},{key:"Get_WaterMarkRGBA",value:function(e){var t=e.canvas,n=e.name,r=e.width,a=e.height,o=e.opacity,i=void 0===o?.15:o,s=e.position,c=e.convertToDataUrl;if(n&&r&&a){i=i||.15;r*=1,a*=1,t.width=r,t.height=a;var u,d=this._getTransformInfo({canvas:t,position:s}),f=t.getContext("2d");if(f.clearRect(0,0,t.width,t.height),f.translate(d.x,d.y),f.rotate(d.rateRadio),this._setBaseLine({ctx:f,position:s}),f.lineWidth=1,f.imageSmoothingEnabled=!0,1==n.length){var l=d.maxWidth/n.length;f.font=l+"px  'Segoe UI'",u=f.measureText(n)}else{var p=16;for(f.font=p+"px  'Segoe UI'",u=f.measureText(n);u.width<d.maxWidth-2*this._getPaddingWidth({ctx:f,position:s,name:n});)p+=1,f.font=p+"px  'Segoe UI'",u=f.measureText(n);if(u.width>d.maxWidth-2*this._getPaddingWidth({ctx:f,position:s,name:n}))if(p>16)p-=1,f.font=p+"px  'Segoe UI'",u=f.measureText(n);else{for(var h=n;n.length>5&&u.width>d.maxWidth-2*this._getPaddingWidth({ctx:f,position:s,name:n+"..."});)n=n.slice(0,n.length-1),u=f.measureText(n+"...");h!==n&&(n+="...")}}var m,g=this._calcTextPos({position:s,ctx:f,name:n,textWidth:u});if(this._drawWatermarkWithShadow({ctx:f,name:n,opacity:i,textPos:g}),c)m=t.toDataURL();else{var _=f.getImageData(0,0,f.canvas.width,f.canvas.height);m=new Uint8Array(_.data.buffer)}return f.rotate(-d.rateRadio),f.translate(-d.x,-d.y),m}}},{key:"Get_Repeated_WaterMarkRGBA",value:function(e){var t=e.canvas,n=e.name,r=e.width,a=e.height,o=e.opacity,i=void 0===o?.15:o,s=(e.position,e.convertToDataUrl);if(n&&r&&a){i=i||.15;r*=1,a*=1,t.width=r,t.height=a;var c=t.getContext("2d");c.clearRect(0,0,t.width,t.height),c.translate(r/2,a/2),c.rotate(-21*Math.PI/180),c.imageSmoothingEnabled=!0;c.font="".concat(32,"px 'Segoe UI'"),c.textBaseline="top";var u,d=c.measureText(n),f=.37*d.width,l=0,p=-a;do{var h=l%2==0?f-r:-r;do{c.fillStyle="rgba(0, 0, 0, ".concat(i,")"),c.fillText(n,h,p),c.fillStyle="rgba(255, 255, 255, ".concat(i,")"),c.fillText(n,h+1,p+1),h+=d.width+f}while(h<r);p+=32+f,l++}while(p<a);if(s)u=t.toDataURL();else{var m=c.getImageData(0,0,c.canvas.width,c.canvas.height);u=new Uint8Array(m.data.buffer)}return c.rotate(21*Math.PI/180),c.translate(-r/2,-a/2),u}}}]),e}();t.a=s},function(e,t,n){var r=n(50);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(29);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(17).default,a=n(44);e.exports=function(e){var t=a(e,"string");return"symbol"===r(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(33).Symbol;e.exports=r},function(e,t,n){var r=n(53),a="object"==typeof self&&self&&self.Object===Object&&self,o=r||a||Function("return this")();e.exports=o},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(46);e.exports=function(e,t){if(null==e)return{};var n,a,o=r(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(17).default,a=n(51);e.exports=function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return a(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(22),a=n(24);e.exports=function(e){if(!a(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t,n){"use strict";(function(e){var r=n(7),a=n.n(r),o=n(3),i=n.n(o),s=n(23),c=n.n(s),u=n(13),d=n(10),f=n(1),l=n(20),p=n.n(l),h=n(39),m=n.n(h),g=n(6),_=n(2),v=Object(u.a)("sdk.remoteControl"),y=0,S=0,E=83,b=82,D=84,A=85,I=87,w=88;function M(e){var t=this;this.dom=e.dom,this.socketURL=e.socketURL,this.meetingID=e.meetingID,this.condID=e.condID,this.blobSocket=null;var n=this._keyMouseEventHandler.bind(this);this.keyMouseEventHandler=function(e){t.keyMouseFilters(e).then((function(e){n(e)}))},this.keyMouseEventHandlerThrottle=c()((function(e){t.keyMouseEventHandler(e)}),1e3/24),this.pasteOnDocument=this._pasteOnDocument.bind(this),this.copyOnDocument=this._copyOnDocument.bind(this),this.cutOnDocument=this._cutOnDocument.bind(this),this.focus=this._focus.bind(this),this.PUBSUB_SHARING_PARAM_INFO_TOKEN=null,this.preventDefault=this._preventDefault.bind(this),this.browserBlurEventHandler=this._browserBlurEventHandler.bind(this),this.positionMap={canvas:{offsetX:0,offsetY:0},src:{x:0,y:0,w:0,h:0,scaleWidth:0,scaleHeight:0},dst:{x:0,y:0,w:0,h:0}},this.blockedKeyboardEventOfPaste=[],this.keydownupMergeRemoveMap={},this.keyMouseEventHandlerFilter_every_keyup_must_have_keydown_before_Map={},this.PASTE_MAX_BYTE_LENGTH=64e3,this.currentMousePositionProps={clientX:0,clientY:0,x2video:0,y2video:0},this.isControllerNow=!0,this.remoteOS=_.f.UNKNOWN,this.localOS=this.getLocalOS(),this._blockedCopyKeyboardList=[],this.maxSleep=500}M.prototype={start:function(){var e=this;return new Promise(function(){var t=a()(i.a.mark((function t(n,r){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,v("remote control start"),e.modifyDom(),e.bindEvent(),e.subscribeSharingWidthOrHeightChange(),t.next=7,e.connectSocket();case 7:e.sendPostionPDU(),e.socketBlobMessageHandler(),n(!0),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),r(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,n){return t.apply(this,arguments)}}())},destroy:function(){var e=this;return new Promise((function(t,n){try{v("destroy remote control"),e.unbindEvent(),e.uncheckAndClearKeydownupMergeRemoveMap(),e.destroySocket(),d.a.unsubscribe(e.PUBSUB_SHARING_PARAM_INFO_TOKEN),t(!0)}catch(e){v(e),t(!1)}}))},modifyDom:function(){try{this.dom.setAttribute("tabindex","0"),this.dom.focus()}catch(e){}},_focus:function(){this.dom.focus()},getLocalOS:function(){var t=e.navigator.platform;return/win/i.test(t)?_.f.WIN:/mac/i.test(t)?_.f.MAC:_.f.UNKNOWN},setIsControlerNow:function(e){this.isControllerNow=e},blobSocketCheckAndSend:function(e){this.isControllerNow&&this.blobSocket.send(e)},isKeyboardEvent:function(e){return!!e&&(e.type&&-1!==["keydown","keyup"].indexOf(e.type.toLowerCase()))},isThisKeyIgnoreCase:function(e,t){return e.key&&e.key.toLowerCase()==t.toLowerCase()},_copyOnDocument:function(e){var t=this;return a()(i.a.mark((function n(){var r;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.isFocusNow()){n.next=2;break}return n.abrupt("return");case 2:if(r=t._blockedCopyKeyboardList,"done"!=r[r.length-1]){n.next=8;break}return n.abrupt("return");case 8:t._blockedCopyKeyboardList=[],t._blockedCopyKeyboardList.push("done");case 10:v("copyOnDocument",e),t.processMonitorCtrlMetaWithKey("c");case 12:case"end":return n.stop()}}),n)})))()},_cutOnDocument:function(e){var t=this;return a()(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.isFocusNow()){n.next=2;break}return n.abrupt("return");case 2:v("_cutOnDocument",e),t.processMonitorCtrlMetaWithKey("x");case 4:case"end":return n.stop()}}),n)})))()},processMonitorCtrlMetaWithKey:function(e){var t=this,n=0,r=1,a=2,o=this.remoteOS===_.f.MAC,i={t:"keydown",event_type:1,repeat:!1,alt:!1,shift:!1,capslock:!1,numlock:!0,pduType:A,ctrl:!o,super:o},s=Object.assign({},i,{charCode:0,keyCode:o?91:17,key:o?"Meta":"Control"}),c=Object.assign({},i,{charCode:e.charCodeAt(0),keyCode:e.toUpperCase().charCodeAt(0),key:e}),u=Object.assign({},s,{input_event_type:n}),d=(Object.assign({},s,{input_event_type:a}),Object.assign({},c,{input_event_type:n})),f=(Object.assign({},c,{input_event_type:a}),Object.assign({},s,{t:"keyup",ctrl:!1,super:!1,input_event_type:r})),l=Object.assign({},c,{t:"keyup",ctrl:!1,super:o,input_event_type:r});(o?[u,d,l,f]:[u,d,f,l]).forEach((function(e){t.processEvent(e)}))},isFocusNow:function(){return this.dom===document.activeElement},_pasteOnDocument:function(e){var t=this;return a()(i.a.mark((function n(){var r,a,o,s,c,u,d,f,l,p,h;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.isFocusNow()){for(r=(e.clipboardData||window.clipboardData).getData("text"),v("_pasteOnDocument",r),a=[],o=0;o<r.length;o++)for(s=r[o],c=m.a.encode(s),u=0;u<c.length;u++)a.push(c.charCodeAt(u));for(d=new ArrayBuffer(8+a.length),f=new Uint8Array(d),l=new DataView(d,4,4),p=new Uint8Array(d,8),f[0]=I,l.setUint32(0,a.length,!0),h=0;h<a.length;h++)p[h]=a[h];a.length>t.PASTE_MAX_BYTE_LENGTH?(t.triggerPasteTextLengthOverflow(),t.dropAllEventFromBlockedKeyboardEventOfPaste()):(t.blobSocketCheckAndSend(d),t.processMonitorCtrlMetaWithKey("v"))}case 1:case"end":return n.stop()}}),n)})))()},onReturnCopiedText:function(e){!this._onReturnCopiedText_list&&(this._onReturnCopiedText_list=[]),this._onReturnCopiedText_list.push(e)},triggerReturnCopiedText:function(e){this._onReturnCopiedText_list&&this._onReturnCopiedText_list.forEach((function(t){return t(e)}))},onPasteTextLengthOverflow:function(e){!this._onPasteTextLengthOverflow_list&&(this._onPasteTextLengthOverflow_list=[]),this._onPasteTextLengthOverflow_list.push(e)},triggerPasteTextLengthOverflow:function(){this._onPasteTextLengthOverflow_list&&this._onPasteTextLengthOverflow_list.forEach((function(e){return e()}))},dropAllEventFromBlockedKeyboardEventOfPaste:function(){this.blockedKeyboardEventOfPaste=[]},createParamsFromKeyboardEvent:function(e){return{key:e.key,code:e.code,shiftKey:e.shiftKey,altKey:e.altKey,repeat:e.repeat,charCode:e.charCode,keyCode:e.keyCode,which:e.which,ctrlKey:e.ctrlKey,metaKey:e.metaKey}},sendAllEventFromBlockedKeyboardEventOfPaste:function(){for(v("blockedKeyboardEventOfPaste.length",this.blockedKeyboardEventOfPaste.length);this.blockedKeyboardEventOfPaste.length>0;){var e=this.blockedKeyboardEventOfPaste.shift();this._keyMouseEventHandler(e)}},_preventDefault:function(e){if(-1!==["keydown","keyup"].indexOf(e.type))for(var t=["v","c","x"],n=0;n<t.length;n++)if(e.ctrlKey^e.metaKey&&this.isThisKeyIgnoreCase(e,t[n]))return;e.preventDefault()},subscribeSharingWidthOrHeightChange:function(){var e=this;this.PUBSUB_SHARING_PARAM_INFO_TOKEN=d.a.on(f.Xc,(function(t,n){v("subscribeSharingWidthOrHeightChange",n.body),e.positionMap.dst.w=n.body.logicWidth,e.positionMap.dst.h=n.body.logicHeight,e.positionMap.src.w=n.body.logicWidth,e.positionMap.src.h=n.body.logicHeight,e.sendPostionPDU()}))},setDstWidthAndHeight:function(e,t){if(!e||!t)throw new Error("the value of destination sharing video width/height are not correct");this.positionMap.dst.w=e,this.positionMap.dst.h=t},setSrcWidthAndHeight:function(e,t){if(!e||!t)throw new Error("the value of source sharing video width/height are not correct");this.positionMap.src.w=e,this.positionMap.src.h=t},setSrcWidthAndHeightAndSendPDU:function(e,t){if(!e||!t)throw new Error("the value of source sharing video width/height are not correct");this.positionMap.src.w!==e&&this.positionMap.src.h!==t&&(this.setSrcWidthAndHeight(e,t),this.sendPostionPDU())},setSrcOffsetXYAndSendPDU:function(e,t){e=Math.floor(e),t=Math.floor(t),this.positionMap.canvas.offsetX===e&&this.positionMap.canvas.offsetY===t||(this.setSrcOffsetXY(e,t),this.sendPostionPDU())},setSrcScaleWidthAndHeight:function(e,t){if(!e||!t)throw new Error("the value of source sharing video scaleWidth/scaleHeight are not correct");this.positionMap.src.scaleWidth=e,this.positionMap.src.scaleHeight=t},setSrcOffsetXY:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Math.floor(e),r=Math.floor(t);if(!p()(n)&&!p()(r))throw new Error("the value of source offset x or y is not correct");this.positionMap.canvas.offsetX=n,this.positionMap.canvas.offsetY=r},sendPostionPDU:function(){var e=new ArrayBuffer(36),t=new Uint8Array(e),n=new DataView(e,4),r=new DataView(e,20);t[0]=b,n.setInt32(0,this.positionMap.src.x,!0),n.setInt32(4,this.positionMap.src.y,!0),n.setInt32(8,this.positionMap.src.w,!0),n.setInt32(12,this.positionMap.src.h,!0),r.setInt32(0,this.positionMap.dst.x,!0),r.setInt32(4,this.positionMap.dst.y,!0),r.setInt32(8,this.positionMap.dst.w,!0),r.setInt32(12,this.positionMap.dst.h,!0),v("send position pdu");try{this.blobSocket.send(e)}catch(e){}},unbindEvent:function(){var e=this.dom;e.removeEventListener("click",this.focus),e.removeEventListener("keydown",this.keyMouseEventHandler),e.removeEventListener("keyup",this.keyMouseEventHandler),document.removeEventListener("paste",this.pasteOnDocument),document.removeEventListener("copy",this.copyOnDocument),document.removeEventListener("cut",this.cutOnDocument),e.removeEventListener("contextmenu",this.preventDefault),e.removeEventListener("wheel",this.preventDefault),e.removeEventListener("dblclick",this.preventDefault),e.removeEventListener("keydown",this.preventDefault),e.removeEventListener("keyup",this.preventDefault),e.removeEventListener("dblclick",this.keyMouseEventHandler),e.removeEventListener("mousedown",this.keyMouseEventHandler),e.removeEventListener("mouseup",this.keyMouseEventHandler),e.removeEventListener("mousemove",this.keyMouseEventHandlerThrottle),e.removeEventListener("wheel",this.keyMouseEventHandler),window.removeEventListener("blur",this.browserBlurEventHandler)},bindEvent:function(){var e=this.dom;v("dom",e),e.addEventListener("click",this.focus),e.addEventListener("keydown",this.keyMouseEventHandler),e.addEventListener("keyup",this.keyMouseEventHandler),document.addEventListener("paste",this.pasteOnDocument),document.addEventListener("copy",this.copyOnDocument),document.addEventListener("cut",this.cutOnDocument),e.addEventListener("contextmenu",this.preventDefault),e.addEventListener("wheel",this.preventDefault),e.addEventListener("dblclick",this.preventDefault),e.addEventListener("keydown",this.preventDefault),e.addEventListener("keyup",this.preventDefault),e.addEventListener("dblclick",this.keyMouseEventHandler),e.addEventListener("mousedown",this.keyMouseEventHandler),e.addEventListener("mouseup",this.keyMouseEventHandler),e.addEventListener("mousemove",this.keyMouseEventHandlerThrottle),e.addEventListener("wheel",this.keyMouseEventHandler),window.addEventListener("blur",this.browserBlurEventHandler)},recordCurrentMousePosition:function(e){try{var t=this.positionMap,n=e.clientX,r=e.clientY;Object.assign(this.currentMousePositionProps,{clientX:n,clientY:r,x2video:n-t.canvas.offsetX,y2video:r-t.canvas.offsetY})}catch(e){}},resolvePosition:function(e){var t=e.clientX,n=e.clientY,r=this.positionMap;return t-=r.canvas.offsetX,n-=r.canvas.offsetY,t*=r.dst.w/r.src.scaleWidth,n*=r.dst.h/r.src.scaleHeight,{x:t=Math.floor(t),y:n=Math.floor(n)}},generateBuffer:function(e){if(void 0!==e.key&&!/^[\x00-\x7F]*$/.test(e.key))throw new Error("params.key must only contain ascii character");var t=8;(e=Object.assign({v:0,x:0,y:0,dx:0,dy:0,repeat:0},e)).pduType===D&&(t+=4);var n=new ArrayBuffer(t),r=new Uint8Array(n),a=new DataView(n,4),o=new DataView(n,4);if(r[0]=e.pduType,r[1]=63&e.input_event_type,e.pduType===E)a.setUint16(0,e.x,!0),a.setUint16(2,e.y,!0);else if(e.pduType===D)o.setInt16(0,e.x,!0),o.setInt16(2,e.y,!0),o.setInt16(4,e.dx,!0),o.setInt16(6,e.dy,!0);else if(e.pduType===A){var i=new DataView(n,4),s=new DataView(n,6),c=new Uint8Array(n,2);i.setUint16(0,e.keyCode,!0),s.setUint16(0,e.charCode,!0);var u={shift:1,capslock:2,ctrl:4,alt:8,numlock:16,super:32},d=0;Object.keys(u).forEach((function(t){!0===e[t]&&(d+=u[t])})),c[0]=d,e.repeat&&(r[1]=32|r[1])}return n},processEvent:function(e){this.blobSocket&&this.blobSocketCheckAndSend(this.generateBuffer(e))},debug:function(e){var t={};(e.pduType===A?["t","keyCode","charCode","key"]:["t","x","y","dx","dy","input_event_type"]).forEach((function(n){t[n]=e[n]})),v("debug",JSON.stringify(t))},blockedPasteKeyboard:function(e){var t=this;return new Promise((function(n,r){t.isKeyboardEvent(e)&&t.isPasteEvent(e)?t.blockedKeyboardEventOfPaste.push(e):n(e)}))},isPasteEvent:function(e){var t=this.isThisKeyIgnoreCase(e,"v");return!!(e.ctrlKey^e.metaKey&&t)},isCopyEvent:function(e){var t=this.isThisKeyIgnoreCase(e,"c");return!!(e.ctrlKey^e.metaKey&&t)},isCutEvent:function(e){var t=this.isThisKeyIgnoreCase(e,"x");return!!(e.ctrlKey^e.metaKey&&t)},returnNewEventByTransformCtrlKeyOrCommandKey:function(e){var t=this.createParamsFromKeyboardEvent(e);switch(this.remoteOS){case _.f.WIN:Object.assign(t,{ctrlKey:!0,metaKey:!1});break;case _.f.MAC:Object.assign(t,{ctrlKey:!1,metaKey:!0});break;case _.f.UNKNOWN:}return new e.constructor(e.type,t)},transformCtrlCAndCommandC:function(e){var t=this,n=this;return new Promise((function(r,a){if(t.isKeyboardEvent(e)&&(e.ctrlKey||e.metaKey)&&n.isThisKeyIgnoreCase(e,"c")){n.createParamsFromKeyboardEvent(e);r(n.returnNewEventByTransformCtrlKeyOrCommandKey(e))}else r(e)}))},keyMouseEventHandlerFilter_MatainKeyDownUpMergeMap:function(e){var t=this;return new Promise((function(n,r){try{t.isKeyboardEvent(e)&&e.key&&("keydown"!==e.type||e.repeat||(t.keydownupMergeRemoveMap[e.key]={t:+new Date,e:e}),"keydown"===e.type&&e.repeat&&delete t.keydownupMergeRemoveMap[e.key],"keyup"===e.type&&delete t.keydownupMergeRemoveMap[e.key])}catch(e){v.error(e)}n(e)}))},_browserBlurEventHandler:function(){this._checkAndClearKeydownupMergeRemoveMap(this.maxSleep,!0)},checkAndClearKeydownupMergeRemoveMap:function(){var e=this,t=this;this.checkAndClearKeydownupMergeRemoveMapInterval=setInterval((function(){t._checkAndClearKeydownupMergeRemoveMap(e.maxSleep)}),100)},_checkAndClearKeydownupMergeRemoveMap:function(e,t){var n=this,r=this.keydownupMergeRemoveMap;Object.keys(r).forEach((function(a){var o=r[a];if(+new Date-o.t>=e||t){var i=new o.e.constructor("keyup",o.e);try{n._keyMouseEventHandler(i)}catch(e){}delete n.keydownupMergeRemoveMap[a]}}))},uncheckAndClearKeydownupMergeRemoveMap:function(){this._checkAndClearKeydownupMergeRemoveMap(0),clearInterval(this.checkAndClearKeydownupMergeRemoveMapInterval)},keyMouseFilters:function(e){var t=this;return new Promise((function(t,n){t(e)})).then((function(e){return t.blockedPasteKeyboard(e)})).then((function(e){return t.blockedCopyKeyboard(e)})).then((function(e){return t.blockedCutKeyboard(e)})).then((function(e){return t.keyMouseEventHandlerFilter_MatainKeyDownUpMergeMap(e)})).then((function(e){return t.blockedSomeKeyboardEventNotHaveKeydownBefore(e)})).then((function(e){return t.keyMouseEventHandlerFilter_EVERY_KEYUP_MUST_HAVE_KEYDOWN_BEFORE(e)}))},blockedSingleMetaKey:function(e){var t=this;return new Promise((function(n,r){t.isKeyboardEvent(e)&&e.key&&(/command/i.test(e.key)||/meta/i.test(e.key)||/control/i.test(e.key))&&!e.shiftKey&&!e.altKey&&e.ctrlKey^e.metaKey||n(e)}))},blockedCutKeyboard:function(e){var t=this;return new Promise((function(n,r){t.isKeyboardEvent(e)&&t.isCutEvent(e)||n(e)}))},blockedCopyKeyboard:function(e){var t=this;return new Promise((function(n,r){t.isKeyboardEvent(e)&&t.isCopyEvent(e)?t._blockedCopyKeyboardList.push(e):n(e)}))},blockedSomeKeyboardEventNotHaveKeydownBefore:function(e){var t=this;return new Promise((function(n,r){if(t.isKeyboardEvent(e)&&e.key){var a=!1;if(["x","c","v"].forEach((function(n){t.isThisKeyIgnoreCase(e,n)&&(a=!0)})),"keyup"===e.type&&a)if(!!!t.keyMouseEventHandlerFilter_every_keyup_must_have_keydown_before_Map[e.key])return}n(e)}))},keyMouseEventHandlerFilter_EVERY_KEYUP_MUST_HAVE_KEYDOWN_BEFORE:function(e){var t=this;return new Promise((function(n,r){try{if(t.isKeyboardEvent(e)&&e.key&&("keydown"===e.type&&(t.keyMouseEventHandlerFilter_every_keyup_must_have_keydown_before_Map[e.key]=e),"keyup"===e.type)){var a=!!t.keyMouseEventHandlerFilter_every_keyup_must_have_keydown_before_Map[e.key];delete t.keyMouseEventHandlerFilter_every_keyup_must_have_keydown_before_Map[e.key];var o=!1;if(["meta"].forEach((function(n){t.isThisKeyIgnoreCase(e,n)&&(o=!0)})),!a&&!o){v.warn("keyup trigger, but no keydown before");var i=new e.constructor("keydown",e);t._keyMouseEventHandler(i)}}}catch(e){v.error(e)}n(e)}))},_keyMouseEventHandler:function(e){this.isKeyboardEvent(e)&&v("_keyMouseEventHandler keyboard",e);var t={},n={keydown:0,keyup:1,keychar:2},r={mousemove:0,mousedown:{left:1,right:4,middle:7},mouseup:{left:2,right:5,middle:8},mouseleftdbldown:3,mouserightdbldown:6,wheel:10},a=e.getModifierState?function(t){return e.getModifierState(t)}:function(e,t){return t},o=y,i=e.key&&1===e.key.length;if(-1!==["keydown","keyup"].indexOf(e.type))t.event_type=1,o=A,void 0!==n[e.type]&&(t.input_event_type=n[e.type]);else{if(-1===["mousedown","mouseup","mousemove","wheel","click","dblclick","contextmenu"].indexOf(e.type))return void v.warn("the event type cannot be handled");t.event_type=0,this.recordCurrentMousePosition(e);var s=this.resolvePosition(e);if(Object.assign(t,{x:s.x,y:s.y}),o="wheel"===e.type?D:E,void 0!==r[e.type]&&(t.input_event_type=r[e.type]),-1!==["mousedown","mouseup"].indexOf(e.type)){var c;switch(e.button){case 0:c="left";break;case 1:c="middle";break;case 2:c="right";break;default:c="left"}t.input_event_type=r[e.type][c]}-1!==["dblclick"].indexOf(e.type)&&(t.input_event_type=r.mouseleftdbldown)}if("wheel"===e.type){var u={deltaX:"dx",deltaY:"dy"};Object.keys(u).forEach((function(n){e[n]&&(t[u[n]]=e[n]>0?-100:100)}))}var d=this.ctrlMetaConvert({keyCode:e.keyCode,key:e.key,ctrlKey:e.ctrlKey,metaKey:e.metaKey});Object.assign(t,{t:e.type,pduType:o,keyCode:d.keyCode,charCode:i?e.key.charCodeAt(0):0,key:d.key,repeat:e.repeat,ctrl:d.ctrlKey,alt:e.altKey,super:d.metaKey,shift:e.shiftKey,capslock:a("CapsLock",!1),numlock:a("NumLock",!1)}),this.isKeyboardEvent(e)&&v("processEvent",JSON.stringify(t)),this.processEvent(t)},ctrlMetaConvert:function(e){var t=e.metaKey,n=e.ctrlKey;return(this.remoteOS===_.f.MAC&&this.localOS===_.f.WIN||this.remoteOS===_.f.WIN&&this.localOS===_.f.MAC)&&e.key&&(/Meta/i.test(e.key)?(e.ctrlKey=!0,e.keyCode=17,e.metaKey=n,e.key="Control"):/Control/i.test(e.key)&&(e.metaKey=!0,e.keyCode=91,e.ctrlKey=t,e.key="Meta")),e},isCapslock:function(e){var t=e.keyCode,n=e.key,r=e.shiftKey;return!!/[a-zA-Z]/.test(n)&&(n.charCodeAt(0)!==t?!r:r)},stop:function(){var e=this;return a()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.blobSocket&&e.blobSocket.close(),e.blobSocket=null;case 2:case"end":return t.stop()}}),t)})))()},connectSocket:function(){var e=this;return a()(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.createBlobSocket("".concat(e.socketURL,"/wc/media/").concat(e.meetingID,"?type=r&mode=2&cid=").concat(e.condID));case 2:return(n=t.sent).binaryType="blob",e.blobSocket=n,t.abrupt("return",!0);case 6:case"end":return t.stop()}}),t)})))()},socketBlobMessageHandler:function(){if(this.blobSocket){var e=this;this.blobSocket.addEventListener("message",function(){var t=a()(i.a.mark((function t(n){var r,a,o,s,c,u,d;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.data,t.next=3,g.g.readBlobAsBuffer(r,r.size);case 3:if(a=t.sent,o=new Int8Array(a),(s=o[0])!==w||!e.isControllerNow){t.next=14;break}return c=r.slice(8),t.next=10,g.g.readBlob(c);case 10:u=t.sent,d=o[4],v("COPY_TEXT_FROM_RWG",u,d),e.triggerReturnCopiedText({data:u,x:e.currentMousePositionProps.x2video,y:e.currentMousePositionProps.y2video});case 14:s===S&&e.blobSocket.send(a);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},destroySocket:function(){try{this.blobSocket.close(),this.blobSocket=null}catch(e){v("destroySocket",e)}},createBlobSocket:function(e){return new Promise((function(t,n){var r=new WebSocket(e);r.addEventListener("open",(function(){})),r.addEventListener("message",(function(e){try{var n=JSON.parse(e.data);0===n.evt&&n.body&&t(r)}catch(e){}})),r.addEventListener("error",(function(e){n(e)})),r.addEventListener("close",(function(){n(new Error("socket close"))}))}))},setRemoteOS:function(e){void 0!==e&&(this.remoteOS=e)}},t.a=M}).call(this,n(34))},function(e,t,n){!function(e){var t,n,r,a=String.fromCharCode;function o(e){for(var t,n,r=[],a=0,o=e.length;a<o;)(t=e.charCodeAt(a++))>=55296&&t<=56319&&a<o?56320==(64512&(n=e.charCodeAt(a++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),a--):r.push(t);return r}function i(e){if(e>=55296&&e<=57343)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function s(e,t){return a(e>>t&63|128)}function c(e){if(0==(4294967168&e))return a(e);var t="";return 0==(4294965248&e)?t=a(e>>6&31|192):0==(4294901760&e)?(i(e),t=a(e>>12&15|224),t+=s(e,6)):0==(4292870144&e)&&(t=a(e>>18&7|240),t+=s(e,12),t+=s(e,6)),t+=a(63&e|128)}function u(){if(r>=n)throw Error("Invalid byte index");var e=255&t[r];if(r++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function d(){var e,a;if(r>n)throw Error("Invalid byte index");if(r==n)return!1;if(e=255&t[r],r++,0==(128&e))return e;if(192==(224&e)){if((a=(31&e)<<6|u())>=128)return a;throw Error("Invalid continuation byte")}if(224==(240&e)){if((a=(15&e)<<12|u()<<6|u())>=2048)return i(a),a;throw Error("Invalid continuation byte")}if(240==(248&e)&&(a=(7&e)<<18|u()<<12|u()<<6|u())>=65536&&a<=1114111)return a;throw Error("Invalid UTF-8 detected")}e.version="3.0.0",e.encode=function(e){for(var t=o(e),n=t.length,r=-1,a="";++r<n;)a+=c(t[r]);return a},e.decode=function(e){t=o(e),n=t.length,r=0;for(var i,s=[];!1!==(i=d());)s.push(i);return function(e){for(var t,n=e.length,r=-1,o="";++r<n;)(t=e[r])>65535&&(o+=a((t-=65536)>>>10&1023|55296),t=56320|1023&t),o+=a(t);return o}(s)}}(t)},function(e,t,n){var r=n(22),a=n(27);e.exports=function(e){return!0===e||!1===e||a(e)&&"[object Boolean]"==r(e)}},function(e,t,n){var r=n(29);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(17).default;e.exports=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(17).default;function a(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e.exports=a=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},c=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",d=s.toStringTag||"@@toStringTag";function f(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),s=new C(r||[]);return i(o,"_invoke",{value:A(e,n,s)}),o}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h={};function m(){}function g(){}function _(){}var v={};f(v,c,(function(){return this}));var y=Object.getPrototypeOf,S=y&&y(y(O([])));S&&S!==n&&o.call(S,c)&&(v=S);var E=_.prototype=m.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function D(e,t){var n;i(this,"_invoke",{value:function(a,i){function s(){return new t((function(n,s){!function n(a,i,s,c){var u=p(e[a],e,i);if("throw"!==u.type){var d=u.arg,f=d.value;return f&&"object"==r(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,s,c)}),(function(e){n("throw",e,s,c)})):t.resolve(f).then((function(e){d.value=e,s(d)}),(function(e){return n("throw",e,s,c)}))}c(u.arg)}(a,i,n,s)}))}return n=n?n.then(s,s):s()}})}function A(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return P()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var s=I(i,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=p(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function I(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,I(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=p(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,h;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function O(e){if(e){var t=e[c];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(o.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:P}}function P(){return{value:void 0,done:!0}}return g.prototype=_,i(E,"constructor",{value:_,configurable:!0}),i(_,"constructor",{value:g,configurable:!0}),g.displayName=f(_,d,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,f(e,d,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},b(D.prototype),f(D.prototype,u,(function(){return this})),t.AsyncIterator=D,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new D(l(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(E),f(E,d,"Generator"),f(E,c,(function(){return this})),f(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(M),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;M(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return s}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,n(t,r)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(34))},function(e,t,n){var r=n(32),a=Object.prototype,o=a.hasOwnProperty,i=a.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var a=i.call(e);return r&&(t?e[s]=n:delete e[s]),a}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){var r=n(24),a=n(57),o=n(58),i=Math.max,s=Math.min;e.exports=function(e,t,n){var c,u,d,f,l,p,h=0,m=!1,g=!1,_=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var n=c,r=u;return c=u=void 0,h=t,f=e.apply(r,n)}function y(e){return h=e,l=setTimeout(E,t),m?v(e):f}function S(e){var n=e-p;return void 0===p||n>=t||n<0||g&&e-h>=d}function E(){var e=a();if(S(e))return b(e);l=setTimeout(E,function(e){var n=t-(e-p);return g?s(n,d-(e-h)):n}(e))}function b(e){return l=void 0,_&&c?v(e):(c=u=void 0,f)}function D(){var e=a(),n=S(e);if(c=arguments,u=this,p=e,n){if(void 0===l)return y(p);if(g)return l=setTimeout(E,t),v(p)}return void 0===l&&(l=setTimeout(E,t)),f}return t=o(t)||0,r(n)&&(m=!!n.leading,d=(g="maxWait"in n)?i(o(n.maxWait)||0,t):d,_="trailing"in n?!!n.trailing:_),D.cancel=function(){void 0!==l&&clearTimeout(l),h=0,c=p=u=l=void 0},D.flush=function(){return void 0===l?f:b(a())},D}},function(e,t,n){var r=n(33);e.exports=function(){return r.Date.now()}},function(e,t,n){var r=n(24),a=n(59),o=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return NaN;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var n=s.test(e);return n||c.test(e)?u(e.slice(2),n?2:8):i.test(e)?NaN:+e}},function(e,t,n){var r=n(22),a=n(27);e.exports=function(e){return"symbol"==typeof e||a(e)&&"[object Symbol]"==r(e)}},function(e,t,n){var r=n(22),a=n(63),o=n(27);e.exports=function(e){return"string"==typeof e||!a(e)&&o(e)&&"[object String]"==r(e)}},,function(e,t,n){var r=n(65).default;e.exports=r},function(e,t){var n=Array.isArray;e.exports=n},,function(e,t,n){"use strict";n.r(t);var r=n(7),a=n.n(r),o=n(3),i=n.n(o),s=n(1),c=n(13),u=n(38),d=n(40),f=n.n(d),l=n(20),p=n.n(l),h=n(37),m=n.n(h),g=n(2),_=n(60),v=n.n(_),y=n(4);function S(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b,D=Object(c.a)("sdk.sharing.process");function A(e){for(var t=[],n=0;n<e.length;n+=32768)t.push(String.fromCharCode.apply(null,e.subarray(n,n+32768)));return t.join("")}function I(){this.socket=null,this.headerArray=[],this.image=null,this.image2=null,this.pos=null,this.pos2=null}I.prototype={start:function(e){var t=this;return a()(i.a.mark((function n(){var r;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.socket){n.next=2;break}return n.abrupt("return",!0);case 2:return t.socket=new WebSocket(e),t.socket.binaryType="arraybuffer",n.prev=4,n.next=7,t.isStartSuccess();case 7:return(r=n.sent)&&t.processMessage(),n.abrupt("return",r);case 12:return n.prev=12,n.t0=n.catch(4),D("start",n.t0),n.abrupt("return",!1);case 16:case"end":return n.stop()}}),n,null,[[4,12]])})))()},close:function(){try{this.socket.close()}catch(e){console.warn(e)}finally{this.socket=null}},processMessage:function(){var e=this;this.socket.addEventListener("message",(function(t){var n=t.data;e.Sharing_Decode(n)}))},isStartSuccess:function(){var e=this;return new Promise((function(t,n){e.socket.addEventListener("open",(function(){t(!0)})),e.socket.addEventListener("close",(function(){e.socket=null,n(new Error("close"))})),e.socket.addEventListener("error",(function(t){e.socket=null,n(t)}))}))},Sharing_Decode:function(e){if(e instanceof ArrayBuffer)this.handleBinaryData(new Uint8Array(e));else if(v()(e)){var t=JSON.parse(e);if(!t)return;20226==t.evt?C({type:g.e.SHARING_PARAM_DATA_IE_CALLBACK,data:t}):C({type:g.e.SHARING_MORE_INFO_DATA_IE_CALLBACK,data:t})}},monitorLog:(b=0,function(e){try{var t=new Uint8Array(e),n=t[2],r=t[3];b++,0===n+256*r&&(D("keyframe log"),y.a.add_monitor2("SDGL")),3e3===b&&(D("patch frames reach to 3000"),b=0,y.a.add_monitor2("SDIM"))}catch(e){D.error("monitorLog",e)}}),handleBinaryData:function(e){var t=e.subarray(0,24),n=t[0],r=t[1];if(0==n)return this.socket.send(e);if("4"==n?this.image=A(e.subarray(24)):"3"==n&&(this.image2=A(e.subarray(24))),"5"==n)this.pos={x:parseInt(t[8])+256*parseInt(t[9])+256*parseInt(t[10])*256+256*parseInt(t[11])*256*256,y:parseInt(t[12])+256*parseInt(t[13])+256*parseInt(t[14])*256+256*parseInt(t[15])*256*256,width:parseInt(t[16])+256*parseInt(t[17])+256*parseInt(t[18])*256+256*parseInt(t[19])*256*256,height:parseInt(t[20])+256*parseInt(t[21])+256*parseInt(t[22])*256+256*parseInt(t[23])*256*256},C({type:g.e.SHARING_BINARY_CURSOR_DATA_AND_POS_INDICATION_TYPE,data:{image:this.image,pos:this.pos},contentType:"png"});else if("3"==n){if(this.monitorLog(e),r>128){var a=0;if(this.headerArray.length>0){var o,i=S(this.headerArray);try{for(i.s();!(o=i.n()).done;){r-128==(u=o.value).index&&a++}}catch(e){i.e(e)}finally{i.f()}}0==a&&this.headerArray.push({index:r-128,data:this.image2}),a=0}else if(r>0&&r<128){var s,c=S(this.headerArray);try{for(c.s();!(s=c.n()).done;){var u;(u=s.value).index==r&&(this.image2=u.data+this.image2)}}catch(e){c.e(e)}finally{c.f()}}this.pos2={x:parseInt(t[8])+256*parseInt(t[9])+256*parseInt(t[10])*256+256*parseInt(t[11])*256*256,y:parseInt(t[12])+256*parseInt(t[13])+256*parseInt(t[14])*256+256*parseInt(t[15])*256*256,width:parseInt(t[16])+256*parseInt(t[17])+256*parseInt(t[18])*256+256*parseInt(t[19])*256*256,height:parseInt(t[20])+256*parseInt(t[21])+256*parseInt(t[22])*256+256*parseInt(t[23])*256*256},C({type:g.e.SHARING_BINARY_CONTENT_DATA_AND_POS_INDICATION_TYPE,data:{image:this.image2,pos:this.pos2},contentType:"jpeg"})}}};var w=new I,M=[];function C(e){M.forEach((function(t){try{t.call(null,{data:e})}catch(e){}}))}var O=function(){};O.prototype={closeSocket:function(){w.close()},startSocket:function(e){return a()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.start(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},isClose:function(){return!w.socket},addEventListener:function(){var e=arguments.length>1?arguments[1]:void 0;M.push(e)}};var P=O,k=Object(c.a)("sdk.sharing"),x=function(){this.processIns=null,this.canvas=null,this.contentContext=null,this.cursorContext=null,this.sharingParams={activeNodeID:null,height:null,logicHeight:null,logicWidth:null,width:null},this.onSharingDataCallbackList=[],this.paramsBak={},this.processIns=new P,this.bindEvent(),this.DATA_CACHE_LIST=[],this.clearDataCacheListAndDrawInterval=0};x.prototype={start:function(e){this.ensureSocketExist(),this.createContext({canvas:e.canvas,cursorCanvas:e.cursorCanvas}),this.startInterval()},startInterval:function(){var e=this;clearInterval(this.clearDataCacheListAndDrawInterval),this.clearDataCacheListAndDrawInterval=setInterval((function(){for(;e.DATA_CACHE_LIST.length>0;){var t=e.DATA_CACHE_LIST.shift();e.processData(t)}}),100)},init:function(e){var t=this;return a()(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return Object.assign(t.paramsBak,{websocketUrl:e}),n.next=3,t.ensureSocketExist();case 3:return n.abrupt("return",!0);case 4:case"end":return n.stop()}}),n)})))()},ensureSocketExist:function(){var e=this;return a()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.restart();case 2:case"end":return t.stop()}}),t)})))()},restart:function(){var e=this;return a()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isSocketClosed()){t.next=4;break}return k("sharing socket closed, try restart!"),t.next=4,e.startSocket(e.paramsBak.websocketUrl);case 4:case"end":return t.stop()}}),t)})))()},isSocketClosed:function(){return this.processIns.isClose()},clear:function(){clearInterval(this.clearDataCacheListAndDrawInterval),this.DATA_CACHE_LIST=[]},createContext:function(e){this.canvas=e.canvas,this.contentContext=e.canvas.getContext("2d"),this.cursorCanvas=e.cursorCanvas,this.cursorContext=e.cursorCanvas.getContext("2d")},closeSocket:function(){this.processIns.closeSocket()},bindEvent:function(){this.onSharingBinaryDataComing(),this.onSharingParamDataComing()},onSharingParamDataComing:function(){var e=this;this.processIns.addEventListener("message",(function(t){var n=t.data;n.type===g.e.SHARING_PARAM_DATA_IE_CALLBACK?(e.sharingParams=n.data.body,e.onSharingDataCallbackList.forEach((function(e){return e.call(null,n.data,s.Wc)}))):n.type===g.e.SHARING_MORE_INFO_DATA_IE_CALLBACK&&e.onSharingDataCallbackList.forEach((function(e){return e.call(null,n.data,s.Vc)}))}))},onSharingBinaryDataComing:function(){var e=this;this.processIns.addEventListener("message",(function(t){e.DATA_CACHE_LIST.push(t)}))},processData:function(e){try{var t=e.data;t.type===g.e.SHARING_BINARY_CURSOR_DATA_AND_POS_INDICATION_TYPE&&this.drawSharingCursor(t.data),t.type===g.e.SHARING_BINARY_CONTENT_DATA_AND_POS_INDICATION_TYPE&&this.drawSharingContent(t.data)}catch(e){k.error("processData",e)}},drawSharingCursor:function(e){if(this.cursorContext){var t=new Image,n=e.pos,r=this.sharingParams,a=r.width,o=r.height,i=r.logicWidth,s=r.logicHeight,c=n.x*(a/i),u=n.y*(o/s),d=this;d.cursorContext.clearRect(0,0,1920,1080);try{d.cursorContext.clearRect(0,0,a>i?a:i,o>s?o:s)}catch(e){}t.onload=function(){d.cursorContext.drawImage(t,c,u),t=null},t.src="data:image/png;base64,"+window.btoa(e.image)}},drawSharingContent:function(e){if(this.contentContext){var t=e.pos,n=new Image,r=this;n.onload=function(){r.contentContext&&(r.contentContext.drawImage(n,t.x,t.y),n=null)},n.src="data:image/jpeg;base64,"+window.btoa(e.image)}},onSharingDataCallback:function(e){this.onSharingDataCallbackList.push(e)},startSocket:function(e){return this.processIns.startSocket(e)}};var R,N,T=x,V=n(5),L=n(0),G=Object(c.a)("sdk"),W=function(){L.a.reinit(),this.remoteControl=null,this.sharingView=null};W.buildNumber=3622,W.version="15.0.3622",W.prototype={JsMediaSDK_PreLoad:function(e,t){this.setPropsBeforeInit({callback:t}),this._preloadMeetingParam=e;try{V.Start_Monitor(),y.a.add_monitor("JSPLD")}catch(e){console.error("monitor",e)}},setCallback:function(e){if(!m()(e))throw new Error("callback must be function");L.a._Notify_APPUI=e},setRWGAgent:function(e){L.a.rwgAgent=e},initVideoEncode:function(){return a()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},initVideoDecode:function(){return a()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},initAudioEncode:function(){return a()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},initAudioDecode:function(){return a()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},initSharingDecode:function(e){var t=this;return a()(i.a.mark((function n(){var r;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return G("initSharingDecode",e),n.prev=1,t.sharingView=new T,t.sharingView.onSharingDataCallback((function(e,n){G("data",e),t.sendMessageByCallback(n,e)})),n.next=6,t.sharingView.init(e);case 6:return r=n.sent,t.sendMessageByCallback(r?s.Rb:s.Ob),n.abrupt("return",r);case 11:return n.prev=11,n.t0=n.catch(1),t.sendMessageByCallback(s.Ob),n.abrupt("return",!1);case 15:case"end":return n.stop()}}),n,null,[[1,11]])})))()},setPropsBeforeInit:function(e){e.callback&&this.setCallback(e.callback)},sendMessageByCallback:function(){try{L.a.Notify_APPUI_SAFE.apply(L.a,arguments)}catch(e){}},Notify_MeidaSDK:(N=a()(i.a.mark((function e(t,n){var r,a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:G(t,n),y.a.add_monitor("B"+t),e.t0=t,e.next=e.t0===s.cd?5:e.t0===s.P?15:e.t0===s.Qd?17:e.t0===s.Ac?19:e.t0===s.fd?21:e.t0===s.rd?24:27;break;case 5:return G("sdk start remote control 1"),r=new u.a(Object.assign({dom:document},n)),this.remoteControl=r,r.setDstWidthAndHeight(n.width,n.height),r.setSrcWidthAndHeight(n.width,n.height),r.setSrcScaleWidthAndHeight(n.scaleWidth,n.scaleHeight),r.setSrcOffsetXY(n.srcOffsetX,n.srcOffsetY),r.setRemoteOS(n.os),e.abrupt("return",r.start().then((function(e){return a.sendMessageByCallback(e?s.ed:s.dd),e&&(r.onPasteTextLengthOverflow((function(){this.sendMessageByCallback(s.yc)})),r.onReturnCopiedText((function(e){G(e),a.sendMessageByCallback(s.xc,e)}))),e})).catch((function(e){return G(e),y.a.add_monitor(["RMCT",e.message,"F"].join("")),a.sendMessageByCallback(s.dd),Promise.reject(e)})));case 15:return e.abrupt("return",this.remoteControl.destroy().then((function(e){return a.sendMessageByCallback(e?s.R:s.Q),e})));case 17:return this.remoteControl&&(n.width&&n.height&&(this.remoteControl.setDstWidthAndHeight(n.width,n.height),this.remoteControl.setSrcWidthAndHeightAndSendPDU(n.width,n.height)),n.scaleWidth&&n.scaleHeight&&this.remoteControl.setSrcScaleWidthAndHeight(n.scaleWidth,n.scaleHeight),(p()(n.srcOffsetX)||p()(n.srcOffsetY))&&this.remoteControl.setSrcOffsetXYAndSendPDU(n.srcOffsetX,n.srcOffsetY),f()(n.isControllerNow)&&this.remoteControl.setIsControlerNow(n.isControllerNow),p()(n.os)&&this.remoteControl.setRemoteOS(n.os)),e.abrupt("break",27);case 19:return this.remoteControl&&this.remoteControl.sendPostionPDU(),e.abrupt("break",27);case 21:return G("START_SHARING",n),this.sharingView.start(n),e.abrupt("break",27);case 24:return G("STOP_SHARING"),this.sharingView&&this.sharingView.clear(),e.abrupt("break",27);case 27:case"end":return e.stop()}}),e,this)}))),function(e,t){return N.apply(this,arguments)}),JsMediaSDK_UnInit:(R=a()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sharingView.close();case 2:L.a._Notify_APPUI=null,V.Stop_Monitor();case 4:case"end":return e.stop()}}),e,this)}))),function(){return R.apply(this,arguments)}),EndMedia:function(){try{this.sharingView&&this.sharingView.closeSocket(),this.remoteControl&&this.remoteControl.destroy()}catch(e){G("ENDMEDIA",e)}},destroy:function(){var e=this;return a()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:G("destroy"),e.EndMedia();case 2:case"end":return t.stop()}}),t)})))()}};t.default=W}])}));
//# sourceMappingURL=https://d1cdksi819e9z7.cloudfront.net/sourcemap/js_media_ie.min.js-b425bd876c30ba223e93.map
(()=>{var e={6040:(e,t,r)=>{"use strict";var i=r(8251);e.exports=i},7264:(e,t,r)=>{"use strict";var i=r(4139);r(768),r(8549),r(7152),r(1372),e.exports=i},9692:(e,t,r)=>{"use strict";var i=r(7045);e.exports=i},5663:(e,t,r)=>{"use strict";var i=r(70);e.exports=i},1926:(e,t,r)=>{"use strict";r(6750);var i=r(2046).Object,s=e.exports=function(e,t,r){return i.defineProperty(e,t,r)};i.defineProperty.sham&&(s.sham=!0)},3842:(e,t,r)=>{"use strict";r(8545),r(3643),r(4452),r(3997),r(5084),r(2596),r(5721),r(4954),r(4123),r(3377),r(2230),r(5344),r(1660),r(4610),r(3669),r(4810),r(3325),r(7024),r(8172),r(5205);var i=r(2046);e.exports=i.Symbol},1730:(e,t,r)=>{"use strict";r(9363),r(3643),r(7057),r(4954);var i=r(560);e.exports=i.f("iterator")},1661:(e,t,r)=>{"use strict";r(8537),r(3669);var i=r(560);e.exports=i.f("toPrimitive")},4997:(e,t,r)=>{"use strict";var i=r(6040);e.exports=i},2321:(e,t,r)=>{"use strict";var i=r(7264);r(3939),r(1785),r(1697),r(4664),r(3422),r(36),r(8703),r(6878),r(9671),r(359),e.exports=i},2231:(e,t,r)=>{"use strict";var i=r(9692);e.exports=i},9280:(e,t,r)=>{"use strict";var i=r(5663);e.exports=i},2159:(e,t,r)=>{"use strict";var i=r(2250),s=r(4640),n=TypeError;e.exports=function(e){if(i(e))return e;throw new n(s(e)+" is not a function")}},43:(e,t,r)=>{"use strict";var i=r(4018),s=String,n=TypeError;e.exports=function(e){if(i(e))return e;throw new n("Can't set "+s(e)+" as a prototype")}},2156:e=>{"use strict";e.exports=function(){}},6624:(e,t,r)=>{"use strict";var i=r(6285),s=String,n=TypeError;e.exports=function(e){if(i(e))return e;throw new n(s(e)+" is not an object")}},4436:(e,t,r)=>{"use strict";var i=r(7374),s=r(4849),n=r(575),o=function(e){return function(t,r,o){var a=i(t),c=n(a);if(0===c)return!e&&-1;var h,u=s(o,c);if(e&&r!=r){for(;c>u;)if((h=a[u++])!=h)return!0}else for(;c>u;u++)if((e||u in a)&&a[u]===r)return e||u||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},726:(e,t,r)=>{"use strict";var i=r(8311),s=r(1907),n=r(6946),o=r(9298),a=r(575),c=r(6968),h=s([].push),u=function(e){var t=1===e,r=2===e,s=3===e,u=4===e,l=6===e,d=7===e,f=5===e||l;return function(p,g,v,_){for(var m,y,w=o(p),S=n(w),x=a(S),b=i(g,v),R=0,P=_||c,O=t?P(p,x):r||d?P(p,0):void 0;x>R;R++)if((f||R in S)&&(y=b(m=S[R],R,w),e))if(t)O[R]=y;else if(y)switch(e){case 3:return!0;case 5:return m;case 6:return R;case 2:h(O,m)}else switch(e){case 4:return!1;case 7:h(O,m)}return l?-1:s||u?u:O}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},7171:(e,t,r)=>{"use strict";var i=r(8828),s=r(6264),n=r(798),o=s("species");e.exports=function(e){return n>=51||!i((function(){var t=[];return(t.constructor={})[o]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},3427:(e,t,r)=>{"use strict";var i=r(1907);e.exports=i([].slice)},4010:(e,t,r)=>{"use strict";var i=r(1793),s=r(5468),n=r(6285),o=r(6264)("species"),a=Array;e.exports=function(e){var t;return i(e)&&(t=e.constructor,(s(t)&&(t===a||i(t.prototype))||n(t)&&null===(t=t[o]))&&(t=void 0)),void 0===t?a:t}},6968:(e,t,r)=>{"use strict";var i=r(4010);e.exports=function(e,t){return new(i(e))(0===t?0:t)}},5807:(e,t,r)=>{"use strict";var i=r(1907),s=i({}.toString),n=i("".slice);e.exports=function(e){return n(s(e),8,-1)}},3948:(e,t,r)=>{"use strict";var i=r(2623),s=r(2250),n=r(5807),o=r(6264)("toStringTag"),a=Object,c="Arguments"===n(function(){return arguments}());e.exports=i?n:function(e){var t,r,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=a(e),o))?r:c?n(t):"Object"===(i=n(t))&&s(t.callee)?"Arguments":i}},7382:(e,t,r)=>{"use strict";var i=r(8828);e.exports=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},9550:e=>{"use strict";e.exports=function(e,t){return{value:e,done:t}}},1626:(e,t,r)=>{"use strict";var i=r(9447),s=r(4284),n=r(5817);e.exports=i?function(e,t,r){return s.f(e,t,n(1,r))}:function(e,t,r){return e[t]=r,e}},5817:e=>{"use strict";e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},5543:(e,t,r)=>{"use strict";var i=r(9447),s=r(4284),n=r(5817);e.exports=function(e,t,r){i?s.f(e,t,n(0,r)):e[t]=r}},9251:(e,t,r)=>{"use strict";var i=r(4284);e.exports=function(e,t,r){return i.f(e,t,r)}},8055:(e,t,r)=>{"use strict";var i=r(1626);e.exports=function(e,t,r,s){return s&&s.enumerable?e[t]=r:i(e,t,r),e}},2532:(e,t,r)=>{"use strict";var i=r(5951),s=Object.defineProperty;e.exports=function(e,t){try{s(i,e,{value:t,configurable:!0,writable:!0})}catch(r){i[e]=t}return t}},9447:(e,t,r)=>{"use strict";var i=r(8828);e.exports=!i((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},9552:(e,t,r)=>{"use strict";var i=r(5951),s=r(6285),n=i.document,o=s(n)&&s(n.createElement);e.exports=function(e){return o?n.createElement(e):{}}},8024:e=>{"use strict";var t=TypeError;e.exports=function(e){if(e>9007199254740991)throw t("Maximum allowed index exceeded");return e}},9287:e=>{"use strict";e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},376:e=>{"use strict";e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},6794:(e,t,r)=>{"use strict";var i=r(5951).navigator,s=i&&i.userAgent;e.exports=s?String(s):""},798:(e,t,r)=>{"use strict";var i,s,n=r(5951),o=r(6794),a=n.process,c=n.Deno,h=a&&a.versions||c&&c.version,u=h&&h.v8;u&&(s=(i=u.split("."))[0]>0&&i[0]<4?1:+(i[0]+i[1])),!s&&o&&(!(i=o.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=o.match(/Chrome\/(\d+)/))&&(s=+i[1]),e.exports=s},1091:(e,t,r)=>{"use strict";var i=r(5951),s=r(6024),n=r(2361),o=r(2250),a=r(3846).f,c=r(7463),h=r(2046),u=r(8311),l=r(1626),d=r(9724);r(6128);var f=function(e){var t=function(r,i,n){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(r);case 2:return new e(r,i)}return new e(r,i,n)}return s(e,this,arguments)};return t.prototype=e.prototype,t};e.exports=function(e,t){var r,s,p,g,v,_,m,y,w,S=e.target,x=e.global,b=e.stat,R=e.proto,P=x?i:b?i[S]:i[S]&&i[S].prototype,O=x?h:h[S]||l(h,S,{})[S],M=O.prototype;for(g in t)s=!(r=c(x?g:S+(b?".":"#")+g,e.forced))&&P&&d(P,g),_=O[g],s&&(m=e.dontCallGetSet?(w=a(P,g))&&w.value:P[g]),v=s&&m?m:t[g],(r||R||typeof _!=typeof v)&&(y=e.bind&&s?u(v,i):e.wrap&&s?f(v):R&&o(v)?n(v):v,(e.sham||v&&v.sham||_&&_.sham)&&l(y,"sham",!0),l(O,g,y),R&&(d(h,p=S+"Prototype")||l(h,p,{}),l(h[p],g,v),e.real&&M&&(r||!M[g])&&l(M,g,v)))}},8828:e=>{"use strict";e.exports=function(e){try{return!!e()}catch(e){return!0}}},6024:(e,t,r)=>{"use strict";var i=r(1505),s=Function.prototype,n=s.apply,o=s.call;e.exports="object"==typeof Reflect&&Reflect.apply||(i?o.bind(n):function(){return o.apply(n,arguments)})},8311:(e,t,r)=>{"use strict";var i=r(2361),s=r(2159),n=r(1505),o=i(i.bind);e.exports=function(e,t){return s(e),void 0===t?e:n?o(e,t):function(){return e.apply(t,arguments)}}},1505:(e,t,r)=>{"use strict";var i=r(8828);e.exports=!i((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},3930:(e,t,r)=>{"use strict";var i=r(1505),s=Function.prototype.call;e.exports=i?s.bind(s):function(){return s.apply(s,arguments)}},6833:(e,t,r)=>{"use strict";var i=r(9447),s=r(9724),n=Function.prototype,o=i&&Object.getOwnPropertyDescriptor,a=s(n,"name"),c=a&&"something"===function(){}.name,h=a&&(!i||i&&o(n,"name").configurable);e.exports={EXISTS:a,PROPER:c,CONFIGURABLE:h}},1871:(e,t,r)=>{"use strict";var i=r(1907),s=r(2159);e.exports=function(e,t,r){try{return i(s(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(e){}}},2361:(e,t,r)=>{"use strict";var i=r(5807),s=r(1907);e.exports=function(e){if("Function"===i(e))return s(e)}},1907:(e,t,r)=>{"use strict";var i=r(1505),s=Function.prototype,n=s.call,o=i&&s.bind.bind(n,n);e.exports=i?o:function(e){return function(){return n.apply(e,arguments)}}},5582:(e,t,r)=>{"use strict";var i=r(2046),s=r(5951),n=r(2250),o=function(e){return n(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?o(i[e])||o(s[e]):i[e]&&i[e][t]||s[e]&&s[e][t]}},6656:(e,t,r)=>{"use strict";var i=r(1907),s=r(1793),n=r(2250),o=r(5807),a=r(160),c=i([].push);e.exports=function(e){if(n(e))return e;if(s(e)){for(var t=e.length,r=[],i=0;i<t;i++){var h=e[i];"string"==typeof h?c(r,h):"number"!=typeof h&&"Number"!==o(h)&&"String"!==o(h)||c(r,a(h))}var u=r.length,l=!0;return function(e,t){if(l)return l=!1,t;if(s(this))return t;for(var i=0;i<u;i++)if(r[i]===e)return t}}}},9367:(e,t,r)=>{"use strict";var i=r(2159),s=r(7136);e.exports=function(e,t){var r=e[t];return s(r)?void 0:i(r)}},5951:function(e,t,r){"use strict";var i=function(e){return e&&e.Math===Math&&e};e.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof r.g&&r.g)||i("object"==typeof this&&this)||function(){return this}()||Function("return this")()},9724:(e,t,r)=>{"use strict";var i=r(1907),s=r(9298),n=i({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return n(s(e),t)}},8530:e=>{"use strict";e.exports={}},2416:(e,t,r)=>{"use strict";var i=r(5582);e.exports=i("document","documentElement")},3648:(e,t,r)=>{"use strict";var i=r(9447),s=r(8828),n=r(9552);e.exports=!i&&!s((function(){return 7!==Object.defineProperty(n("div"),"a",{get:function(){return 7}}).a}))},6946:(e,t,r)=>{"use strict";var i=r(1907),s=r(8828),n=r(5807),o=Object,a=i("".split);e.exports=s((function(){return!o("z").propertyIsEnumerable(0)}))?function(e){return"String"===n(e)?a(e,""):o(e)}:o},2647:(e,t,r)=>{"use strict";var i=r(1907),s=r(2250),n=r(6128),o=i(Function.toString);s(n.inspectSource)||(n.inspectSource=function(e){return o(e)}),e.exports=n.inspectSource},4932:(e,t,r)=>{"use strict";var i,s,n,o=r(551),a=r(5951),c=r(6285),h=r(1626),u=r(9724),l=r(6128),d=r(2522),f=r(8530),p="Object already initialized",g=a.TypeError,v=a.WeakMap;if(o||l.state){var _=l.state||(l.state=new v);_.get=_.get,_.has=_.has,_.set=_.set,i=function(e,t){if(_.has(e))throw new g(p);return t.facade=e,_.set(e,t),t},s=function(e){return _.get(e)||{}},n=function(e){return _.has(e)}}else{var m=d("state");f[m]=!0,i=function(e,t){if(u(e,m))throw new g(p);return t.facade=e,h(e,m,t),t},s=function(e){return u(e,m)?e[m]:{}},n=function(e){return u(e,m)}}e.exports={set:i,get:s,has:n,enforce:function(e){return n(e)?s(e):i(e,{})},getterFor:function(e){return function(t){var r;if(!c(t)||(r=s(t)).type!==e)throw new g("Incompatible receiver, "+e+" required");return r}}}},1793:(e,t,r)=>{"use strict";var i=r(5807);e.exports=Array.isArray||function(e){return"Array"===i(e)}},2250:e=>{"use strict";var t="object"==typeof document&&document.all;e.exports=void 0===t&&void 0!==t?function(e){return"function"==typeof e||e===t}:function(e){return"function"==typeof e}},5468:(e,t,r)=>{"use strict";var i=r(1907),s=r(8828),n=r(2250),o=r(3948),a=r(5582),c=r(2647),h=function(){},u=a("Reflect","construct"),l=/^\s*(?:class|function)\b/,d=i(l.exec),f=!l.test(h),p=function(e){if(!n(e))return!1;try{return u(h,[],e),!0}catch(e){return!1}},g=function(e){if(!n(e))return!1;switch(o(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!d(l,c(e))}catch(e){return!0}};g.sham=!0,e.exports=!u||s((function(){var e;return p(p.call)||!p(Object)||!p((function(){e=!0}))||e}))?g:p},7463:(e,t,r)=>{"use strict";var i=r(8828),s=r(2250),n=/#|\.prototype\./,o=function(e,t){var r=c[a(e)];return r===u||r!==h&&(s(t)?i(t):!!t)},a=o.normalize=function(e){return String(e).replace(n,".").toLowerCase()},c=o.data={},h=o.NATIVE="N",u=o.POLYFILL="P";e.exports=o},7136:e=>{"use strict";e.exports=function(e){return null==e}},6285:(e,t,r)=>{"use strict";var i=r(2250);e.exports=function(e){return"object"==typeof e?null!==e:i(e)}},4018:(e,t,r)=>{"use strict";var i=r(6285);e.exports=function(e){return i(e)||null===e}},7376:e=>{"use strict";e.exports=!0},5594:(e,t,r)=>{"use strict";var i=r(5582),s=r(2250),n=r(8280),o=r(1175),a=Object;e.exports=o?function(e){return"symbol"==typeof e}:function(e){var t=i("Symbol");return s(t)&&n(t.prototype,a(e))}},7181:(e,t,r)=>{"use strict";var i=r(5116).IteratorPrototype,s=r(8075),n=r(5817),o=r(4840),a=r(3742),c=function(){return this};e.exports=function(e,t,r,h){var u=t+" Iterator";return e.prototype=s(i,{next:n(+!h,r)}),o(e,u,!1,!0),a[u]=c,e}},183:(e,t,r)=>{"use strict";var i=r(1091),s=r(3930),n=r(7376),o=r(6833),a=r(2250),c=r(7181),h=r(5972),u=r(9192),l=r(4840),d=r(1626),f=r(8055),p=r(6264),g=r(3742),v=r(5116),_=o.PROPER,m=o.CONFIGURABLE,y=v.IteratorPrototype,w=v.BUGGY_SAFARI_ITERATORS,S=p("iterator"),x="keys",b="values",R="entries",P=function(){return this};e.exports=function(e,t,r,o,p,v,O){c(r,t,o);var M,T,k,C=function(e){if(e===p&&D)return D;if(!w&&e&&e in W)return W[e];switch(e){case x:case b:case R:return function(){return new r(this,e)}}return function(){return new r(this)}},I=t+" Iterator",E=!1,W=e.prototype,F=W[S]||W["@@iterator"]||p&&W[p],D=!w&&F||C(p),A="Array"===t&&W.entries||F;if(A&&(M=h(A.call(new e)))!==Object.prototype&&M.next&&(n||h(M)===y||(u?u(M,y):a(M[S])||f(M,S,P)),l(M,I,!0,!0),n&&(g[I]=P)),_&&p===b&&F&&F.name!==b&&(!n&&m?d(W,"name",b):(E=!0,D=function(){return s(F,this)})),p)if(T={values:C(b),keys:v?D:C(x),entries:C(R)},O)for(k in T)(w||E||!(k in W))&&f(W,k,T[k]);else i({target:t,proto:!0,forced:w||E},T);return n&&!O||W[S]===D||f(W,S,D,{name:p}),g[t]=D,T}},5116:(e,t,r)=>{"use strict";var i,s,n,o=r(8828),a=r(2250),c=r(6285),h=r(8075),u=r(5972),l=r(8055),d=r(6264),f=r(7376),p=d("iterator"),g=!1;[].keys&&("next"in(n=[].keys())?(s=u(u(n)))!==Object.prototype&&(i=s):g=!0),!c(i)||o((function(){var e={};return i[p].call(e)!==e}))?i={}:f&&(i=h(i)),a(i[p])||l(i,p,(function(){return this})),e.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:g}},3742:e=>{"use strict";e.exports={}},575:(e,t,r)=>{"use strict";var i=r(3121);e.exports=function(e){return i(e.length)}},1176:e=>{"use strict";var t=Math.ceil,r=Math.floor;e.exports=Math.trunc||function(e){var i=+e;return(i>0?r:t)(i)}},8075:(e,t,r)=>{"use strict";var i,s=r(6624),n=r(2220),o=r(376),a=r(8530),c=r(2416),h=r(9552),u=r(2522),l="prototype",d="script",f=u("IE_PROTO"),p=function(){},g=function(e){return"<"+d+">"+e+"</"+d+">"},v=function(e){e.write(g("")),e.close();var t=e.parentWindow.Object;return e=null,t},_=function(){try{i=new ActiveXObject("htmlfile")}catch(e){}var e,t,r;_="undefined"!=typeof document?document.domain&&i?v(i):(t=h("iframe"),r="java"+d+":",t.style.display="none",c.appendChild(t),t.src=String(r),(e=t.contentWindow.document).open(),e.write(g("document.F=Object")),e.close(),e.F):v(i);for(var s=o.length;s--;)delete _[l][o[s]];return _()};a[f]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(p[l]=s(e),r=new p,p[l]=null,r[f]=e):r=_(),void 0===t?r:n.f(r,t)}},2220:(e,t,r)=>{"use strict";var i=r(9447),s=r(8661),n=r(4284),o=r(6624),a=r(7374),c=r(2875);t.f=i&&!s?Object.defineProperties:function(e,t){o(e);for(var r,i=a(t),s=c(t),h=s.length,u=0;h>u;)n.f(e,r=s[u++],i[r]);return e}},4284:(e,t,r)=>{"use strict";var i=r(9447),s=r(3648),n=r(8661),o=r(6624),a=r(470),c=TypeError,h=Object.defineProperty,u=Object.getOwnPropertyDescriptor,l="enumerable",d="configurable",f="writable";t.f=i?n?function(e,t,r){if(o(e),t=a(t),o(r),"function"==typeof e&&"prototype"===t&&"value"in r&&f in r&&!r[f]){var i=u(e,t);i&&i[f]&&(e[t]=r.value,r={configurable:d in r?r[d]:i[d],enumerable:l in r?r[l]:i[l],writable:!1})}return h(e,t,r)}:h:function(e,t,r){if(o(e),t=a(t),o(r),s)try{return h(e,t,r)}catch(e){}if("get"in r||"set"in r)throw new c("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},3846:(e,t,r)=>{"use strict";var i=r(9447),s=r(3930),n=r(2574),o=r(5817),a=r(7374),c=r(470),h=r(9724),u=r(3648),l=Object.getOwnPropertyDescriptor;t.f=i?l:function(e,t){if(e=a(e),t=c(t),u)try{return l(e,t)}catch(e){}if(h(e,t))return o(!s(n.f,e,t),e[t])}},5407:(e,t,r)=>{"use strict";var i=r(5807),s=r(7374),n=r(4443).f,o=r(3427),a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"Window"===i(e)?function(e){try{return n(e)}catch(e){return o(a)}}(e):n(s(e))}},4443:(e,t,r)=>{"use strict";var i=r(3045),s=r(376).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,s)}},7170:(e,t)=>{"use strict";t.f=Object.getOwnPropertySymbols},5972:(e,t,r)=>{"use strict";var i=r(9724),s=r(2250),n=r(9298),o=r(2522),a=r(7382),c=o("IE_PROTO"),h=Object,u=h.prototype;e.exports=a?h.getPrototypeOf:function(e){var t=n(e);if(i(t,c))return t[c];var r=t.constructor;return s(r)&&t instanceof r?r.prototype:t instanceof h?u:null}},8280:(e,t,r)=>{"use strict";var i=r(1907);e.exports=i({}.isPrototypeOf)},3045:(e,t,r)=>{"use strict";var i=r(1907),s=r(9724),n=r(7374),o=r(4436).indexOf,a=r(8530),c=i([].push);e.exports=function(e,t){var r,i=n(e),h=0,u=[];for(r in i)!s(a,r)&&s(i,r)&&c(u,r);for(;t.length>h;)s(i,r=t[h++])&&(~o(u,r)||c(u,r));return u}},2875:(e,t,r)=>{"use strict";var i=r(3045),s=r(376);e.exports=Object.keys||function(e){return i(e,s)}},2574:(e,t)=>{"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,s=i&&!r.call({1:2},1);t.f=s?function(e){var t=i(this,e);return!!t&&t.enumerable}:r},9192:(e,t,r)=>{"use strict";var i=r(1871),s=r(6285),n=r(4239),o=r(43);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=i(Object.prototype,"__proto__","set"))(r,[]),t=r instanceof Array}catch(e){}return function(r,i){return n(r),o(i),s(r)?(t?e(r,i):r.__proto__=i,r):r}}():void 0)},4878:(e,t,r)=>{"use strict";var i=r(2623),s=r(3948);e.exports=i?{}.toString:function(){return"[object "+s(this)+"]"}},581:(e,t,r)=>{"use strict";var i=r(3930),s=r(2250),n=r(6285),o=TypeError;e.exports=function(e,t){var r,a;if("string"===t&&s(r=e.toString)&&!n(a=i(r,e)))return a;if(s(r=e.valueOf)&&!n(a=i(r,e)))return a;if("string"!==t&&s(r=e.toString)&&!n(a=i(r,e)))return a;throw new o("Can't convert object to primitive value")}},2046:e=>{"use strict";e.exports={}},4239:(e,t,r)=>{"use strict";var i=r(7136),s=TypeError;e.exports=function(e){if(i(e))throw new s("Can't call method on "+e);return e}},4840:(e,t,r)=>{"use strict";var i=r(2623),s=r(4284).f,n=r(1626),o=r(9724),a=r(4878),c=r(6264)("toStringTag");e.exports=function(e,t,r,h){var u=r?e:e&&e.prototype;u&&(o(u,c)||s(u,c,{configurable:!0,value:t}),h&&!i&&n(u,"toString",a))}},2522:(e,t,r)=>{"use strict";var i=r(5816),s=r(6499),n=i("keys");e.exports=function(e){return n[e]||(n[e]=s(e))}},6128:(e,t,r)=>{"use strict";var i=r(7376),s=r(5951),n=r(2532),o="__core-js_shared__",a=e.exports=s[o]||n(o,{});(a.versions||(a.versions=[])).push({version:"3.39.0",mode:i?"pure":"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.39.0/LICENSE",source:"https://github.com/zloirock/core-js"})},5816:(e,t,r)=>{"use strict";var i=r(6128);e.exports=function(e,t){return i[e]||(i[e]=t||{})}},1470:(e,t,r)=>{"use strict";var i=r(1907),s=r(5482),n=r(160),o=r(4239),a=i("".charAt),c=i("".charCodeAt),h=i("".slice),u=function(e){return function(t,r){var i,u,l=n(o(t)),d=s(r),f=l.length;return d<0||d>=f?e?"":void 0:(i=c(l,d))<55296||i>56319||d+1===f||(u=c(l,d+1))<56320||u>57343?e?a(l,d):i:e?h(l,d,d+2):u-56320+(i-55296<<10)+65536}};e.exports={codeAt:u(!1),charAt:u(!0)}},9846:(e,t,r)=>{"use strict";var i=r(798),s=r(8828),n=r(5951).String;e.exports=!!Object.getOwnPropertySymbols&&!s((function(){var e=Symbol("symbol detection");return!n(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&i&&i<41}))},3467:(e,t,r)=>{"use strict";var i=r(3930),s=r(5582),n=r(6264),o=r(8055);e.exports=function(){var e=s("Symbol"),t=e&&e.prototype,r=t&&t.valueOf,a=n("toPrimitive");t&&!t[a]&&o(t,a,(function(e){return i(r,this)}),{arity:1})}},2595:(e,t,r)=>{"use strict";var i=r(5582),s=r(1907),n=i("Symbol"),o=n.keyFor,a=s(n.prototype.valueOf);e.exports=n.isRegisteredSymbol||function(e){try{return void 0!==o(a(e))}catch(e){return!1}}},9197:(e,t,r)=>{"use strict";for(var i=r(5816),s=r(5582),n=r(1907),o=r(5594),a=r(6264),c=s("Symbol"),h=c.isWellKnownSymbol,u=s("Object","getOwnPropertyNames"),l=n(c.prototype.valueOf),d=i("wks"),f=0,p=u(c),g=p.length;f<g;f++)try{var v=p[f];o(c[v])&&a(v)}catch(e){}e.exports=function(e){if(h&&h(e))return!0;try{for(var t=l(e),r=0,i=u(d),s=i.length;r<s;r++)if(d[i[r]]==t)return!0}catch(e){}return!1}},4411:(e,t,r)=>{"use strict";var i=r(9846);e.exports=i&&!!Symbol.for&&!!Symbol.keyFor},4849:(e,t,r)=>{"use strict";var i=r(5482),s=Math.max,n=Math.min;e.exports=function(e,t){var r=i(e);return r<0?s(r+t,0):n(r,t)}},7374:(e,t,r)=>{"use strict";var i=r(6946),s=r(4239);e.exports=function(e){return i(s(e))}},5482:(e,t,r)=>{"use strict";var i=r(1176);e.exports=function(e){var t=+e;return t!=t||0===t?0:i(t)}},3121:(e,t,r)=>{"use strict";var i=r(5482),s=Math.min;e.exports=function(e){var t=i(e);return t>0?s(t,9007199254740991):0}},9298:(e,t,r)=>{"use strict";var i=r(4239),s=Object;e.exports=function(e){return s(i(e))}},6028:(e,t,r)=>{"use strict";var i=r(3930),s=r(6285),n=r(5594),o=r(9367),a=r(581),c=r(6264),h=TypeError,u=c("toPrimitive");e.exports=function(e,t){if(!s(e)||n(e))return e;var r,c=o(e,u);if(c){if(void 0===t&&(t="default"),r=i(c,e,t),!s(r)||n(r))return r;throw new h("Can't convert object to primitive value")}return void 0===t&&(t="number"),a(e,t)}},470:(e,t,r)=>{"use strict";var i=r(6028),s=r(5594);e.exports=function(e){var t=i(e,"string");return s(t)?t:t+""}},2623:(e,t,r)=>{"use strict";var i={};i[r(6264)("toStringTag")]="z",e.exports="[object z]"===String(i)},160:(e,t,r)=>{"use strict";var i=r(3948),s=String;e.exports=function(e){if("Symbol"===i(e))throw new TypeError("Cannot convert a Symbol value to a string");return s(e)}},4640:e=>{"use strict";var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},6499:(e,t,r)=>{"use strict";var i=r(1907),s=0,n=Math.random(),o=i(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+o(++s+n,36)}},1175:(e,t,r)=>{"use strict";var i=r(9846);e.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},8661:(e,t,r)=>{"use strict";var i=r(9447),s=r(8828);e.exports=i&&s((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},551:(e,t,r)=>{"use strict";var i=r(5951),s=r(2250),n=i.WeakMap;e.exports=s(n)&&/native code/.test(String(n))},366:(e,t,r)=>{"use strict";var i=r(2046),s=r(9724),n=r(560),o=r(4284).f;e.exports=function(e){var t=i.Symbol||(i.Symbol={});s(t,e)||o(t,e,{value:n.f(e)})}},560:(e,t,r)=>{"use strict";var i=r(6264);t.f=i},6264:(e,t,r)=>{"use strict";var i=r(5951),s=r(5816),n=r(9724),o=r(6499),a=r(9846),c=r(1175),h=i.Symbol,u=s("wks"),l=c?h.for||h:h&&h.withoutSetter||o;e.exports=function(e){return n(u,e)||(u[e]=a&&n(h,e)?h[e]:l("Symbol."+e)),u[e]}},8545:(e,t,r)=>{"use strict";var i=r(1091),s=r(8828),n=r(1793),o=r(6285),a=r(9298),c=r(575),h=r(8024),u=r(5543),l=r(6968),d=r(7171),f=r(6264),p=r(798),g=f("isConcatSpreadable"),v=p>=51||!s((function(){var e=[];return e[g]=!1,e.concat()[0]!==e})),_=function(e){if(!o(e))return!1;var t=e[g];return void 0!==t?!!t:n(e)};i({target:"Array",proto:!0,arity:1,forced:!v||!d("concat")},{concat:function(e){var t,r,i,s,n,o=a(this),d=l(o,0),f=0;for(t=-1,i=arguments.length;t<i;t++)if(_(n=-1===t?o:arguments[t]))for(s=c(n),h(f+s),r=0;r<s;r++,f++)r in n&&u(d,f,n[r]);else h(f+1),u(d,f++,n);return d.length=f,d}})},9363:(e,t,r)=>{"use strict";var i=r(7374),s=r(2156),n=r(3742),o=r(4932),a=r(4284).f,c=r(183),h=r(9550),u=r(7376),l=r(9447),d="Array Iterator",f=o.set,p=o.getterFor(d);e.exports=c(Array,"Array",(function(e,t){f(this,{type:d,target:i(e),index:0,kind:t})}),(function(){var e=p(this),t=e.target,r=e.index++;if(!t||r>=t.length)return e.target=null,h(void 0,!0);switch(e.kind){case"keys":return h(r,!1);case"values":return h(t[r],!1)}return h([r,t[r]],!1)}),"values");var g=n.Arguments=n.Array;if(s("keys"),s("values"),s("entries"),!u&&l&&"values"!==g.name)try{a(g,"name",{value:"values"})}catch(e){}},8537:()=>{},9721:(e,t,r)=>{"use strict";var i=r(1091),s=r(5582),n=r(6024),o=r(3930),a=r(1907),c=r(8828),h=r(2250),u=r(5594),l=r(3427),d=r(6656),f=r(9846),p=String,g=s("JSON","stringify"),v=a(/./.exec),_=a("".charAt),m=a("".charCodeAt),y=a("".replace),w=a(1..toString),S=/[\uD800-\uDFFF]/g,x=/^[\uD800-\uDBFF]$/,b=/^[\uDC00-\uDFFF]$/,R=!f||c((function(){var e=s("Symbol")("stringify detection");return"[null]"!==g([e])||"{}"!==g({a:e})||"{}"!==g(Object(e))})),P=c((function(){return'"\\udf06\\ud834"'!==g("\udf06\ud834")||'"\\udead"'!==g("\udead")})),O=function(e,t){var r=l(arguments),i=d(t);if(h(i)||void 0!==e&&!u(e))return r[1]=function(e,t){if(h(i)&&(t=o(i,this,p(e),t)),!u(t))return t},n(g,null,r)},M=function(e,t,r){var i=_(r,t-1),s=_(r,t+1);return v(x,e)&&!v(b,s)||v(b,e)&&!v(x,i)?"\\u"+w(m(e,0),16):e};g&&i({target:"JSON",stat:!0,arity:3,forced:R||P},{stringify:function(e,t,r){var i=l(arguments),s=n(R?O:g,null,i);return P&&"string"==typeof s?y(s,S,M):s}})},7024:(e,t,r)=>{"use strict";var i=r(5951);r(4840)(i.JSON,"JSON",!0)},8172:()=>{},6750:(e,t,r)=>{"use strict";var i=r(1091),s=r(9447),n=r(4284).f;i({target:"Object",stat:!0,forced:Object.defineProperty!==n,sham:!s},{defineProperty:n})},5264:(e,t,r)=>{"use strict";var i=r(1091),s=r(9846),n=r(8828),o=r(7170),a=r(9298);i({target:"Object",stat:!0,forced:!s||n((function(){o.f(1)}))},{getOwnPropertySymbols:function(e){var t=o.f;return t?t(a(e)):[]}})},3643:()=>{},5205:()=>{},7057:(e,t,r)=>{"use strict";var i=r(1470).charAt,s=r(160),n=r(4932),o=r(183),a=r(9550),c="String Iterator",h=n.set,u=n.getterFor(c);o(String,"String",(function(e){h(this,{type:c,string:s(e),index:0})}),(function(){var e,t=u(this),r=t.string,s=t.index;return s>=r.length?a(void 0,!0):(e=i(r,s),t.index+=e.length,a(e,!1))}))},3997:(e,t,r)=>{"use strict";r(366)("asyncIterator")},3674:(e,t,r)=>{"use strict";var i=r(1091),s=r(5951),n=r(3930),o=r(1907),a=r(7376),c=r(9447),h=r(9846),u=r(8828),l=r(9724),d=r(8280),f=r(6624),p=r(7374),g=r(470),v=r(160),_=r(5817),m=r(8075),y=r(2875),w=r(4443),S=r(5407),x=r(7170),b=r(3846),R=r(4284),P=r(2220),O=r(2574),M=r(8055),T=r(9251),k=r(5816),C=r(2522),I=r(8530),E=r(6499),W=r(6264),F=r(560),D=r(366),A=r(3467),L=r(4840),j=r(4932),V=r(726).forEach,N=C("hidden"),z="Symbol",U="prototype",G=j.set,H=j.getterFor(z),B=Object[U],q=s.Symbol,$=q&&q[U],Y=s.RangeError,K=s.TypeError,J=s.QObject,X=b.f,Q=R.f,Z=S.f,ee=O.f,te=o([].push),re=k("symbols"),ie=k("op-symbols"),se=k("wks"),ne=!J||!J[U]||!J[U].findChild,oe=function(e,t,r){var i=X(B,t);i&&delete B[t],Q(e,t,r),i&&e!==B&&Q(B,t,i)},ae=c&&u((function(){return 7!==m(Q({},"a",{get:function(){return Q(this,"a",{value:7}).a}})).a}))?oe:Q,ce=function(e,t){var r=re[e]=m($);return G(r,{type:z,tag:e,description:t}),c||(r.description=t),r},he=function(e,t,r){e===B&&he(ie,t,r),f(e);var i=g(t);return f(r),l(re,i)?(r.enumerable?(l(e,N)&&e[N][i]&&(e[N][i]=!1),r=m(r,{enumerable:_(0,!1)})):(l(e,N)||Q(e,N,_(1,m(null))),e[N][i]=!0),ae(e,i,r)):Q(e,i,r)},ue=function(e,t){f(e);var r=p(t),i=y(r).concat(pe(r));return V(i,(function(t){c&&!n(le,r,t)||he(e,t,r[t])})),e},le=function(e){var t=g(e),r=n(ee,this,t);return!(this===B&&l(re,t)&&!l(ie,t))&&(!(r||!l(this,t)||!l(re,t)||l(this,N)&&this[N][t])||r)},de=function(e,t){var r=p(e),i=g(t);if(r!==B||!l(re,i)||l(ie,i)){var s=X(r,i);return!s||!l(re,i)||l(r,N)&&r[N][i]||(s.enumerable=!0),s}},fe=function(e){var t=Z(p(e)),r=[];return V(t,(function(e){l(re,e)||l(I,e)||te(r,e)})),r},pe=function(e){var t=e===B,r=Z(t?ie:p(e)),i=[];return V(r,(function(e){!l(re,e)||t&&!l(B,e)||te(i,re[e])})),i};h||(M($=(q=function(){if(d($,this))throw new K("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?v(arguments[0]):void 0,t=E(e),r=function(e){var i=void 0===this?s:this;i===B&&n(r,ie,e),l(i,N)&&l(i[N],t)&&(i[N][t]=!1);var o=_(1,e);try{ae(i,t,o)}catch(e){if(!(e instanceof Y))throw e;oe(i,t,o)}};return c&&ne&&ae(B,t,{configurable:!0,set:r}),ce(t,e)})[U],"toString",(function(){return H(this).tag})),M(q,"withoutSetter",(function(e){return ce(E(e),e)})),O.f=le,R.f=he,P.f=ue,b.f=de,w.f=S.f=fe,x.f=pe,F.f=function(e){return ce(W(e),e)},c&&(T($,"description",{configurable:!0,get:function(){return H(this).description}}),a||M(B,"propertyIsEnumerable",le,{unsafe:!0}))),i({global:!0,constructor:!0,wrap:!0,forced:!h,sham:!h},{Symbol:q}),V(y(se),(function(e){D(e)})),i({target:z,stat:!0,forced:!h},{useSetter:function(){ne=!0},useSimple:function(){ne=!1}}),i({target:"Object",stat:!0,forced:!h,sham:!c},{create:function(e,t){return void 0===t?m(e):ue(m(e),t)},defineProperty:he,defineProperties:ue,getOwnPropertyDescriptor:de}),i({target:"Object",stat:!0,forced:!h},{getOwnPropertyNames:fe}),A(),L(q,z),I[N]=!0},5084:()=>{},3313:(e,t,r)=>{"use strict";var i=r(1091),s=r(5582),n=r(9724),o=r(160),a=r(5816),c=r(4411),h=a("string-to-symbol-registry"),u=a("symbol-to-string-registry");i({target:"Symbol",stat:!0,forced:!c},{for:function(e){var t=o(e);if(n(h,t))return h[t];var r=s("Symbol")(t);return h[t]=r,u[r]=t,r}})},2596:(e,t,r)=>{"use strict";r(366)("hasInstance")},5721:(e,t,r)=>{"use strict";r(366)("isConcatSpreadable")},4954:(e,t,r)=>{"use strict";r(366)("iterator")},4452:(e,t,r)=>{"use strict";r(3674),r(3313),r(751),r(9721),r(5264)},751:(e,t,r)=>{"use strict";var i=r(1091),s=r(9724),n=r(5594),o=r(4640),a=r(5816),c=r(4411),h=a("symbol-to-string-registry");i({target:"Symbol",stat:!0,forced:!c},{keyFor:function(e){if(!n(e))throw new TypeError(o(e)+" is not a symbol");if(s(h,e))return h[e]}})},3377:(e,t,r)=>{"use strict";r(366)("matchAll")},4123:(e,t,r)=>{"use strict";r(366)("match")},2230:(e,t,r)=>{"use strict";r(366)("replace")},5344:(e,t,r)=>{"use strict";r(366)("search")},1660:(e,t,r)=>{"use strict";r(366)("species")},4610:(e,t,r)=>{"use strict";r(366)("split")},3669:(e,t,r)=>{"use strict";var i=r(366),s=r(3467);i("toPrimitive"),s()},4810:(e,t,r)=>{"use strict";var i=r(5582),s=r(366),n=r(4840);s("toStringTag"),n(i("Symbol"),"Symbol")},3325:(e,t,r)=>{"use strict";r(366)("unscopables")},768:(e,t,r)=>{"use strict";var i=r(6264),s=r(4284).f,n=i("metadata"),o=Function.prototype;void 0===o[n]&&s(o,n,{value:null})},8549:(e,t,r)=>{"use strict";r(366)("asyncDispose")},1697:(e,t,r)=>{"use strict";r(366)("customMatcher")},7152:(e,t,r)=>{"use strict";r(366)("dispose")},3939:(e,t,r)=>{"use strict";r(1091)({target:"Symbol",stat:!0},{isRegisteredSymbol:r(2595)})},3422:(e,t,r)=>{"use strict";r(1091)({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:r(2595)})},1785:(e,t,r)=>{"use strict";r(1091)({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:r(9197)})},36:(e,t,r)=>{"use strict";r(1091)({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:r(9197)})},8703:(e,t,r)=>{"use strict";r(366)("matcher")},6878:(e,t,r)=>{"use strict";r(366)("metadataKey")},1372:(e,t,r)=>{"use strict";r(366)("metadata")},4664:(e,t,r)=>{"use strict";r(366)("observable")},9671:(e,t,r)=>{"use strict";r(366)("patternMatch")},359:(e,t,r)=>{"use strict";r(366)("replaceAll")},2560:(e,t,r)=>{"use strict";r(9363);var i=r(9287),s=r(5951),n=r(4840),o=r(3742);for(var a in i)n(s[a],a),o[a]=o.Array},8251:(e,t,r)=>{"use strict";var i=r(1926);e.exports=i},4139:(e,t,r)=>{"use strict";var i=r(3842);r(2560),e.exports=i},7045:(e,t,r)=>{"use strict";var i=r(1730);r(2560),e.exports=i},70:(e,t,r)=>{"use strict";var i=r(1661);e.exports=i}},t={};function r(i){var s=t[i];if(void 0!==s)return s.exports;var n=t[i]={exports:{}};return e[i].call(n.exports,n,n.exports,r),n.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{"use strict";let e;const t=()=>e,i=function(e,r=""){if(e)return;const i=new Error(r);t().tracing.Log_Error(`Assert: ${r}`,i)},s=function(e){const r=new Error(e);t().tracing.Log_Error(`AssertWithFailed: ${e}`,r)};class n{constructor(e=0){this._unusedIds=[],this._nextId=e}generateNextId(){let e;return this._unusedIds.length>0?e=this._unusedIds.shift():(e=this._nextId,this._nextId+=1),e}release(e){this._unusedIds.push(e)}}class o{constructor(e){this._onmessage=null,this._messager=e}set onmessage(e){var t,r;null!==this._onmessage&&this._messager.removeEventListener("message",this._onmessage),this._messager.addEventListener("message",e),null===this._onmessage&&(null===(r=(t=this._messager).start)||void 0===r||r.call(t)),this._onmessage=e}postMessage(e,t){this._messager.postMessage(e,t)}close(){var e,t;null!==this._onmessage&&(this._messager.removeEventListener("message",this._onmessage),this._onmessage=null),null===(t=(e=this._messager).close)||void 0===t||t.call(e)}}class a{constructor(){this._connection=null}set connection(e){this._connection=e}get connection(){return i(null!==this._connection),this._connection}}class c{constructor(e,t,r,i){this._idGenerator=new n(2),this._invokeHandlers={},this._invokeResults=new Set,this._resolveInvokeResultsSended=null,this._responseHandlers=new Map,this._notifyHandlers={},this._transferObjs=[],this._closed=!1,this._onClose=null,this._messager=new o(e),this._messager.onmessage=this._handleMessage.bind(this),this._logErrorFn=i,t&&(this.localPeerObject=t),r&&(this._proxyFuncs=r);const s=new Promise((e=>{this._resolveCloseSent=e})),a=new Promise((e=>{this._resolveCloseReceived=e}));Promise.all([s,a]).then((()=>{this._messager.close(),this._messager=null}))}set localPeerObject(e){let t;if(this._invokeHandlers={},e instanceof a){const r=Object.getPrototypeOf(e);t=Object.getOwnPropertyNames(r)}else t=Object.getOwnPropertyNames(e);const r=t.filter((t=>"function"==typeof e[t]&&"constructor"!==t&&!t.startsWith("_")));for(const t of r)this.expose(t,((...r)=>e[t](...r)));this._localPeerObject=e,e instanceof a&&(e.connection=this)}get localPeerObject(){return this._localPeerObject}get remotePeerProxy(){if(this._remotePeerProxy)return this._remotePeerProxy;const e=new Map;return this._remotePeerProxy=new Proxy({},{get:(t,r,i)=>{var s;let n=null===(s=this._proxyFuncs)||void 0===s?void 0:s[r];return n||(n=e.get(r),n||(n=(...e)=>this.invoke(r,...e),e.set(r,n),n))}}),this._remotePeerProxy}_logError(e,r){this._logErrorFn?this._logErrorFn(e,r):t().tracing.Log_Error(e,r)}transfer(e){return this._transferObjs.push(e),e}expose(e,t){this._invokeHandlers[e]=t}on(e,t){this._notifyHandlers[e]=t}notify(e,...t){this._postRequest(1,e,t)}invoke(e,...t){const r=this._idGenerator.generateNextId(),i=new Promise(((e,t)=>{this._responseHandlers.set(r,{resolve:e,reject:t})}));return this._postRequest(r,e,t),i}_postRequest(e,r,i){if(this._closed)throw new Error("Can not postRequest after closed!!");try{this._messager.postMessage({id:e,name:r,args:i},this._transferObjs)}catch(e){t().tracing.Log_Error("[rpc] Error in postRequest",e)}this._transferObjs=[]}_postReponse(e,t){if(this._closed)throw new Error("Can not postReponse after closed!!");this._messager.postMessage({id:0,resId:e,response:t},this._transferObjs),this._transferObjs=[]}_serializeError(e){return e instanceof Error?{message:e.message,name:e.name,stack:e.stack}:e}_handleMessage(e){const t=e.data;if("id"in t)try{if(t.id<0)-1===t.id?(this._closePeerIfNeeded(t.reason),this._resolveCloseReceived()):s();else{if(0===t.id){const e=this._responseHandlers.get(t.resId);if(!e)return void this._logError(`DualRPC.handleMessage: ${t.resId} not found!`);const r=t.response;return"ret"in r?e.resolve(r.ret):"err"in r?(e.reject(r.err),this._logError(`DualRPC.handleMessage err: ${r.err}`)):s("Invalid Response"),this._responseHandlers.delete(t.resId),void this._idGenerator.release(t.resId)}if(1===t.id){try{const e=this._notifyHandlers[t.name];e&&e(...t.args)}catch(e){}return}{if(i(t.id>1),!(t.name in this._invokeHandlers))return void this._logError(`DualRPC.handleMessage: ${t.name} not registered!`);let e,r;try{const r=this._invokeHandlers[t.name];e=r(...t.args)}catch(e){r=e}if(r)return void this._postReponse(t.id,{err:this._serializeError(r)});if(!(e instanceof Promise)){try{this._postReponse(t.id,{ret:e})}catch(e){this._postReponse(t.id,{err:this._serializeError(e)})}return}this._invokeResults.add(e),e.then((e=>{this._postReponse(t.id,{ret:e})})).catch((e=>{this._postReponse(t.id,{err:this._serializeError(e)})})).finally((()=>{this._invokeResults.delete(e),this._resolveInvokeResultsSended&&0===this._invokeResults.size&&this._resolveInvokeResultsSended()}))}}}catch(e){this._logError("DualRPC.handleMessage err!!",e)}}_closePeerIfNeeded(e){this._closed||(this._closed=!0,this._onClose&&this._onClose(e),0===this._invokeResults.size?(this._messager.postMessage({id:-1,reason:e},[]),setTimeout((()=>{this._resolveCloseSent()}),10)):new Promise((e=>{this._resolveInvokeResultsSended=e})).then((()=>{this._messager.postMessage({id:-1,reason:e},[])})).then((()=>{setTimeout((()=>{this._resolveCloseSent()}),10)})))}close(e){this._closePeerIfNeeded(e)}set onClose(e){this._onClose=e}}class h extends a{}const u=new class{constructor(){this._connection=null}setRegistryServicePort(e){this._connection=new c(e)}transfer(e){return this._connection.transfer(e)}registerService(e,t,r){return this._connection.invoke("registerService",e,t,r)}unregisterService(e,t){this._connection.invoke("unregisterService",e,t)}findService(e){return this._connection.invoke("findService",e)}requestService(e,t,r){return this._connection.invoke("requestService",e,t,r)}acquireService(e,t){return r=this,i=void 0,o=function*(){const r=yield u.findService(e);let i;t&&t.selectService?i=t.selectService(r):1===r.length?i=r[0].serviceId:s("AcquireService Error: select service failed!");const n=yield u.requestService(e,i,t?t.serviceParams:void 0);return new c(n)},new((n=void 0)||(n=Promise))((function(e,t){function s(e){try{c(o.next(e))}catch(e){t(e)}}function a(e){try{c(o.throw(e))}catch(e){t(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(s,a)}c((o=o.apply(r,i||[])).next())}));var r,i,n,o}};class l{constructor(e,t){this._connection=null,this._services=[],this._registerPromise=null,this._serviceName=e,this._serviceCtor=t}register(e){if(null!==this._registerPromise)return;const t=new MessageChannel;this._connection=new c(t.port1,{requestPort:e=>{const t=this.accquirePort(e);return this._connection.transfer(t)}}),this._registerPromise=u.registerService(this._serviceName,u.transfer(t.port2),e)}unregister(){if(null===this._registerPromise)return;const e=this._connection;this._registerPromise.then((t=>{u.unregisterService(this._serviceName,t),e.close()})),this._connection=null,this._registerPromise=null}registerPromise(){return e=this,t=void 0,i=function*(){return this._registerPromise.then((e=>e>=0))},new((r=void 0)||(r=Promise))((function(s,n){function o(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}));var e,t,r,i}accquirePort(e){const t=new MessageChannel,r=new this._serviceCtor(e);return new c(t.port1,r).onClose=()=>{this._services.splice(this._services.indexOf(r),1),r.closeService()},this._services.push(r),t.port2}close(){this.unregister();for(const e of this._services)e.closeService(),e.connection.close();this._services=[]}}const d=class{_drawWatermarkWithShadow(e){let{ctx:t,textPos:r,opacity:i,name:s}=e;t.fillStyle="rgba(0, 0, 0, ".concat(i,")"),t.fillText(s,r.x,r.y),t.fillStyle="rgba(255, 255, 255, ".concat(i,")"),t.fillText(s,r.x+1,r.y+1)}_getTransformInfo(e){let t,{canvas:r,position:i}=e;if(1===i)t={x:r.width/2,y:0,rateRadio:0,maxWidth:r.width};else if(2===i)t={x:r.width/2,y:r.height,rateRadio:0,maxWidth:r.width};else if(4===i)t={x:0,y:r.height/2,rateRadio:Math.PI/2,maxWidth:r.height};else if(8===i)t={x:r.width,y:r.height/2,rateRadio:-Math.PI/2,maxWidth:r.height};else{const e=-21*Math.PI/180;t={x:r.width/2,y:r.height/2,rateRadio:e,maxWidth:Math.min(r.width/Math.cos(e),-r.height/Math.sin(e))}}return t.maxWidth>100&&(t.maxWidth-=50),t}_calcTextPos(e){let{position:t,ctx:r,name:i,textWidth:s}=e;const n=this._getPaddingWidth({ctx:r,position:t,name:i});return 1===t?{x:-s.width/2,y:n}:2===t||4===t||8===t?{x:-s.width/2,y:-n}:{x:-s.width/2,y:r.measureText(i[0]).width/2}}_getPaddingWidth(e){let{ctx:t,position:r,name:i}=e;return[1,2,4,8].includes(r)?32:t.measureText(i[0]).width}_setBaseLine(e){let{ctx:t,position:r}=e;t.textBaseline=1===r?"top":2===r||4===r||8===r?"bottom":"middle"}Get_WaterMarkRGBA(e){let{canvas:t,name:r,width:i,height:s,opacity:n=.15,position:o,convertToDataUrl:a=!1,transferToImage:c=!1}=e;if(!r||!i||!s)return;n=n||.15,i*=1,s*=1,t.width=i,t.height=s;let h=this._getTransformInfo({canvas:t,position:o});var u=t.getContext("2d");let l;if(u.clearRect(0,0,t.width,t.height),u.translate(h.x,h.y),u.rotate(h.rateRadio),this._setBaseLine({ctx:u,position:o}),u.lineWidth=1,u.imageSmoothingEnabled=!0,1==r.length){const e=h.maxWidth/r.length;u.font=e+"px  'Segoe UI'",l=u.measureText(r)}else{let e=16;for(u.font=e+"px  'Segoe UI'",l=u.measureText(r);l.width<h.maxWidth-2*this._getPaddingWidth({ctx:u,position:o,name:r});)e+=1,u.font=e+"px  'Segoe UI'",l=u.measureText(r);if(l.width>h.maxWidth-2*this._getPaddingWidth({ctx:u,position:o,name:r}))if(e>16)e-=1,u.font=e+"px  'Segoe UI'",l=u.measureText(r);else{const e=r;for(;r.length>5&&l.width>h.maxWidth-2*this._getPaddingWidth({ctx:u,position:o,name:r+"..."});)r=r.slice(0,r.length-1),l=u.measureText(r+"...");e!==r&&(r+="...")}}const d=this._calcTextPos({position:o,ctx:u,name:r,textWidth:l});var f;if(this._drawWatermarkWithShadow({ctx:u,name:r,opacity:n,textPos:d}),a)f=t.toDataURL();else if(c)f=t.transferToImageBitmap();else{var p=u.getImageData(0,0,u.canvas.width,u.canvas.height);f=new Uint8Array(p.data.buffer)}return u.rotate(-h.rateRadio),u.translate(-h.x,-h.y),f}Get_Repeated_WaterMarkRGBA(e){let{canvas:t,name:r,width:i,height:s,opacity:n=.15,position:o,convertToDataUrl:a=!1,transferToImage:c=!1}=e;if(!r||!i||!s)return;n=n||.15,i*=1,s*=1,t.width=i,t.height=s;const h=t.getContext("2d");h.clearRect(0,0,t.width,t.height),h.translate(i/2,s/2),h.rotate(-21*Math.PI/180),h.imageSmoothingEnabled=!0,h.font="".concat(32,"px 'Segoe UI'"),h.textBaseline="top";const u=h.measureText(r),l=.37*u.width;let d,f=0,p=-s;do{let e=f%2==0?l-i:-i;do{h.fillStyle="rgba(0, 0, 0, ".concat(n,")"),h.fillText(r,e,p),h.fillStyle="rgba(255, 255, 255, ".concat(n,")"),h.fillText(r,e+1,p+1),e+=u.width+l}while(e<i);p+=32+l,f++}while(p<s);if(a)d=t.toDataURL();else if(c)d=t.transferToImageBitmap();else{const e=h.getImageData(0,0,h.canvas.width,h.canvas.height);d=new Uint8Array(e.data.buffer)}return h.rotate(21*Math.PI/180),h.translate(-i/2,-s/2),d}};var f=r(4997),p=r(2321),g=r(2231);function v(e){return v="function"==typeof p&&"symbol"==typeof g?function(e){return typeof e}:function(e){return e&&"function"==typeof p&&e.constructor===p&&e!==p.prototype?"symbol":typeof e},v(e)}var _=r(9280);function m(e,t,r){return(t=function(e){var t=function(e){if("object"!=v(e)||!e)return e;var t=e[_];if(void 0!==t){var r=t.call(e,"string");if("object"!=v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==v(t)?t:t+""}(t))in e?f(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const y=new class{constructor(){m(this,"_platformDesc",{supportGraphicsAcceleration:!1,supportVideoFrame:!1,supportMediaStreamTrackGenerator:!1,supportTransferableStream:!1,supportDrawWatermark:!1,supportVideoFrameInWorker:!1,supportVideoTrackGeneratorInWorker:!1,supportOffscreenCanvasInWorker:!1,supportImageBitmapRenderingInWorker:!1,supportTransferableTrackAcrossWork:!1,supportsRequestAnimationFrameInWork:!1}),m(this,"_inferedDesc",{supportVideoTagRenderer:!1}),m(this,"_analyzing_promise",null),m(this,"_main_analyzed",!1),m(this,"_remote_analyzed",!1),m(this,"_analyzedPromise",void 0),m(this,"_resolveAnalyzedPromise",void 0),this._analyzedPromise=new Promise(((e,t)=>{this._resolveAnalyzedPromise=e}))}init(e){this._platformDesc=e.platform,this._inferedDesc=e.infered,this._main_analyzed=!0,this._remote_analyzed=!0,this._resolveAnalyzedPromise(this._remote_analyzed)}desc(){return{platform:this._platformDesc,infered:this._inferedDesc}}analyzed(){return this._remote_analyzed}analyzedPromise(){return this._analyzedPromise}_analyzeInferredCapabilites(){this._inferedDesc.supportVideoTagRenderer=this._platformDesc.supportVideoFrame&&this._platformDesc.supportVideoFrameInWorker&&(!0===this._platformDesc.supportMediaStreamTrackGenerator&&!0===this._platformDesc.supportTransferableStream||!0===this._platformDesc.supportVideoTrackGeneratorInWorker)}analyze(e){if(this._analyzing_promise)return this._analyzing_promise;const t=e.analyzeMainCapabilites();return Object.assign(this._platformDesc,t),this._main_analyzed=!0,this._analyzing_promise=new Promise(((t,r)=>{e.analyzeRemoteCapabilities().then((e=>{Object.assign(this._platformDesc,e),this._analyzeInferredCapabilites(),this._remote_analyzed=!0,this._resolveAnalyzedPromise(this._remote_analyzed),t(!0)})).catch((e=>{this._resolveAnalyzedPromise(this._remote_analyzed),t(!1)}))})),this._analyzing_promise}supportGraphicsAcceleration(){return i(this._main_analyzed),this._platformDesc.supportGraphicsAcceleration}supportTransferableStream(){return i(this._main_analyzed),this._platformDesc.supportTransferableStream}supportDrawWatermark(){return i(this._main_analyzed),this._platformDesc.supportDrawWatermark}supportVideoTagRenderer(){return!!this._remote_analyzed&&this._inferedDesc.supportVideoTagRenderer}supportMediaStreamTrackGenerator(){return i(this._main_analyzed),this._platformDesc.supportMediaStreamTrackGenerator}supportVideoTrackGeneratorInWorker(){return!!this._remote_analyzed&&this._platformDesc.supportVideoTrackGeneratorInWorker}supportTransferableTrackAcrossWork(){return!!this._remote_analyzed&&this._platformDesc.supportTransferableTrackAcrossWork}supportsRequestAnimationFrameInWork(){return!!this._remote_analyzed&&this._platformDesc.supportsRequestAnimationFrameInWork}supportMediaStreamTrackProcessor(){return!!this._remote_analyzed&&this._platformDesc.supportMediaStreamTrackProcessor}},w=new class{constructor(){m(this,"_info",void 0),this._info={browser:{brand:"",version:"",isBlink:!1,isWebkit:!1},sysinfo:{osType:"",os:"",osVersion:""},browserVersionInfo:{ie:"",edge:"",firefox:"",opera:"",chrome:"",safari:""},isLowerPerformanceDevice:!1}}init(e){this._info=e}info(){return this._info}browserInfo(){return this._info.browser}browserVersionInfo(){return this._info.browserVersionInfo}browserName(){var e;return null===(e=this._info.browser.brand)||void 0===e?void 0:e.toLocaleLowerCase()}isChrome(){var e;return"chrome"===(null===(e=this._info.browser.brand)||void 0===e?void 0:e.toLocaleLowerCase())}isSafari(){var e;return"safari"===(null===(e=this._info.browser.brand)||void 0===e?void 0:e.toLocaleLowerCase())}isFirefox(){var e;return"firefox"===(null===(e=this._info.browser.brand)||void 0===e?void 0:e.toLocaleLowerCase())}isBlink(){return this._info.browser.isBlink}isWebkit(){return this._info.browser.isWebkit}isLowerPerformanceDevice(){return this._info.isLowerPerformanceDevice}},S={NO_CONFIG:0,FALLBACK_TO_TAG_RENDERER_ON_CHROME:1,FALLBACK_TO_TAG_RENDERER_ON_SAFARI:2,FALLBACK_TO_TAG_RENDERER_ON_FIREFOX:4,LOWER_PERFORMANCE_DEVICE:8},x={NO_CONFIG:0,TAG_RENDERER_ON_CHROME:1,TAG_RENDERER_ON_SAFARI:2,TAG_RENDERER_ON_FIREFOX:4},b=new class{constructor(){m(this,"_desc",{defaultRendererType:1,isEnableCanvasCtxOptionsOpt:!1,isEnableFallbackToTagRender:!1,isEnableWasmTagRenderer:!1,safariYuvPaddingFixVer:void 0,chromeYuvLeftTopPaddingFixVer:void 0,canVideoUseTagRenderer:void 0,canSharingUseTagRenderer:void 0,canUseSsrcStream:void 0,isUseSsrcStream:!1,shouldCropWasmFrameOnPosMismatch:void 0,shouldCropWasmFrameOnSizeMismatchOnly:void 0,avStreamMode:void 0,baseScriptUrl:"",cssPixelScale:1,isVideoHasWaterMark:!1,isSharingHasWaterMark:!1,videoWatermarkInfo:void 0,sharingWatermarkInfo:void 0}),m(this,"_configDone",!1),m(this,"_configDonePromise",void 0),m(this,"_resolveConfigDonePromise",void 0),this._configDonePromise=new Promise(((e,t)=>{this._resolveConfigDonePromise=e}))}_tryResetDerivedConfigIfNeeded(){this._configDone&&(this._desc.canVideoUseTagRenderer=void 0,this._desc.canSharingUseTagRenderer=void 0,this._desc.canUseSsrcStream=void 0,this._desc.shouldCropWasmFrameOnPosMismatch=void 0,this._desc.shouldCropWasmFrameOnSizeMismatchOnly=void 0)}init(e){this._desc=e,this._configDone=!0}configDone(){return this._configDone}configDonePromise(){return this._configDonePromise}markConfigDone(){this._configDone=!0,this._resolveConfigDonePromise(!0)}desc(){return this._desc}defaultRendererType(){return this._desc.defaultRendererType}setDefaultRendererType(e){this._desc.defaultRendererType=e,this._tryResetDerivedConfigIfNeeded()}isEnableCanvasCtxOptionsOpt(){return this._desc.isEnableCanvasCtxOptionsOpt}setIsEnableCanvasCtxOptionsOpt(e){this._desc.isEnableCanvasCtxOptionsOpt=e,this._tryResetDerivedConfigIfNeeded()}isEnableWasmTagRenderer(){return this._desc.isEnableWasmTagRenderer}setWasmTagRendererFlags(e){let t=!1;w.isBlink()?t=e&x.TAG_RENDERER_ON_CHROME:w.isWebkit()?t=e&x.TAG_RENDERER_ON_SAFARI:"firefox"===w.browserName()&&(t=e&x.TAG_RENDERER_ON_FIREFOX),this._desc.isEnableWasmTagRenderer=t,this._tryResetDerivedConfigIfNeeded()}isEnableFallbackToTagRender(){return this._desc.isEnableFallbackToTagRender}setFallbackToTagRenderFlags(e){let t=!1;w.isBlink()?t=e&S.FALLBACK_TO_TAG_RENDERER_ON_CHROME:w.isWebkit()?t=e&S.FALLBACK_TO_TAG_RENDERER_ON_SAFARI:"firefox"===w.browserName()&&(t=e&S.FALLBACK_TO_TAG_RENDERER_ON_FIREFOX),t||w.isLowerPerformanceDevice()&&(t=e&S.LOWER_PERFORMANCE_DEVICE),this._desc.isEnableFallbackToTagRender=t,this._tryResetDerivedConfigIfNeeded()}canVideoUseTagRenderer(){return!!this._configDone&&(void 0!==this._desc.canVideoUseTagRenderer?this._desc.canVideoUseTagRenderer:y.supportVideoTagRenderer()?y.supportGraphicsAcceleration()&&!w.isLowerPerformanceDevice()||!this.isEnableFallbackToTagRender()?this.isEnableWasmTagRenderer()?(this._desc.canVideoUseTagRenderer=!0,this._desc.canVideoUseTagRenderer):(this._desc.canVideoUseTagRenderer=!1,!1):(this._desc.canVideoUseTagRenderer=!0,this._desc.canVideoUseTagRenderer):(this._desc.canVideoUseTagRenderer=!1,!1))}canSharingUseTagRenderer(){return!!this._configDone&&(void 0!==this._desc.canSharingUseTagRenderer?this._desc.canSharingUseTagRenderer:y.supportVideoTagRenderer()?y.supportGraphicsAcceleration()&&!w.isLowerPerformanceDevice()||!this.isEnableFallbackToTagRender()?this.isEnableWasmTagRenderer()?(this._desc.canSharingUseTagRenderer=!0,this._desc.canSharingUseTagRenderer):(this._desc.canSharingUseTagRenderer=!1,!1):(this._desc.canSharingUseTagRenderer=!0,this._desc.canSharingUseTagRenderer):(this._desc.canSharingUseTagRenderer=!1,!1))}canUseSsrcStream(){if(!this._configDone)return!1;if(void 0!==this._desc.canUseSsrcStream)return this._desc.canUseSsrcStream;let e=this.canVideoUseTagRenderer(),t=this.canSharingUseTagRenderer();return i(e==t),this._desc.canUseSsrcStream=e&&t,this._desc.canUseSsrcStream}isUseSsrcStream(){return this._desc.isUseSsrcStream}setIsUseSsrcStream(e){this._desc.isUseSsrcStream=e}setSafariYuvPaddingFixVer(e){"[object String]"===Object.prototype.toString.call(e)&&(this._desc.safariYuvPaddingFixVer=e,this._tryResetDerivedConfigIfNeeded())}setChromeYuvLeftTopPaddingFixVer(e){"[object String]"===Object.prototype.toString.call(e)&&(this._desc.chromeYuvLeftTopPaddingFixVer=e,this._tryResetDerivedConfigIfNeeded())}_versionGreaterThan(e,t){const r=t.toString().split("."),i=e.toString().split("."),s=r.length,n=i.length,o=Math.min(s,n);for(let e=0;e<o;e++){const t=parseInt(r[e],10),s=parseInt(i[e],10);if(t!==s)return s>t}return n>=s}shouldCropWasmFrameOnPosMismatch(){return!!this._configDone&&(void 0!==this._desc.shouldCropWasmFrameOnPosMismatch?this._desc.shouldCropWasmFrameOnPosMismatch:this.canVideoUseTagRenderer()||this.canSharingUseTagRenderer()?(this._desc.shouldCropWasmFrameOnPosMismatch=!0,w.isChrome()?this._desc.chromeYuvLeftTopPaddingFixVer&&this._versionGreaterThan(w.browserVersionInfo().chrome,this._desc.chromeYuvLeftTopPaddingFixVer)&&(this._desc.shouldCropWasmFrameOnPosMismatch=!1):w.isSafari()&&this._desc.safariYuvPaddingFixVer&&this._versionGreaterThan(w.browserVersionInfo().safari,this._desc.safariYuvPaddingFixVer)&&(this._desc.shouldCropWasmFrameOnPosMismatch=!1),this._desc.shouldCropWasmFrameOnPosMismatch):(this._desc.shouldCropWasmFrameOnPosMismatch=!1,!1))}shouldCropWasmFrameOnSizeMismatchOnly(){return!!this._configDone&&(void 0!==this._desc.shouldCropWasmFrameOnSizeMismatchOnly?this._desc.shouldCropWasmFrameOnSizeMismatchOnly:(this.canVideoUseTagRenderer()||this.canSharingUseTagRenderer())&&w.isWebkit()?(w.isSafari()&&this._desc.safariYuvPaddingFixVer&&this._versionGreaterThan(w.browserVersionInfo().safari,this._desc.safariYuvPaddingFixVer)?this._desc.shouldCropWasmFrameOnSizeMismatchOnly=!1:this._desc.shouldCropWasmFrameOnSizeMismatchOnly=!0,this._desc.shouldCropWasmFrameOnSizeMismatchOnly):(this._desc.shouldCropWasmFrameOnSizeMismatchOnly=!1,!1))}shouldCropWasmFrame(e,t,r){return!!this._configDone&&(e!=r.width||t!=r.height)&&(b.shouldCropWasmFrameOnSizeMismatchOnly()||b.shouldCropWasmFrameOnPosMismatch()&&(0!=r.x||0!=r.y))}getAVStreamMode(){return this._configDone?(void 0!==this._desc.avStreamMode||(y.supportTransferableStream()?this._desc.avStreamMode="writable-stream":y.supportTransferableTrackAcrossWork()?this._desc.avStreamMode="track":this._desc.avStreamMode="none"),this._desc.avStreamMode):"none"}getBaseScriptUrl(){return this._desc.baseScriptUrl}setBaseScriptUrl(e){this._desc.baseScriptUrl=e}getCssPixelScale(){return this._desc.cssPixelScale}setCssPixelScale(e){this._desc.cssPixelScale=e}isVideoHasWaterMark(){return this._desc.isVideoHasWaterMark}setIsVideoHasWaterMark(e){this._desc.isVideoHasWaterMark=e,this._tryResetDerivedConfigIfNeeded()}isSharingHasWaterMark(){return this._desc.isSharingHasWaterMark}setIsSharingHasWaterMark(e){this._desc.isSharingHasWaterMark=e,this._tryResetDerivedConfigIfNeeded()}getVideoWatermarkInfo(){return this._desc.videoWatermarkInfo}setVideoWatermarkInfo(e){this._desc.videoWatermarkInfo=e}getSharingWatermarkInfo(){return this._desc.sharingWatermarkInfo}setSharingWatermarkInfo(e){this._desc.sharingWatermarkInfo=e}},R="MEDIASDK_CACHE_INFO",P=new class{constructor(){this._highFrequencyLogs={},this.fixVersion="",this.cacheLogStack=[],this.isFlushing=!1}setInstance(e,t){this._instance=e,this.fixVersion=t}getMessageFromErrorOrEvent(e,t){let r=e;return t instanceof ErrorEvent?(t.filename&&(r+=` File: ${t.filename}`),(t.lineno||t.colno)&&(r+=` Line: ${t.lineno}:${t.colno}`),t.message&&(r+=` Message: ${t.message}`),t.error&&(r+=`\nStack: ${t.error.stack}`)):t instanceof Error?(t.message&&(r+=` Message: ${t.message}`),t.stack&&(r+=` Stack: ${t.stack}`),t.name&&(r+=` Name: ${t.name}`),t.constraint&&(r+=` Constraint: ${t.constraint}`)):t instanceof CloseEvent?(t.code&&(r+=` Code: ${t.code}`),t.reason&&(r+=` Reason: ${t.reason}`),r+=` wasClean: ${t.wasClean}`):t instanceof DOMException?(t.message&&(r+=` Message: ${t.message}`),t.name&&(r+=` Name: ${t.name}`)):r+=t?t.toString():"",r}_addCacheLog(e,t){this.cacheLogStack.length<100&&this.cacheLogStack.push({type:e,message:t})}flushCacheLog(){if(this._instance&&this.cacheLogStack.length>0&&!this.isFlushing){this.isFlushing=!0;let e="";this.cacheLogStack.forEach((t=>{let{type:r,message:{message:i="",tags:s=[]}}=t;const n=i?`${s.join("|")}:${i}|----|`:"";switch(r){case"log":this._log(i,[...s,R]);break;case"warn":case"error":case"severityerror":case"directReport":e+=n}})),e&&this._directReport(e,[R]),this.cacheLogStack=[],this.isFlushing=!1}}log(e,t=[]){this._instance?(this.flushCacheLog(),this._log(e,t)):this._addCacheLog("log",{message:e,tags:t})}warn(e,t=null,r=[]){e=this.getMessageFromErrorOrEvent(e,t),this._instance?(this.flushCacheLog(),this._warn(e,r)):this._addCacheLog("warn",{message:e,tags:r})}error(e,t=null,r=[]){var i;e=this.getMessageFromErrorOrEvent(e,t),this._highFrequencyLogs[e]?this._highFrequencyLogs[e]+=1:this._highFrequencyLogs[e]=1,!((i=this._highFrequencyLogs[e])&i-1)&&(this._instance?(this.flushCacheLog(),this._error(e,r)):this._addCacheLog("error",{message:e,tags:r}))}severityerror(e,t=[]){this._instance?(this.flushCacheLog(),this._severityerror(JSON.stringify(e),t)):this._addCacheLog("severityerror",{message:JSON.stringify(e),tags:t})}directReport(e,t=["MEDIASDK_INFO"]){var r;this._instance?(this.flushCacheLog(),null===(r=this._directReport)||void 0===r||r.call(this,e,t)):this._addCacheLog("directReport",{message:e,tags:t})}_log(e,t=[]){this._instance&&this._instance.log(e,t)}_warn(e,t=[]){this._instance&&this._instance.warn(e,t)}_error(e,t=[]){this._instance&&this._instance.error(e,[this.fixVersion,...t])}_severityerror(e,t=[]){this._instance&&this._instance.error(e,t)}_directReport(e,t=[]){var r,i;this._instance&&(null===(i=(r=this._instance).directReport)||void 0===i||i.call(r,{msg:e},t))}clearHighFrequencyLogs(){this._highFrequencyLogs={}}};new Error;const O=new Map;function M(e,t="|"){return e?e.toString().replaceAll(/[,，]/g,t):""}const T="function"!=typeof importScripts;function k(e,t=null){T?P.error(e,t):C(e,t)}function C(e,t=null){var r,i;if(t instanceof Error||t instanceof ErrorEvent){const s=t;e+=" Code: "+(null==s?void 0:s.code)+" Message: "+(null==t?void 0:t.message)+" Stack: "+(null!==(i=null===(r=null==s?void 0:s.error)||void 0===r?void 0:r.stack)&&void 0!==i?i:null==s?void 0:s.stack),t=null}postMessage({status:61,errorMessage:e,errorEvent:t})}var I=function(e,t,r,i){return new(r||(r=Promise))((function(s,n){function o(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};const E=(e,r)=>{var i;const s=null!==(i=null==r?void 0:r.skipFrame)&&void 0!==i&&i;let n=!1,o=null;const a=[],c=t().capabilities.supportsRequestAnimationFrameInWork(),h=e.getWriter();return new WritableStream({start(){I(void 0,void 0,void 0,(function*(){const e=()=>I(void 0,void 0,void 0,(function*(){if(!n){if(s){if(o){const e=o;o=null;try{yield h.ready,yield h.write(e)}finally{e.close()}}}else for(;a.length>0;){const e=a.shift();try{yield h.ready,yield h.write(e)}finally{e.close()}}c?requestAnimationFrame(e):setTimeout(e,20)}}));c?requestAnimationFrame(e):setTimeout(e,0)}))},write(e){return I(this,void 0,void 0,(function*(){s?(o&&o.close(),o=e):a.push(e)}))},close(){n=!0,null==o||o.close(),a.forEach((e=>e.close())),a.length=0,h.close()},abort(e){n=!0,null==o||o.close(),a.forEach((e=>e.close())),a.length=0,h.abort(e)}})};const W={mgr:null,config:b,capabilities:y,userAgent:w,tracing:{add_monitor(e){!function(e){postMessage({status:35,data:e})}(e)},globaltracing_error(e,t=null){C(e,t)},Log_Error(e,t=null){k(e,t)}},graphics:{create_webgl_context_failed_monitor(e){!function(e){T?function(e,t){if(!function(e){const t=performance.now();return(!O.has(e)||t-O.get(e)>5e3)&&(O.set(e,t),!0)}(e))return;let r;try{r=M("object"==typeof t?JSON.stringify(t):t)}catch(e){r=M(t)}P.error(`NotifyUIError,event=${e},data=${r}`)}(-51,e):postMessage({status:-27,where:e})}(e)},calculateUVCoord:(e,t,r,i)=>function(e,t,r,i){if(!e||!t||!r)return null;const s=t.width/t.height;let n=t.width,o=t.height;if(t.width>e.width||t.height>e.height){const r=e.width/t.width,i=e.height/t.height,s=Math.min(r,i);n*=s,o*=s}let a=0,c=0;e.width/e.height>s?(c=Math.floor(e.height/o)*o,a=Math.floor(c*s/n)*n,a>e.width&&(a=Math.floor(e.width/n)*n,c=Math.floor(a/s/o)*o)):(a=Math.floor(e.width/n)*n,c=Math.floor(a/s/o)*o,c>e.height&&(c=Math.floor(e.height/o)*o,a=Math.floor(c*s/n)*n));let h=0,u=0,l=0,d=0,f={x:u,y:h,w:l,h:d};0==i?(h=1-(h+(o-1)/e.height),u=t.left/e.width,d=1-t.top/e.height,l=u+n/e.width,f.x=u,f.y=1-d,f.w=l,f.h=1-h):1==i?(u=1-(h+(o-1)/e.height),l=1-t.top/e.height,h=t.left/e.width,d=u+n/e.width):2==i?(h=t.top/e.height,u=t.left/e.width,d=h+(o-1)/e.height,l=u+n/e.width):3==i&&(u=t.top/e.height,l=h+(o-1)/e.height,h=t.left/e.width,d=u+n/e.width);let p=[],g=[{x:l,y:d},{x:l,y:h},{x:u,y:h},{x:l,y:d},{x:u,y:d},{x:u,y:h}];for(let e=0;e<g.length;++e){let t={u:g[e].x,v:g[e].y};p.push(t)}let v=[];for(let e=0;e<p.length;++e){let t=p[e];v.push(t.u),v.push(t.v)}return{uvCoords:v,uvRect:f}}(e,t,r,i),calculateUVCoordsForMultiView:(e,t,r,i,s,n)=>function(e,t,r,i,s,n){let o=0,a=0,c=0,h=0,u={x:a,y:o,w:c,h};if(e){const e=1==s||3==s?t.height/t.width:t.width/t.height,n=i.left||0,u=i.top||0;if(i.width/i.height>e){const t=i.height*e;o=u/r.height,a=(Math.round((i.width-t)/2)+n)/r.width,h=o+(i.height-1)/r.height,c=a+t/r.width}else{const t=i.width/e;o=(Math.round((i.height-t)/2)+u)/r.height,a=n/r.width,h=o+(t-1)/r.height,c=a+i.width/r.width}0==s?(o=1-(o+(i.height-1)/r.height),a=i.left/r.width,h=1-i.top/r.height,c=a+i.width/r.width):1==s?(a=1-(o+(i.height-1)/r.height),c=1-i.top/r.height,o=i.left/r.width,h=a+i.width/r.width):2==s?(o=i.top/r.height,a=i.left/r.width,h=o+(i.height-1)/r.height,c=a+i.width/r.width):3==s&&(a=i.top/r.height,c=o+(i.height-1)/r.height,o=i.left/r.width,h=a+i.width/r.width)}else{const e=i.width/i.height;let t=i.width,n=i.height;if(i.width>r.width||i.height>r.height){const e=r.width/i.width,s=r.height/i.height,o=Math.min(e,s);t*=o,n*=o}let l=0,d=0;r.width/r.height>e?(d=Math.floor(r.height/n)*n,l=Math.floor(d*e/t)*t,l>r.width&&(l=Math.floor(r.width/t)*t,d=Math.floor(l/e/n)*n)):(l=Math.floor(r.width/t)*t,d=Math.floor(l/e/n)*n,d>r.height&&(d=Math.floor(r.height/n)*n,l=Math.floor(d*e/t)*t)),0==s?(o=1-(o+(n-1)/r.height),a=i.left/r.width,h=1-i.top/r.height,c=a+t/r.width,u.x=a,u.y=1-h,u.w=c,u.h=1-o,i.height>i.width&&(a=function(e){const t=Math.pow(10,2);return Math.ceil(e*t)/t}(a),c=function(e){const t=Math.pow(10,2);return Math.floor(e*t)/t}(c))):1==s?(a=1-(o+(n-1)/r.height),c=1-i.top/r.height,o=i.left/r.width,h=a+t/r.width):2==s?(o=i.top/r.height,a=i.left/r.width,h=o+(n-1)/r.height,c=a+t/r.width):3==s&&(a=i.top/r.height,c=o+(n-1)/r.height,o=i.left/r.width,h=a+t/r.width)}let l=[],d=[{x:c,y:h},{x:c,y:o},{x:a,y:o},{x:c,y:h},{x:a,y:h},{x:a,y:o}];for(let e=0;e<d.length;++e){let t=null;if(n){let r=-1*Math.abs(d[e].x);d[e].x=r,t={u:d[e].x+1,v:d[e].y}}else t={u:d[e].x,v:d[e].y};l.push(t)}let f=[];for(let e=0;e<l.length;++e){let t=l[e];f.push(t.u),f.push(t.v)}return{uvCoords:f,uvRect:u}}(e,t,r,i,s,n),calculateRenderRect:(e,t)=>function(e,t){let r=0,i=0,s=0,n=0;const o=t.width/t.height;return e.width/e.height>o?(i=e.height,r=i*o,s=(e.width-r)/2,n=0):(r=e.width,i=r/o,s=0,n=(e.height-i)/2),r<=e.canvas.width&&(s=(e.canvas.width-r)/2),i<=e.canvas.height&&(n=(e.canvas.height-i)/2),{x:s,y:n,width:r,height:i}}(e,t),evalCroppingRect:(e,t)=>function(e,t){if(!e||null==t)throw new Error("evalCroppingRect() invalid parameters!");return 1===t||3===t?{top:e.top,left:e.left,width:e.height,height:e.width}:e}(e,t)},assertion:{assert(e,t=""){i(e,t)},assertWithFailed(e){s(e)},abstractMethod(){!function(){const e=new Error("call abstract method!");t().tracing.Log_Error("AbstractMethod!",e)}()},unreachable(){!function(){const e=new Error("Unreachable code reached!");t().tracing.Log_Error("Unreachable!",e)}()}}};let F=new OffscreenCanvas(1,1);const D=new class{constructor(e,t){this._provider=null,this._serviceName=e,this._serviceCtor=t}exposed(){return null!==this._provider}exposeService(e,t=!0){return this._provider||(this._provider=new l(this._serviceName,this._serviceCtor)),t&&this._provider.register(e),this._provider}unexposeService(){this._provider&&this._provider.unregister()}}("graphics/VideoRasterService",class extends h{constructor(e){super(),this._lastVideoWidth=-1,this._lastVideoHeight=-1,this._videoPaintWidth=-1,this._videoPaintHeight=-1,this._isRotated=!1,this._waterMarkInfo=null,this._videoMirrorState=!1,this._videoRotationState="rot0",this._inputStream=null,this._outputTrack=null,this._waterMarkImage=null,this._waterMarkGen=null,this._rasterCtx=null,this._closed=!1,this.updateCssDisplaySize(e.cssDisplaySize),e.options&&e.options.waterMarkInfo&&(this._waterMarkInfo=e.options.waterMarkInfo),this._outputWriterPromise=function(e){let t,r=!1,i=!1;const s=new Promise(((s,n)=>{e.then((e=>{i||(r=!0,t=e,s(e))}),(e=>{i||n(e)}))}));return{then:(e,t)=>s.then(i?void 0:e,i?void 0:t),catch:e=>s.catch(i?void 0:e),finally:e=>s.finally(i?void 0:e),isResolved:()=>r,isCanceled:()=>i,getValue:()=>t,cancel:()=>{i=!0}}}(new Promise((e=>{this._resolveOutputWriterPromise=e})));const t=new WritableStream({write:e=>{if(this._closed)return void e.close();const t=this._process(e);this._outputWriterPromise.isResolved()?this._writeVideoFrame(this._outputWriterPromise.getValue(),t):this._outputWriterPromise.then((e=>{this._writeVideoFrame(e,t)}))},close:()=>{this._outputWriterPromise.then((e=>{e.close()}))},abort:()=>{this._outputWriterPromise.then((e=>{e.abort()}))}});this._inputStream=E(t,{skipFrame:!0})}closeService(){var e;const t=null===(e=this._rasterCtx)||void 0===e?void 0:e.canvas;t&&(t.width=1,t.height=1),this._closed=!0}_writeVideoFrame(e,t){e.ready.then((()=>e.write(t))).catch((e=>{k("[ssrcstream] Err in VideoRasterTask",e)})).finally((()=>{t.close()}))}provideInputStream(e){e.pipeTo(this._inputStream)}provideOutputStream(e){const t=e.getWriter();this._resolveOutputWriterPromise(t)}accquireOutputTrack(){if(W.assertion.assert("track"===W.config.getAVStreamMode()),W.assertion.assert(null===this._outputTrack),!this._outputTrack){const e=new VideoTrackGenerator;this._outputTrack=e.track,this._resolveOutputWriterPromise(e.writable.getWriter())}return this.connection.transfer(this._outputTrack)}provideInputTrack(e){new MediaStreamTrackProcessor({track:e}).readable.pipeTo(this._inputStream)}updateVideoMirrorState(e){this._videoMirrorState=e}_isRotatedState(e){return"rot90"===e||"rot270"===e}updateVideoRotation(e){const t=e.rotationState;this._videoRotationState!==t&&(this._isRotatedState(this._videoRotationState)!==this._isRotatedState(t)&&(this._rasterCtx=null),this._videoRotationState=t)}updateCssDisplaySize(e){if(this._cssSize&&e.width===this._cssSize.width&&e.height===this._cssSize.height)return;this._cssSize=e;const t=this._cssSize.width,r=this._cssSize.height;this._displayRatio=t/r;const i=b.getCssPixelScale();this._pixelsSize={width:t*i,height:r*i},this._rasterCtx=null}updateWatermarkInfo(e){this._waterMarkInfo=e,this._waterMarkImage=null}get waterMarkGen(){return this._waterMarkGen||(this._waterMarkGen=new d),this._waterMarkGen}shouldWatermarkRepeated(e,t){return this._waterMarkInfo&&this._waterMarkInfo.repeated&&e>512&&t>512}updateWatermarkImage(e,t){if(!this._waterMarkInfo||!this._waterMarkInfo.enable||!this._waterMarkInfo.name)return void(this._waterMarkImage=null);const r=this.shouldWatermarkRepeated(e,t),i=e<512||t<288?16:this._waterMarkInfo.position;this._waterMarkImage=r?this.waterMarkGen.Get_Repeated_WaterMarkRGBA({canvas:F,name:this._waterMarkInfo.name,width:e,height:t,opacity:this._waterMarkInfo.opacity,position:i,transferToImage:!0}):this.waterMarkGen.Get_WaterMarkRGBA({canvas:F,name:this._waterMarkInfo.name,width:e,height:t,opacity:this._waterMarkInfo.opacity,position:i,transferToImage:!0}),F.width=1,F.height=1}_process(e){const t=this._cssSize;if(0===t.width||0===t.height)return e;if(!this._rasterCtx||e.displayWidth!==this._lastVideoWidth||e.displayHeight!==this._lastVideoHeight){const r=this._pixelsSize;let i,s,n;this._lastVideoWidth=e.displayWidth,this._lastVideoHeight=e.displayHeight,"rot90"===this._videoRotationState||"rot270"===this._videoRotationState?(i=e.displayHeight/e.displayWidth,this._isRotated=!0):(i=e.displayWidth/e.displayHeight,this._isRotated=!1),i>=this._displayRatio?(s=e.displayWidth,n=Math.round(s/this._displayRatio)):(n=e.displayHeight,s=Math.round(n*this._displayRatio));const o=Math.min(306,r.width),a=Math.min(306/this._displayRatio,r.height),c=Math.max(Math.max(t.width,o),Math.min(r.width,s)),h=Math.max(Math.max(t.height,a),Math.min(r.height,n));let u;i>=this._displayRatio?(this._videoPaintWidth=c,this._videoPaintHeight=Math.round(this._videoPaintWidth/i)):(this._videoPaintHeight=h,this._videoPaintWidth=Math.round(this._videoPaintHeight*i)),this._rasterCtx?(u=this._rasterCtx.canvas,c===u.width&&h===u.height||(u.width=c,u.height=h,this.connection.notify("videoSizeChange",c,h))):(u=new OffscreenCanvas(c,h),this._rasterCtx=u.getContext("2d",{alpha:!1}),this.connection.notify("videoSizeChange",c,h)),this._waterMarkImage=null}const r=this._rasterCtx,i=r.canvas;switch(this._waterMarkImage||this.updateWatermarkImage(i.width,i.height),r.setTransform(1,0,0,1,0,0),this._rasterCtx.fillStyle="rgba(0,0,0,1)",this._rasterCtx.fillRect(0,0,i.width,i.height),r.setTransform(1,0,0,1,0,0),r.translate(i.width/2,i.height/2),this._videoRotationState){case"rot0":break;case"rot90":r.rotate(Math.PI/2);break;case"rot180":r.rotate(Math.PI);break;case"rot270":r.rotate(-Math.PI/2);break;default:s()}this._videoMirrorState&&r.scale(-1,1),this._isRotated?r.drawImage(e,-this._videoPaintHeight/2,-this._videoPaintWidth/2,this._videoPaintHeight,this._videoPaintWidth):r.drawImage(e,-this._videoPaintWidth/2,-this._videoPaintHeight/2,this._videoPaintWidth,this._videoPaintHeight),this._waterMarkImage&&(r.setTransform(1,0,0,1,0,0),r.drawImage(this._waterMarkImage,0,0,i.width,i.height));const n=i.transferToImageBitmap(),o=new VideoFrame(n,{timestamp:e.timestamp,duration:e.duration});return e.close(),n.close(),o}});let A;new c(globalThis,{load(t,r){return i=this,s=void 0,o=function*(){if(A)return A;e=W,w.init(r.renderUserAgentInfo),y.init(r.renderCapabilitiesDesc),b.init(r.renderConfigDesc),u.setRegistryServicePort(t);const i=D.exposeService();return A=i.registerPromise(),A},new((n=void 0)||(n=Promise))((function(e,t){function r(e){try{c(o.next(e))}catch(e){t(e)}}function a(e){try{c(o.throw(e))}catch(e){t(e)}}function c(t){var i;t.done?e(t.value):(i=t.value,i instanceof n?i:new n((function(e){e(i)}))).then(r,a)}c((o=o.apply(i,s||[])).next())}));var i,s,n,o}})})()})();
//# sourceMappingURL=https://d1cdksi819e9z7.cloudfront.net/sourcemap/graphics.min.js-cd31e1150c4ed3dd4da2.map